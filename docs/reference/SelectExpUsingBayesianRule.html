<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="description" content="This function is used for the MAMS design with a binary outcome and will perform treatment selection at the interim analysis (IA).   
 At the IA, utilize a Bayesian rule to select any experimental treatment that has at least a user-specified probability (treatmentPValue) of being greater than a user-specified historical 
 response rate (historicResponseRate). Specifically, if Pr( pj &amp;gt; historicResponseRate | data ) &amp;gt; treatmentPValue, then experimental treatment j is selected for stage 2.
 If none of the treatments meet the criteria for selection, then select the treatment with the largest Pr( pj &amp;gt; historiceResponseRate | data ).
 User-specified pj ~ Beta( dPriorAlpha, dPriorBeta )
 After the IA, use a randomization ratio of 2:1 (experimental:control) for all experimental treatments that are selected for stage 2."><title>Select treatments to advance based on a Bayesian rule to select any that has at least a user-specified probability of being greater than a user-specified historical response rate. — SelectExpUsingBayesianRule • CyneRgy</title><!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png"><link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png"><link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png"><link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png"><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.2.2/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.2.2/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Select treatments to advance based on a Bayesian rule to select any that has at least a user-specified probability of being greater than a user-specified historical response rate. — SelectExpUsingBayesianRule"><meta property="og:description" content="This function is used for the MAMS design with a binary outcome and will perform treatment selection at the interim analysis (IA).   
 At the IA, utilize a Bayesian rule to select any experimental treatment that has at least a user-specified probability (treatmentPValue) of being greater than a user-specified historical 
 response rate (historicResponseRate). Specifically, if Pr( pj &amp;gt; historicResponseRate | data ) &amp;gt; treatmentPValue, then experimental treatment j is selected for stage 2.
 If none of the treatments meet the criteria for selection, then select the treatment with the largest Pr( pj &amp;gt; historiceResponseRate | data ).
 User-specified pj ~ Beta( dPriorAlpha, dPriorBeta )
 After the IA, use a randomization ratio of 2:1 (experimental:control) for all experimental treatments that are selected for stage 2."><meta property="og:image" content="https://Cytel-Inc.github.io/CyneRgy/logo.png"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">CyneRgy</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.9.0</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item">
  <a class="nav-link" href="../index.html">Home</a>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-examples">Examples</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-examples">
    <a class="dropdown-item" href="../articles/ExampleOutline.html">Example List</a>
    <div class="dropdown-divider"></div>
    <h6 class="dropdown-header" data-toc-skip>Patient Simulation</h6>
    <a class="dropdown-item" href="../articles/2ArmNormalOutcomePatientSimulationDescription.html">2-Arm, Normal Outcome</a>
    <a class="dropdown-item" href="../articles/2ArmTimeToEventOutcomePatientSimulationDescription.html">2-Arm, Time-to-Event Outcome</a>
    <a class="dropdown-item" href="../articles/2ArmBinaryOutcomePatientSimulation.html">2-Arm, Binary Outcome</a>
    <div class="dropdown-divider"></div>
    <h6 class="dropdown-header" data-toc-skip>Analysis</h6>
    <a class="dropdown-item" href="../articles/2ArmNormalOutcomeAnalysisDescription.html">2-Arm, Normal Outcome</a>
    <a class="dropdown-item" href="../articles/2ArmTimeToEventOutcomeAnalysisDescription.html">2-Arm, Time-To-Event Outcome</a>
    <a class="dropdown-item" href="../articles/2ArmBinaryOutcomeAnalysisDescription.html">2-Arm, Binary</a>
    <div class="dropdown-divider"></div>
    <h6 class="dropdown-header" data-toc-skip>Treatment Selection</h6>
    <a class="dropdown-item" href="../articles/TreatmentSelectionDescription.html">Binary Outcome</a>
    <div class="dropdown-divider"></div>
    <h6 class="dropdown-header" data-toc-skip>Advanced Examples</h6>
    <a class="dropdown-item" href="../articles/AssurnaceConsecutiveStudies.html">Bayesian Assurance of Consecutive Studies</a>
    <div class="dropdown-divider"></div>
    <h6 class="dropdown-header" data-toc-skip>Other Integration Points</h6>
    <a class="dropdown-item" href="../articles/GeneratePoissonArrival.html">Poisson Arrival Times</a>
  </div>
</li>
<li class="active nav-item">
  <a class="nav-link" href="../reference/index.html">References</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../articles/ContibutingToCyneRgy.html">Contribute</a>
</li>
      </ul><form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off"></form>

      <ul class="navbar-nav"><li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/Cytel-Inc/CyneRgy">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div>

    
  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Select treatments to advance based on a Bayesian rule to select any that has at least a user-specified probability of being greater than a user-specified historical response rate.</h1>
      
      <div class="d-none name"><code>SelectExpUsingBayesianRule.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>This function is used for the MAMS design with a binary outcome and will perform treatment selection at the interim analysis (IA).   
 At the IA, utilize a Bayesian rule to select any experimental treatment that has at least a user-specified probability (treatmentPValue) of being greater than a user-specified historical 
 response rate (historicResponseRate). Specifically, if Pr( pj &gt; historicResponseRate | data ) &gt; treatmentPValue, then experimental treatment j is selected for stage 2.
 If none of the treatments meet the criteria for selection, then select the treatment with the largest Pr( pj &gt; historiceResponseRate | data ).
 User-specified pj ~ Beta( dPriorAlpha, dPriorBeta )
 After the IA, use a randomization ratio of 2:1 (experimental:control) for all experimental treatments that are selected for stage 2.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">SelectExpUsingBayesianRule</span><span class="op">(</span><span class="va">SimData</span>, <span class="va">DesignParam</span>, <span class="va">LookInfo</span>, UserParam <span class="op">=</span> <span class="cn">NULL</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>
    <dl><dt>SimData</dt>
<dd><p>Data frame which consists of data generated in current simulation</p></dd>


<dt>DesignParam</dt>
<dd><p>List of Design and Simulation Parameters required to perform treatment selection.</p></dd>


<dt>LookInfo</dt>
<dd><p>List containing Design and Simulation Parameters, which might be required to perform treatment selection</p></dd>


<dt>UserParam</dt>
<dd><p>A list of user defined parameters in East. The default must be NULL.
If UserParam is supplied, the list must contain the following named element:</p><dl><dt>UserParam$dPriorAlpha</dt>
<dd><p>A value (0,1) that defines the prior alpha parameter of the beta distribution. 
                        If this value is not specified, the default is 0.2.</p></dd>
  
<dt>UserParam$dPriorBeta</dt>
<dd><p>A value (0,1) that specifies the prior beta parameter of the beta distribution. 
                            If this value is not specified, the default is 0.8.</p></dd>

<dt>UserParam$historicResponseRate</dt>
<dd><p>A value (0,1) that specifies the historic response rate.
                                If this value is not specified, the default is 0.1.</p></dd>

<dt>UserParam$treatmentPValue</dt>
<dd><p>A value (0,1) that specifies the probability needed of being greater than the historic response rate for an experimental treatment to be selected. 
                            If this value is not specified, the default is 0.2.</p></dd>

         
</dl></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    

<p>TreatmentID  A vector that consists of the experimental treatments that were selected and carried forward. Experimental treatment IDs are 1, 2, ..., number of experimental treatments</p>


<p>AllocRatio A vector that consists of the allocation for all experimental treatments that continue to the next phase.</p>


<p>ErrorCode An integer value:  ErrorCode = 0 --&gt; No Error
                                      ErrorCode &gt; 0 --&gt; Non fatal error, current simulation is aborted but the next simulations will run
                                      ErrorCode &lt; 0 --&gt; Fatal error, no further simulation will be attempted</p>
    </div>
    <div class="section level2">
    <h2 id="note">Note<a class="anchor" aria-label="anchor" href="#note"></a></h2>
    <p>The length of TreatmentID and AllocRatio must be the same.</p>
<p>The allocation ratio for control will be 1, AllocRatio are relative to this value.  So, a 2 will randomize twice as many to experimental</p>
<p>The order of AllocRatio should be the same as TreatmentID, and the  corresponding elements will have the assigned allocation ratio</p>
<p>The returned vector ONLY includes TreatmentIDs for experimental treatments, eg TreatmentID = c( 0, 1, 2 ) is invalid, because you do NOT need to include 0 for control.</p>
<p>You must return at LEAST one treatment and one allocation ratio</p>
<p>Helpful Hints:
      There is often info that East sends to R that are not shown in a given example.  It can be very helpful to save the input 
      objects and then load them into your R session and inspect them.  This can be done with the following R code in your function.</p>
<p>saveRDS( SimData,     "SimData.Rds")
      saveRDS( DesignParam, "DesignParam.Rds" )
      saveRDS( LookInfo,    "LookInfo.Rds" )</p>
<p>The above code will save each of the input objects to a file so they may be examined within R.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    
    </div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p></p><p>Developed by J. Kyle Wathen, Valeria A. G. Mazzanti, Sydney Ringold.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer></div>

  

  

  </body></html>


<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Multiple Endpoints With Covariates and Stratified Randomisation • CyneRgy</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="96x96" href="../favicon-96x96.png">
<link rel="icon" type="”image/svg+xml”" href="../favicon.svg">
<link rel="apple-touch-icon" sizes="180x180" href="../apple-touch-icon.png">
<link rel="icon" sizes="any" href="../favicon.ico">
<link rel="manifest" href="../site.webmanifest">
<script src="../lightswitch.js"></script><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/Source_Sans_3-0.4.9/font.css" rel="stylesheet">
<link href="../deps/Source_Code_Pro-0.4.9/font.css" rel="stylesheet">
<link href="../deps/font-awesome-6.4.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Multiple Endpoints With Covariates and Stratified Randomisation">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.11/dist/katex.min.css" integrity="sha384-nB0miv6/jRmo5UMMR1wu3Gz6NLsoTkbqJghGIsx//Rlm+ZU03BU6SQNC66uf4l5+" crossorigin="anonymous">
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.11/dist/katex.min.js" integrity="sha384-7zkQWkzuo3B5mTepMUcHkMB5jZaolc2xDwL6VFqjFALcbeS9Ggm/Yr2r3Dy4lfFg" crossorigin="anonymous"></script><script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.11/dist/contrib/auto-render.min.js" integrity="sha384-43gviWU0YVjaDtb/GhzOouOXtZMP/7XUzwPTstBeZFe/+rCMvRwr4yROQP43s0Xk" crossorigin="anonymous" onload="renderMathInElement(document.body);"></script>
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top " aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">CyneRgy</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.1.7</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../index.html">Home</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-getting-started" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Getting Started</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-getting-started">
<li><a class="dropdown-item" href="../articles/Overview.html">Overview</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>Integration Specific Points</h6></li>
    <li><a class="dropdown-item" href="../articles/IntegrationPointInitialization.html">Initialization</a></li>
    <li><a class="dropdown-item" href="../articles/IntegrationPointAnalysis.html">Analysis (Test Statistic)</a></li>
    <li><a class="dropdown-item" href="../articles/IntegrationPointEnrollment.html">Enrollment (Arrival Times)</a></li>
    <li><a class="dropdown-item" href="../articles/IntegrationPointRandomization.html">Randomization</a></li>
    <li><a class="dropdown-item" href="../articles/IntegrationPointResponse.html">Response (Patient Simulation)</a></li>
    <li><a class="dropdown-item" href="../articles/IntegrationPointDropout.html">Dropout</a></li>
    <li><a class="dropdown-item" href="../articles/IntegrationPointTreatmentSelection.html">Treatment Selection</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="../articles/ExampleOutline.html">Examples</a></li>
<li class="nav-item"><a class="nav-link" href="../reference/index.html">References</a></li>
<li class="nav-item"><a class="nav-link" href="../articles/ContributingToCyneRgy.html">Contribute</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/Cytel-Inc/CyneRgy"><span class="fa fa-github fa-lg"></span></a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-lightswitch" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true" aria-label="Light switch"><span class="fa fa-sun"></span></button>
  <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="dropdown-lightswitch">
<li><button class="dropdown-item" data-bs-theme-value="light"><span class="fa fa-sun"></span> Light</button></li>
    <li><button class="dropdown-item" data-bs-theme-value="dark"><span class="fa fa-moon"></span> Dark</button></li>
    <li><button class="dropdown-item" data-bs-theme-value="auto"><span class="fa fa-adjust"></span> Auto</button></li>
  </ul>
</li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Multiple Endpoints With Covariates and Stratified Randomisation</h1>
                        <h4 data-toc-skip class="author">Julija
Saltane</h4>
            
            <h4 data-toc-skip class="date">October 16, 2025</h4>
      

      <div class="d-none name"><code>MultipleEndpointsWithCovariates.Rmd</code></div>
    </div>

    
    
<div class="alert alert-primary" role="alert">
<p style="margin-bottom:0">
The following scripts are related to both the
<a href="IntegrationPointResponse.html" class="alert-link"><strong>Integration
Point: Response</strong></a> and the
<a href="IntegrationPointAnalysis.html" class="alert-link"><strong>Integration
Point: Analysis</strong></a>. Click on the links for more information
about these integration points.
</p>
</div>
<div class="section level2">
<h2 id="introduction">Introduction<a class="anchor" aria-label="anchor" href="#introduction"></a>
</h2>
<p>The following examples illustrate how to incorporate new patient
outcome simulation (<em>response</em>) and analysis (<em>design</em>)
capabilities into East Horizon using R functions in the context of a
two-arm trial. Each example features a trial design consisting of a
standard-of-care control arm and an experimental treatment arm, with
three independent patient outcomes modeled as continuous data.</p>
<p>Two of the examples include two binary covariates, and one of these
also applies stratified randomization based on the covariates. All
designs include a single final analysis. In the example without
covariates, the response data is analyzed using a t-test. In contrast,
the other two examples employ Analysis of covariance (ANCOVA) to account
for covariate effects.</p>
<p>Once CyneRgy is installed, you can load this example in RStudio with
the following command:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">CyneRgy</span><span class="fu">::</span><span class="fu"><a href="../reference/RunExample.html">RunExample</a></span><span class="op">(</span> <span class="st">"MultipleEndpointsWithCovariates"</span> <span class="op">)</span></span></code></pre></div>
<p>This will open the corresponding RStudio project.</p>
<p><strong>RStudio Project File</strong>: <a href="https://github.com/Cytel-Inc/CyneRgy/blob/main/inst/Examples/MultipleEndpointsWithCovariates/MultipleEndpointsWithCovariates.Rproj" class="external-link">MultipleEndpointsWithCovariates.Rproj</a></p>
<p>In the <a href="https://github.com/Cytel-Inc/CyneRgy/tree/main/inst/Examples/MultipleEndpointsWithCovariates/R" class="external-link">R
directory of this example</a>, you will find the following R files:</p>
<ol style="list-style-type: decimal">
<li><p><a href="https://github.com/Cytel-Inc/CyneRgy/blob/main/inst/Examples/MultipleEndpointsWithCovariates/R/SimulateMultipleOutcomes.R" class="external-link">SimulateMultipleOutcomes.R</a>
- Provides an example R function to simulate three independent normally
distributed outcomes for a given number of subject. Note that this
example can be extended to any number of endpoints.</p></li>
<li><p><a href="https://github.com/Cytel-Inc/CyneRgy/blob/main/inst/Examples/MultipleEndpointsWithCovariates/R/SimulateMultipleOutcomesCovariates.R" class="external-link">SimulateMultipleOutcomesCovariates.R</a>
- This R function simulates three independent normally distributed
outcomes with two binary covariates. This function is extensible to any
number of endpoints and covariates.</p></li>
<li><p><a href="https://github.com/Cytel-Inc/CyneRgy/blob/main/inst/Examples/MultipleEndpointsWithCovariates/R/SimulateMultipleOutcomesCovariatesStratRandomization.R" class="external-link">SimulateMultipleOutcomesCovariatesStratRandomization.R</a>
- Similar to the previous function, this version explicitly incorporates
stratified randomization based on two binary covariates.</p></li>
<li><p><a href="https://github.com/Cytel-Inc/CyneRgy/blob/main/inst/Examples/MultipleEndpointsWithCovariates/R/AnalyzeMultipleOutcomes.R" class="external-link">AnalyzeMultipleOutcomes.R</a>
- This files provides an example R function to perform endpoint-wise
one-sided t-tests on simulated patient data with three normally
distributed outcomes.</p></li>
<li><p><a href="https://github.com/Cytel-Inc/CyneRgy/blob/main/inst/Examples/MultipleEndpointsWithCovariates/R/AnalyzeMultipleOutcomesCovariates.R" class="external-link">AnalyzeMultipleOutcomesCovariates.R</a>
- This files provides and example R function to perform statistical
analysis on simulated patient-level data with three continuous endpoints
and binary covariates. For each endpoint, an ANCOVA model is fitted to
assess the treatment effect while adjusting for covariates.</p></li>
<li><p><a href="https://github.com/Cytel-Inc/CyneRgy/blob/main/inst/Examples/MultipleEndpointsWithCovariates/R/SimulateMultipleOutcomesCovariatesStratRandomization.R" class="external-link">AnalyzeMultipleOutcomesCovariatesStratRandomization.R</a>
- Extends the previous analysis to include stratified randomization.
Each endpoint is analyzed using ANCOVA, adjusting for
covariates.</p></li>
</ol>
<div class="section level3">
<h3 id="example-1---simulate-and-analyze-multiple-endpoint-data">Example 1 - Simulate and Analyze Multiple Endpoint Data<a class="anchor" aria-label="anchor" href="#example-1---simulate-and-analyze-multiple-endpoint-data"></a>
</h3>
<div class="alert alert-primary" role="alert">
<p style="margin-bottom:0">
This endpoint is related to the following R files:
<a href="https://github.com/Cytel-Inc/CyneRgy/blob/main/inst/Examples/MultipleEndpointsWithCovariates/R/SimulateMultipleOutcomes.R" class="external-link alert-link">SimulateMultipleOutcomes.R</a>
and
<a href="https://github.com/Cytel-Inc/CyneRgy/blob/main/inst/Examples/MultipleEndpointsWithCovariates/R/AnalyzeMultipleOutcomes.R" class="external-link alert-link">AnalyzeMultipleOutcomes.R</a>.
</p>
</div>
<p>In this example, patient outcomes are modeled as independent,
continuous variables generated from a normal distribution. Each outcome
has a treatment-specific mean, while the standard deviation is assumed
to be the same across all outcomes.</p>
<p>The table below defines the user-specified parameters used to
simulate patient data:</p>
<table class="table">
<colgroup>
<col width="40%">
<col width="60%">
</colgroup>
<thead><tr class="header">
<th><strong>User parameter</strong></th>
<th><strong>Definition</strong></th>
</tr></thead>
<tbody>
<tr class="odd">
<td><strong>MeanOutcome<code>X</code>Ctrl</strong></td>
<td>Mean of outcome X for the control arm, where X = 1, 2 or 3.</td>
</tr>
<tr class="even">
<td><strong>MeanOutcome<code>X</code>Trt</strong></td>
<td>Mean of outcome X for the experimental arm, where X = 1, 2 or
3.</td>
</tr>
</tbody>
</table>
<p>The simulated data is analyzed using a one-sided t-test to compare
the treatment and control groups, assuming equal variances. No
additional user-defined parameters are required for the analysis in this
example.</p>
<p>The figure below illustrates where this example fits within the R
integration points of East Horizon, along with a flowchart outlining the
key steps performed by the R code.</p>
<p><img src="MultipleEndpointsWithCovariates_files/figure-html/unnamed-chunk-4-1.png" width="700"></p>
</div>
<div class="section level3">
<h3 id="example-2---simulate-and-analyze-multiple-endpoint-data-with-two-binary-covariates">Example 2 - Simulate and Analyze Multiple Endpoint Data with Two
Binary Covariates<a class="anchor" aria-label="anchor" href="#example-2---simulate-and-analyze-multiple-endpoint-data-with-two-binary-covariates"></a>
</h3>
<div class="alert alert-primary" role="alert">
<p style="margin-bottom:0">
This endpoint is related to the following R files:
<a href="https://github.com/Cytel-Inc/CyneRgy/blob/main/inst/Examples/MultipleEndpointsWithCovariates/R/SimulateMultipleOutcomesCovariates.R" class="external-link alert-link">SimulateMultipleOutcomesCovariates.R</a>
and
<a href="https://github.com/Cytel-Inc/CyneRgy/blob/main/inst/Examples/MultipleEndpointsWithCovariates/R/AnalyzeMultipleOutcomesCovariates.R" class="external-link alert-link">AnalyzeMultipleOutcomesCovariates.R</a>.
</p>
</div>
<p>Just like in Example 1, patient outcomes are modeled as independent,
continuous variables generated from a normal distribution. Additionally,
two binary covariates are included, each with user-specified
probabilities and effect sizes.</p>
<p>The table below outlines the user-specified parameters used to
simulate patient data:</p>
<table class="table">
<colgroup>
<col width="40%">
<col width="60%">
</colgroup>
<thead><tr class="header">
<th><strong>User parameter</strong></th>
<th><strong>Definition</strong></th>
</tr></thead>
<tbody>
<tr class="odd">
<td><strong>MeanOutcome<code>X</code>Ctrl</strong></td>
<td>Mean of outcome X for the control arm, where X = 1, 2 or 3.</td>
</tr>
<tr class="even">
<td><strong>MeanOutcome<code>X</code>Trt</strong></td>
<td>Mean of outcome X for the experimental arm, where X = 1, 2 or
3.</td>
</tr>
<tr class="odd">
<td><strong>Beta<code>Y</code></strong></td>
<td>Effect size of binary covariate Y, where Y = 1 or 2.</td>
</tr>
<tr class="even">
<td><strong>Cov<code>Y</code>Prob</strong></td>
<td>Probability that covariate Y takes value 1, where Y = 1 or 2.</td>
</tr>
</tbody>
</table>
<p>The simulated data is analyzed ANCOVA model to estimate the treatment
effect while adjusting for covariates. No additional user-defined
parameters are required for the analysis in this example.</p>
<p>The figure below shows how this example integrates with the R
components of East Horizon, along with a flowchart summarizing the key
steps executed by the R code.</p>
<p><img src="MultipleEndpointsWithCovariates_files/figure-html/unnamed-chunk-5-1.png" width="700"></p>
</div>
<div class="section level3">
<h3 id="example-3---simulate-and-analyze-multiple-endpoint-data-with-two-binary-covariates-and-stratified-randomization">Example 3 - Simulate and Analyze Multiple Endpoint Data with Two
Binary Covariates and Stratified Randomization<a class="anchor" aria-label="anchor" href="#example-3---simulate-and-analyze-multiple-endpoint-data-with-two-binary-covariates-and-stratified-randomization"></a>
</h3>
<div class="alert alert-primary" role="alert">
<p style="margin-bottom:0">
This endpoint is related to the following R files:
<a href="https://github.com/Cytel-Inc/CyneRgy/blob/main/inst/Examples/MultipleEndpointsWithCovariates/R/SimulateMultipleOutcomesCovariatesStratRandomization.R" class="external-link alert-link">SimulateMultipleOutcomesCovariatesStratRandomization.R</a>
and
<a href="https://github.com/Cytel-Inc/CyneRgy/blob/main/inst/Examples/MultipleEndpointsWithCovariates/R/AnalyzeMultipleOutcomesCovariatesStratRandomization.R" class="external-link alert-link">AnalyzeMultipleOutcomesCovariatesStratRandomization.R</a>.
</p>
</div>
<p>Example 3 introduces stratified randomization, replacing East
Horizon’s native patient allocation feature. As in Examples 1 and 2,
patient outcomes are modeled as independent, continuous variables from a
normal distribution. Two binary covariates are again included, with
their probabilities and effect sizes specified as in Example 2.
Stratified randomization is performed based on these covariates.</p>
<p>The table below defines the user-specified parameters used to
simulate patient data:</p>
<table class="table">
<colgroup>
<col width="40%">
<col width="60%">
</colgroup>
<thead><tr class="header">
<th><strong>User parameter</strong></th>
<th><strong>Definition</strong></th>
</tr></thead>
<tbody>
<tr class="odd">
<td><strong>MeanOutcome<code>X</code>Ctrl</strong></td>
<td>Mean of outcome X for the control arm, where X = 1, 2 or 3.</td>
</tr>
<tr class="even">
<td><strong>MeanOutcome<code>X</code>Trt</strong></td>
<td>Mean of outcome X for the experimental arm, where X = 1, 2 or
3.</td>
</tr>
<tr class="odd">
<td><strong>Beta<code>Y</code></strong></td>
<td>Effect size of binary covariate Y, where Y = 1 or 2.</td>
</tr>
<tr class="even">
<td><strong>Cov<code>Y</code>Prob</strong></td>
<td>Probability that covariate Y takes the value 1, where Y = 1 or
2.</td>
</tr>
<tr class="odd">
<td><strong>AllocRatio</strong></td>
<td>Ratio of treatment to control allocation.</td>
</tr>
</tbody>
</table>
<p>As before, the simulated data is analyzed using an ANCOVA model to
assess the treatment effect while adjusting for covariates. In this
example, the treatment assignments generated during the response
simulation are directly used in the analysis. No additional user-defined
parameters are needed for the analysis.</p>
<p>The figure below illustrates how this example fits into the R
integration points of East Horizon, accompanied by a flowchart detailing
the main steps performed by the R code.</p>
<p><img src="MultipleEndpointsWithCovariates_files/figure-html/unnamed-chunk-6-1.png" width="700"></p>
</div>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by J. Kyle Wathen, Valeria A. G. Mazzanti, Gabriel Potvin.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer>
</div>





  </body>
</html>

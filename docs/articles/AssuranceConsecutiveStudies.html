<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Bayesian Assurance of Consecutive Studies • CyneRgy</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<script src="../lightswitch.js"></script><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/Source_Sans_3-0.4.9/font.css" rel="stylesheet">
<link href="../deps/Source_Code_Pro-0.4.9/font.css" rel="stylesheet">
<link href="../deps/font-awesome-6.4.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Bayesian Assurance of Consecutive Studies">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.11/dist/katex.min.css" integrity="sha384-nB0miv6/jRmo5UMMR1wu3Gz6NLsoTkbqJghGIsx//Rlm+ZU03BU6SQNC66uf4l5+" crossorigin="anonymous">
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.11/dist/katex.min.js" integrity="sha384-7zkQWkzuo3B5mTepMUcHkMB5jZaolc2xDwL6VFqjFALcbeS9Ggm/Yr2r3Dy4lfFg" crossorigin="anonymous"></script><script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.11/dist/contrib/auto-render.min.js" integrity="sha384-43gviWU0YVjaDtb/GhzOouOXtZMP/7XUzwPTstBeZFe/+rCMvRwr4yROQP43s0Xk" crossorigin="anonymous" onload="renderMathInElement(document.body);"></script>
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top " aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">CyneRgy</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.1.4</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../index.html">Home</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-getting-started" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Getting Started</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-getting-started">
<li><a class="dropdown-item" href="../articles/Overview.html">Overview</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>Integration Specific Points</h6></li>
    <li><a class="dropdown-item" href="../articles/IntegrationPointInitialization.html">Initialization</a></li>
    <li><a class="dropdown-item" href="../articles/IntegrationPointAnalysis.html">Analysis (Test Statistic)</a></li>
    <li><a class="dropdown-item" href="../articles/IntegrationPointEnrollment.html">Enrollment (Arrival Times)</a></li>
    <li><a class="dropdown-item" href="../articles/IntegrationPointRandomization.html">Randomization (Assignment of Subjects)</a></li>
    <li><a class="dropdown-item" href="../articles/IntegrationPointResponse.html">Response (Patient Simulation)</a></li>
    <li><a class="dropdown-item" href="../articles/IntegrationPointDropout.html">Dropout</a></li>
    <li><a class="dropdown-item" href="../articles/IntegrationPointTreatmentSelection.html">Treatment Selection</a></li>
  </ul>
</li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-examples" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Examples</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-examples">
<li><a class="dropdown-item" href="../articles/ExampleOutline.html">Examples Outline</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>Patient Simulation</h6></li>
    <li><a class="dropdown-item" href="../articles/2ArmNormalOutcomePatientSimulationDescription.html">2-Arm, Normal Outcome</a></li>
    <li><a class="dropdown-item" href="../articles/2ArmTimeToEventOutcomePatientSimulationDescription.html">2-Arm, Time-to-Event Outcome</a></li>
    <li><a class="dropdown-item" href="../articles/2ArmBinaryOutcomePatientSimulation.html">2-Arm, Binary Outcome</a></li>
    <li><a class="dropdown-item" href="../articles/2ArmNormalRepeatedMeasuresResponseGeneration.html">2-Arm, Repeated Measure</a></li>
    <li><a class="dropdown-item" href="../articles/ChildhoodAnxiety.html">Childhood Anxiety Trial</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>Analysis</h6></li>
    <li><a class="dropdown-item" href="../articles/2ArmNormalOutcomeAnalysisDescription.html">2-Arm, Normal Outcome</a></li>
    <li><a class="dropdown-item" href="../articles/2ArmTimeToEventOutcomeAnalysisDescription.html">2-Arm, Time-To-Event Outcome</a></li>
    <li><a class="dropdown-item" href="../articles/2ArmBinaryOutcomeAnalysisDescription.html">2-Arm, Binary Outcome</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>Treatment Selection</h6></li>
    <li><a class="dropdown-item" href="../articles/TreatmentSelectionDescription.html">Binary Outcome</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>Advanced Examples</h6></li>
    <li><a class="dropdown-item" href="../articles/AssuranceConsecutiveStudies.html">Bayesian Assurance of Consecutive Studies</a></li>
    <li><a class="dropdown-item" href="../articles/ProbabilitySuccessDualEndpointsPFSOS.html">Probability of Success for Dual Endpoints (PFS &amp; OS)</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>Other Integration Points</h6></li>
    <li><a class="dropdown-item" href="../articles/GeneratePoissonArrival.html">Poisson Arrival Times</a></li>
    <li><a class="dropdown-item" href="../articles/PatientDropout.html">Patient Dropout</a></li>
    <li><a class="dropdown-item" href="../articles/PatientRandomization.html">Patient Randomization</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="../reference/index.html">References</a></li>
<li class="nav-item"><a class="nav-link" href="../articles/ContibutingToCyneRgy.html">Contribute</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/Cytel-Inc/CyneRgy"><span class="fa fa-github fa-lg"></span></a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-lightswitch" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true" aria-label="Light switch"><span class="fa fa-sun"></span></button>
  <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="dropdown-lightswitch">
<li><button class="dropdown-item" data-bs-theme-value="light"><span class="fa fa-sun"></span> Light</button></li>
    <li><button class="dropdown-item" data-bs-theme-value="dark"><span class="fa fa-moon"></span> Dark</button></li>
    <li><button class="dropdown-item" data-bs-theme-value="auto"><span class="fa fa-adjust"></span> Auto</button></li>
  </ul>
</li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Bayesian Assurance of Consecutive Studies</h1>
                        <h4 data-toc-skip class="author">J. Kyle Wathen
and Laurent Spiess</h4>
            
            <h4 data-toc-skip class="date">June 04, 2025</h4>
      

      <div class="d-none name"><code>AssuranceConsecutiveStudies.Rmd</code></div>
    </div>

    
    
<div class="alert alert-primary" role="alert">
<p style="margin-bottom:0">
The following scripts are related to the
<a href="IntegrationPointAnalysis.html" class="alert-link"><strong>Integration
Point: Analysis</strong></a>, the
<a href="IntegrationPointResponse.html" class="alert-link"><strong>Integration
Point: Response</strong></a>, and the
<a href="IntegrationPointInitialization.html" class="alert-link"><strong>Integration
Point: Initialization</strong></a>. Click on the links for more
information about these integration points.
</p>
</div>
<div class="section level2">
<h2 id="introduction">Introduction<a class="anchor" aria-label="anchor" href="#introduction"></a>
</h2>
<p>The intent of the following examples is to demonstrate the
computation of Bayesian assurance, or probability of success, through
the integration of R with Cytel products. The first example features a
two-arm, fixed-sample trial with normally distributed outcomes, using a
non-standard prior to compute assurance. Subsequent examples advance to
more complex scenarios, including computing assurance for a sequential
design involving a phase 2 trial with normal outcomes followed by a
phase 3 trial with time-to-event outcomes.</p>
<p>All examples involve two treatments: Standard of Care (S) and
Experimental (E). The scenarios covered are as follows:</p>
<ol style="list-style-type: decimal">
<li>Fixed sample design using a mixture of normal distributions to
compute Bayesian assurance.</li>
<li>Group sequential design, expanding on Example 1, with an interim
analysis for futility based on Bayesian predictive probability.</li>
<li>Fixed design with a time-to-event outcome, serving as both a
standalone example and a reference for the later phase 2/phase 3
scenario.</li>
<li>Two consecutive studies: phase 2 with a normal endpoint followed by
phase 3, also with a normal endpoint.</li>
<li>Two consecutive studies: phase 2 with a normal endpoint followed by
phase 3 with a time-to-event outcome.</li>
</ol>
<p>Once CyneRgy is installed, you can load this example in RStudio with
the following commands:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">CyneRgy</span><span class="fu">::</span><span class="fu"><a href="../reference/RunExample.html">RunExample</a></span><span class="op">(</span> <span class="st">"AssuranceConsecutiveStudies"</span> <span class="op">)</span></span></code></pre></div>
<p>Running the command above will load the RStudio project in
RStudio.</p>
<p><strong>East Workbook</strong>: <a href="https://github.com/Cytel-Inc/CyneRgy/blob/main/inst/Examples/AssuranceConsecutiveStudies/Assurance.cywx" class="external-link">AssuranceConsecutiveStudies.cywx</a></p>
<p><strong>RStudio Project File</strong>: <a href="https://github.com/Cytel-Inc/CyneRgy/blob/main/inst/Examples/AssuranceConsecutiveStudies/Assurance.Rproj" class="external-link">AssuranceConsecutiveStudies.Rproj</a></p>
<p>In the <a href="https://github.com/Cytel-Inc/CyneRgy/tree/main/inst/Examples/AssuranceConsecutiveStudies/R" class="external-link">R
directory of this example</a> you will find the R files used in the
examples.</p>
</div>
<div class="section level2">
<h2 id="example-1---fixed-sample-design-with-a-mixture-of-normal-distributions">Example 1 - Fixed Sample Design with a Mixture of Normal
Distributions<a class="anchor" aria-label="anchor" href="#example-1---fixed-sample-design-with-a-mixture-of-normal-distributions"></a>
</h2>
<p>This example considers a two-arm fixed sample design with normally
distributed outcomes
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>Y</mi><annotation encoding="application/x-tex">Y</annotation></semantics></math>,
with 80 patients per treatment arm. It demonstrates how to customize the
<strong>Response (Patient Simulation)</strong> element of East Horizon’s
simulation to simulate a mixture of normal distributions, and the
<strong>Analysis</strong> element of East Horizon’s simulation to
compute the probability of success.</p>
<p>By integrating an R function into the Analysis integration point,
users can evaluate the frequentist operating characteristics of the
Bayesian design in East Horizon. Additionally, by modifying the Response
integration point, the simulation will incorporate Bayesian assurance.
Specifically, an R function first samples from the assurance prior, then
generates the patient data. The resulting power from this simulation
reflects the Bayesian assurance, assuming the two-component prior.</p>
<p>Often, it is important to examine the posterior distributions of both
the observed and true treatment differences following a Go decision.
These posterior distributions provide valuable insights for planning
subsequent study phases and assessing potential risks. The process of
obtaining these posterior distributions is detailed in the next example,
and their application to Phase 2 and Phase 3 studies is explored in
later sections.</p>
<p>The figure below illustrates where this example fits within the R
integration points of Cytel products, accompanied by flowcharts
outlining the general steps performed by the R code.</p>
<p><img src="AssuranceConsecutiveStudies_files/figure-html/unnamed-chunk-4-1.png" width="700"></p>
<div class="section level3">
<h3 id="response-patient-simulation-integration-point">Response (Patient Simulation) Integration Point<a class="anchor" aria-label="anchor" href="#response-patient-simulation-integration-point"></a>
</h3>
<div class="alert alert-primary" role="alert">
<p style="margin-bottom:0">
This endpoint is related to this R file:
<a href="https://github.com/Cytel-Inc/CyneRgy/blob/main/inst/Examples/AssuranceConsecutiveStudies/R/SimulatePatientOutcomeNormalAssurance.R" class="external-link alert-link">SimulatePatientOutcomeNormalAssurance.R</a>
</p>
</div>
<p>This function simulates patient-level outcomes within a Bayesian
assurance framework, using a two-component mixture prior to reflect
uncertainty about the true treatment effect. It allows for assessing the
probability of trial success (assurance) under uncertainty about the
true treatment effect. Information generated from this simulation will
be used later for the <a href="#analysis-integration-point">Analysis
Integration Point</a>.</p>
<p>In this example, the true treatment effect
(<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>μ</mi><mi>E</mi></msub><mo>−</mo><msub><mi>μ</mi><mi>S</mi></msub></mrow><annotation encoding="application/x-tex">\mu_E - \mu_S</annotation></semantics></math>)
is sampled from a mixture of two normal priors:</p>
<ul>
<li>25% weight on
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>𝒩</mi><mrow><mo stretchy="true" form="prefix">(</mo><mn>0</mn><mo>,</mo><msup><mn>0.05</mn><mn>2</mn></msup><mo stretchy="true" form="postfix">)</mo></mrow></mrow><annotation encoding="application/x-tex">\mathcal{N}(0, 0.05^2)</annotation></semantics></math>.</li>
<li>75% weight on
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>𝒩</mi><mrow><mo stretchy="true" form="prefix">(</mo><mn>0.7</mn><mo>,</mo><msup><mn>0.3</mn><mn>2</mn></msup><mo stretchy="true" form="postfix">)</mo></mrow></mrow><annotation encoding="application/x-tex">\mathcal{N}(0.7, 0.3^2)</annotation></semantics></math>.</li>
</ul>
<p>The control mean is fixed, while the experimental mean is computed as
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>d</mi><mtext mathvariant="normal">MeanCtrl</mtext><mo>+</mo><mtext mathvariant="normal">treatment effect</mtext></mrow><annotation encoding="application/x-tex">d\text{MeanCtrl} + \text{treatment effect}</annotation></semantics></math>.
Each patient’s response is then simulated from a normal distribution
corresponding to their assigned treatment group, with standard
deviations defined separately for each arm.</p>
<p><img src="AssuranceConsecutiveStudies_files/figure-html/unnamed-chunk-5-1.png" width="700"></p>
<p>Refer to the table below for the definitions and values of the
user-defined parameters used in this example.</p>
<table class="table">
<colgroup>
<col width="20%">
<col width="60%">
<col width="20%">
</colgroup>
<thead><tr class="header">
<th><strong>User parameter</strong></th>
<th><strong>Definition</strong></th>
<th><strong>Value</strong></th>
</tr></thead>
<tbody>
<tr class="odd">
<td><strong>dWeight1</strong></td>
<td>Weight of prior component 1.</td>
<td>0.25</td>
</tr>
<tr class="even">
<td><strong>dWeight2</strong></td>
<td>Weight of prior component 2.</td>
<td>0.75</td>
</tr>
<tr class="odd">
<td><strong>dMean1</strong></td>
<td>Mean of prior component 1.</td>
<td>0</td>
</tr>
<tr class="even">
<td><strong>dMean2</strong></td>
<td>Mean of prior component 2.</td>
<td>0.7</td>
</tr>
<tr class="odd">
<td><strong>dSD1</strong></td>
<td>Standard deviation of prior component 1.</td>
<td>0.05</td>
</tr>
<tr class="even">
<td><strong>dSD2</strong></td>
<td>Standard deviation of prior component 2.</td>
<td>0.3</td>
</tr>
<tr class="odd">
<td><strong>dMeanCtrl</strong></td>
<td>Mean of control arm (experimental arm will be sampled).</td>
<td>0</td>
</tr>
<tr class="even">
<td><strong>dSDCtrl</strong></td>
<td>Standard deviation for control arm.</td>
<td>1.9</td>
</tr>
<tr class="odd">
<td><strong>dSDExp</strong></td>
<td>Standard deviation for experimental arm.</td>
<td>1.9</td>
</tr>
</tbody>
</table>
</div>
<div class="section level3">
<h3 id="analysis-integration-point">Analysis Integration Point<a class="anchor" aria-label="anchor" href="#analysis-integration-point"></a>
</h3>
<div class="alert alert-primary" role="alert">
<p style="margin-bottom:0">
This endpoint is related to this R file:
<a href="https://github.com/Cytel-Inc/CyneRgy/blob/main/inst/Examples/AssuranceConsecutiveStudies/R/AnalyzeUsingBayesianNormals.R" class="external-link alert-link">AnalyzeUsingBayesianNormals.R</a>
</p>
</div>
<p>This function evaluates the posterior probability that the
experimental treatment arm is better than the control arm by more than a
clinically meaningful threshold, and returns a Go/No-Go decision based
on a cutoff
(<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><msub><mi>P</mi><mi>U</mi></msub><annotation encoding="application/x-tex">P_U</annotation></semantics></math>).
It uses information from the simulation that is generated by the <a href="#response-patient-simulation-integration-point">Response</a>
element of East Horizon’s simulation, explained above.</p>
<p>For patients receiving treatment
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>j</mi><mo>∈</mo><mo stretchy="false" form="prefix">{</mo><mtext mathvariant="normal">S</mtext><mo>,</mo><mtext mathvariant="normal">E</mtext><mo stretchy="false" form="postfix">}</mo></mrow><annotation encoding="application/x-tex">j \in \{\text{S}, \text{E}\}</annotation></semantics></math>
(S = standard/control, E = experimental), we assume the outcomes
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>Y</mi><mo>∼</mo><mi>𝒩</mi><mrow><mo stretchy="true" form="prefix">(</mo><msub><mi>μ</mi><mi>j</mi></msub><mo>,</mo><msup><mi>σ</mi><mn>2</mn></msup><mo stretchy="true" form="postfix">)</mo></mrow></mrow><annotation encoding="application/x-tex">Y \sim \mathcal{N}(\mu_j, \sigma^2)</annotation></semantics></math>,
where
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><msub><mi>μ</mi><mi>j</mi></msub><annotation encoding="application/x-tex">\mu_j</annotation></semantics></math>
is an unknown mean and
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><msup><mi>σ</mi><mn>2</mn></msup><annotation encoding="application/x-tex">\sigma^2</annotation></semantics></math>
is a known, fixed variance.</p>
<p>We assume <em>a priori</em> that:</p>
<p><math display="block" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>μ</mi><mi>j</mi></msub><mo>∼</mo><mi>𝒩</mi><mrow><mo stretchy="true" form="prefix">(</mo><msub><mi>θ</mi><mi>j</mi></msub><mo>,</mo><msubsup><mi>τ</mi><mi>j</mi><mn>2</mn></msubsup><mo>=</mo><msup><mn>1000</mn><mn>2</mn></msup><mo stretchy="true" form="postfix">)</mo></mrow><mo>,</mo><mspace width="1.0em"></mspace><mi>j</mi><mo>∈</mo><mo stretchy="false" form="prefix">{</mo><mtext mathvariant="normal">S</mtext><mo>,</mo><mtext mathvariant="normal">E</mtext><mo stretchy="false" form="postfix">}</mo></mrow><annotation encoding="application/x-tex">
\mu_j \sim \mathcal{N}(\theta_j, \tau_j^2 = 1000^2), \quad j \in \{\text{S}, \text{E}\}
</annotation></semantics></math></p>
<p>After observing
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>n</mi><annotation encoding="application/x-tex">n</annotation></semantics></math>
patients on treatment
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>j</mi><annotation encoding="application/x-tex">j</annotation></semantics></math>,
the posterior distribution of
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><msub><mi>μ</mi><mi>j</mi></msub><annotation encoding="application/x-tex">\mu_j</annotation></semantics></math>
becomes:</p>
<p><math display="block" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>μ</mi><mi>j</mi></msub><mo>∣</mo><mover><mi>y</mi><mo accent="true">‾</mo></mover><mo>∼</mo><mi>𝒩</mi><mrow><mo stretchy="true" form="prefix">(</mo><msubsup><mi>θ</mi><mi>j</mi><mo>*</mo></msubsup><mo>,</mo><msubsup><mi>τ</mi><mi>j</mi><mrow><mn>2</mn><mo>*</mo></mrow></msubsup><mo stretchy="true" form="postfix">)</mo></mrow></mrow><annotation encoding="application/x-tex">
\mu_j \mid \bar{y} \sim \mathcal{N}(\theta_j^*, \tau_j^{2*})
</annotation></semantics></math> where:</p>
<p><math display="block" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msubsup><mi>θ</mi><mi>j</mi><mo>*</mo></msubsup><mo>=</mo><mfrac><mrow><mfrac><msub><mi>θ</mi><mi>j</mi></msub><msubsup><mi>τ</mi><mi>j</mi><mn>2</mn></msubsup></mfrac><mo>+</mo><mfrac><mrow><mi>n</mi><mover><mi>y</mi><mo accent="true">‾</mo></mover></mrow><msup><mi>σ</mi><mn>2</mn></msup></mfrac></mrow><mrow><mfrac><mn>1</mn><msubsup><mi>τ</mi><mi>j</mi><mn>2</mn></msubsup></mfrac><mo>+</mo><mfrac><mi>n</mi><msup><mi>σ</mi><mn>2</mn></msup></mfrac></mrow></mfrac><mo>,</mo><mspace width="1.0em"></mspace><mtext mathvariant="normal">and</mtext><mspace width="1.0em"></mspace><mfrac><mn>1</mn><msubsup><mi>τ</mi><mi>j</mi><mrow><mn>2</mn><mo>*</mo></mrow></msubsup></mfrac><mo>=</mo><mfrac><mn>1</mn><msubsup><mi>τ</mi><mi>j</mi><mn>2</mn></msubsup></mfrac><mo>+</mo><mfrac><mi>n</mi><msup><mi>σ</mi><mn>2</mn></msup></mfrac></mrow><annotation encoding="application/x-tex">
\theta_j^* = \frac{\frac{\theta_j}{\tau_j^2} + \frac{n \bar{y}}{\sigma^2}}{\frac{1}{\tau_j^2} + \frac{n}{\sigma^2}}, \quad \text{and} \quad
\frac{1}{\tau_j^{2*}} = \frac{1}{\tau_j^2} + \frac{n}{\sigma^2}
</annotation></semantics></math></p>
<p>At the conclusion of the study, the posterior probability that the
experimental arm exceeds the control arm by more than the minimum
acceptable value (MAV) is calculated as:</p>
<p><math display="block" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>ρ</mi><mo>=</mo><mo>Pr</mo><mrow><mo stretchy="true" form="prefix">(</mo><msub><mi>μ</mi><mi>E</mi></msub><mo>&gt;</mo><msub><mi>μ</mi><mi>S</mi></msub><mo>+</mo><mtext mathvariant="normal">MAV</mtext><mo>∣</mo><mtext mathvariant="normal">data</mtext><mo stretchy="true" form="postfix">)</mo></mrow></mrow><annotation encoding="application/x-tex">
\rho = \Pr(\mu_E &gt; \mu_S + \text{MAV} \mid \text{data})
</annotation></semantics></math></p>
<p>The decision rule is as follows:</p>
<ul>
<li>If
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>ρ</mi><mo>&gt;</mo><msub><mi>P</mi><mi>U</mi></msub><mo>→</mo></mrow><annotation encoding="application/x-tex">\rho &gt; P_U \rightarrow</annotation></semantics></math>
Go.</li>
<li>If
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>ρ</mi><mo>≤</mo><msub><mi>P</mi><mi>U</mi></msub><mo>→</mo></mrow><annotation encoding="application/x-tex">\rho \leq P_U \rightarrow</annotation></semantics></math>
No-Go.</li>
</ul>
<p>Refer to the table below for the definitions and values of the
user-defined parameters used in this example.</p>
<table class="table">
<colgroup>
<col width="27%">
<col width="54%">
<col width="18%">
</colgroup>
<thead><tr class="header">
<th><strong>User parameter</strong></th>
<th><strong>Definition</strong></th>
<th><strong>Value</strong></th>
</tr></thead>
<tbody>
<tr class="odd">
<td><strong>dPriorMeanCtrl</strong></td>
<td>Prior mean for control arm.</td>
<td>0</td>
</tr>
<tr class="even">
<td><strong>dPriorStdDevCtrl</strong></td>
<td>Prior standard deviation for control arm.</td>
<td>1000</td>
</tr>
<tr class="odd">
<td><strong>dPriorMeanExp</strong></td>
<td>Prior mean for experimental arm.</td>
<td>0</td>
</tr>
<tr class="even">
<td><strong>dPriorStdDevExp</strong></td>
<td>Prior standard deviation for experimental arm.</td>
<td>1000</td>
</tr>
<tr class="odd">
<td><strong>dSigma</strong></td>
<td>Known sampling standard deviation.</td>
<td>1.9</td>
</tr>
<tr class="even">
<td><strong>dMAV</strong></td>
<td>Minimum Acceptable Value (clinically meaningful difference).</td>
<td>0.8</td>
</tr>
<tr class="odd">
<td><strong>dPU</strong></td>
<td>Go threshold (posterior probability cutoff).</td>
<td>0.8</td>
</tr>
</tbody>
</table>
</div>
<div class="section level3">
<h3 id="results">Results<a class="anchor" aria-label="anchor" href="#results"></a>
</h3>
<p>The probability of a Go is 15.3% and the probability of a No-Go is
84.7%.</p>
<p><img src="AssuranceConsecutiveStudies_files/figure-html/unnamed-chunk-7-1.png" width="700"></p>
</div>
</div>
<div class="section level2">
<h2 id="example-2---group-sequential-design-with-a-mixture-of-normal-distributions">Example 2 - Group Sequential Design with a Mixture of Normal
Distributions<a class="anchor" aria-label="anchor" href="#example-2---group-sequential-design-with-a-mixture-of-normal-distributions"></a>
</h2>
<p>This example follows the same structure and uses the same code as
Example 1. However, it introduces an interim analysis (IA) for futility
assessment when outcomes are observed for 50% of the enrolled patients.
The futility decision is based on the Bayesian predictive probability of
a No-Go decision at the end of the trial. Specifically, if the
predictive probability suggests that a No-Go is likely at the final
analysis, the trial is stopped early for futility. If not, the trial
continues to the final analysis (FA), which uses the same R code. The in
Analysis element of East Horizon’s simulation is thus customized to
handle this case as explained below.</p>
<p>The figure below illustrates where this example fits within the R
integration points of Cytel products, accompanied by flowcharts
outlining the general steps performed by the R code.</p>
<p><img src="AssuranceConsecutiveStudies_files/figure-html/unnamed-chunk-8-1.png" width="700"></p>
<div class="section level3">
<h3 id="response-patient-simulation-integration-point-1">Response (Patient Simulation) Integration Point<a class="anchor" aria-label="anchor" href="#response-patient-simulation-integration-point-1"></a>
</h3>
<div class="alert alert-primary" role="alert">
<p style="margin-bottom:0">
This endpoint is related to this R file:
<a href="https://github.com/Cytel-Inc/CyneRgy/blob/main/inst/Examples/AssuranceConsecutiveStudies/R/SimulatePatientOutcomeNormalAssurance.R" class="external-link alert-link">SimulatePatientOutcomeNormalAssurance.R</a>
</p>
</div>
<p>The function for the Response Integration Point is the same as in <a href="#response-patient-simulation-integration-point">Example 1</a>.
Refer to the table below for the definitions and values of the
user-defined parameters used in this example.</p>
<table class="table">
<colgroup>
<col width="20%">
<col width="60%">
<col width="20%">
</colgroup>
<thead><tr class="header">
<th><strong>User parameter</strong></th>
<th><strong>Definition</strong></th>
<th><strong>Value</strong></th>
</tr></thead>
<tbody>
<tr class="odd">
<td><strong>dWeight1</strong></td>
<td>Weight of prior component 1.</td>
<td>0.25</td>
</tr>
<tr class="even">
<td><strong>dWeight2</strong></td>
<td>Weight of prior component 2.</td>
<td>0.75</td>
</tr>
<tr class="odd">
<td><strong>dMean1</strong></td>
<td>Mean of prior component 1.</td>
<td>0</td>
</tr>
<tr class="even">
<td><strong>dMean2</strong></td>
<td>Mean of prior component 2.</td>
<td>0.7</td>
</tr>
<tr class="odd">
<td><strong>dSD1</strong></td>
<td>Standard deviation of prior component 1.</td>
<td>0.05</td>
</tr>
<tr class="even">
<td><strong>dSD2</strong></td>
<td>Standard deviation of prior component 2.</td>
<td>0.3</td>
</tr>
<tr class="odd">
<td><strong>dMeanCtrl</strong></td>
<td>Mean of control arm (experimental arm will be sampled).</td>
<td>0</td>
</tr>
<tr class="even">
<td><strong>dSDCtrl</strong></td>
<td>Standard deviation for control arm.</td>
<td>1.9</td>
</tr>
<tr class="odd">
<td><strong>dSDExp</strong></td>
<td>Standard deviation for experimental arm.</td>
<td>1.9</td>
</tr>
</tbody>
</table>
</div>
<div class="section level3">
<h3 id="analysis-integration-point-1">Analysis Integration Point<a class="anchor" aria-label="anchor" href="#analysis-integration-point-1"></a>
</h3>
<div class="alert alert-primary" role="alert">
<p style="margin-bottom:0">
This endpoint is related to this R file:
<a href="https://github.com/Cytel-Inc/CyneRgy/blob/main/inst/Examples/AssuranceConsecutiveStudies/R/AnalyzeUsingBayesianNormals.R" class="external-link alert-link">AnalyzeUsingBayesianNormals.R</a>
</p>
</div>
<p>The function for the Analysis Integration Point is the same as in <a href="#analysis-integration-point">Example 1</a>, with the addition of
the <em>dPUFutility</em> variable to incorporate the interim analysis.
<em>dPUFutility</em> is a user-defined threshold that specifies the
minimum predictive probability of a No-Go decision required to stop the
trial early for futility at the interim analysis.</p>
<p>Let
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><msub><mi>X</mi><mn>1</mn></msub><annotation encoding="application/x-tex">X_1</annotation></semantics></math>
represent the data available at the interim analysis and
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><msub><mi>X</mi><mn>2</mn></msub><annotation encoding="application/x-tex">X_2</annotation></semantics></math>
the data for patients enrolled thereafter. If the predictive probability
of a No-Go decision at the end of the study, given
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><msub><mi>X</mi><mn>1</mn></msub><annotation encoding="application/x-tex">X_1</annotation></semantics></math>,
exceeds a pre-specified threshold
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>P</mi><msub><mi>U</mi><mtext mathvariant="normal">Futility</mtext></msub><mo>=</mo><mn>90</mn><mi>%</mi></mrow><annotation encoding="application/x-tex">PU_{\text{Futility}} = 90\%</annotation></semantics></math>,
the trial is stopped. Formally, the stopping rule is:</p>
<p><math display="block" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>Pr</mo><mrow><mo stretchy="true" form="prefix">(</mo><mtext mathvariant="normal">No-Go at end of study</mtext><mo>∣</mo><msub><mi>X</mi><mn>1</mn></msub><mo stretchy="true" form="postfix">)</mo></mrow><mo>&gt;</mo><mi>P</mi><msub><mi>U</mi><mtext mathvariant="normal">Futility</mtext></msub><mo>=</mo><mn>90</mn><mi>%</mi></mrow><annotation encoding="application/x-tex">\Pr( \text{No-Go at end of study} \mid X_1 ) &gt; PU_{\text{Futility}} = 90\%</annotation></semantics></math></p>
<p>This can be expressed as:</p>
<p><math display="block" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>Pr</mo><mrow><mo stretchy="true" form="prefix">(</mo><mrow><mo stretchy="true" form="prefix">{</mo><mo>Pr</mo><mrow><mo stretchy="true" form="prefix">(</mo><msub><mi>μ</mi><mi>E</mi></msub><mo>&gt;</mo><msub><mi>μ</mi><mi>S</mi></msub><mo>+</mo><mi>M</mi><mi>A</mi><mi>V</mi><mo>∣</mo><msub><mi>X</mi><mn>1</mn></msub><mo>,</mo><msub><mi>X</mi><mn>2</mn></msub><mo stretchy="true" form="postfix">)</mo></mrow><mo>&gt;</mo><mi>P</mi><mi>U</mi><mo stretchy="true" form="postfix">}</mo></mrow><mo minsize="1.8" maxsize="1.8" stretchy="false" form="prefix">|</mo><msub><mi>X</mi><mn>1</mn></msub><mo stretchy="true" form="postfix">)</mo></mrow><mo>&gt;</mo><mi>P</mi><msub><mi>U</mi><mtext mathvariant="normal">Futility</mtext></msub></mrow><annotation encoding="application/x-tex">\Pr\left( \left\{ \Pr( \mu_E &gt; \mu_S + MAV \mid X_1, X_2 ) &gt; PU \right\} \Big| X_1 \right) &gt; PU_{\text{Futility}}</annotation></semantics></math></p>
<p>Refer to the table below for the definitions and values of the
user-defined parameters used in this example.</p>
<table class="table">
<colgroup>
<col width="27%">
<col width="54%">
<col width="18%">
</colgroup>
<thead><tr class="header">
<th><strong>User parameter</strong></th>
<th><strong>Definition</strong></th>
<th><strong>Value</strong></th>
</tr></thead>
<tbody>
<tr class="odd">
<td><strong>dPriorMeanCtrl</strong></td>
<td>Prior mean for control arm.</td>
<td>0</td>
</tr>
<tr class="even">
<td><strong>dPriorStdDevCtrl</strong></td>
<td>Prior standard deviation for control arm.</td>
<td>1000</td>
</tr>
<tr class="odd">
<td><strong>dPriorMeanExp</strong></td>
<td>Prior mean for experimental arm.</td>
<td>0</td>
</tr>
<tr class="even">
<td><strong>dPriorStdDevExp</strong></td>
<td>Prior standard deviation for experimental arm.</td>
<td>1000</td>
</tr>
<tr class="odd">
<td><strong>dSigma</strong></td>
<td>Known sampling standard deviation.</td>
<td>1.9</td>
</tr>
<tr class="even">
<td><strong>dMAV</strong></td>
<td>Minimum Acceptable Value (clinically meaningful difference).</td>
<td>0.8</td>
</tr>
<tr class="odd">
<td><strong>dPU</strong></td>
<td>Go threshold (posterior probability cutoff).</td>
<td>0.8</td>
</tr>
<tr class="even">
<td><strong>dPUFutility</strong></td>
<td>Threshold to stop the trial early for futility.</td>
<td>0.9</td>
</tr>
</tbody>
</table>
</div>
<div class="section level3">
<h3 id="results-1">Results<a class="anchor" aria-label="anchor" href="#results-1"></a>
</h3>
<p>The results of the design are as follows:</p>
<ul>
<li>The probability of an end of study Go is: 0.1478</li>
<li>The probability of an end of study No-Go (Stop) is: 0.2656</li>
<li>The probability of futility at the interim: 0.5866</li>
<li>The probability of a Go conditional on not stopping at the interim:
0.357523</li>
<li>The probability of a No-Go conditional on not stopping at the
interim: 0.642477</li>
</ul>
<p>The posterior mean of the true delta,
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>μ</mi><mi>E</mi></msub><mo>−</mo><msub><mi>μ</mi><mi>S</mi></msub></mrow><annotation encoding="application/x-tex">\mu_E-\mu_S</annotation></semantics></math>,
given a Go decision is: 0.992</p>
<p>The summary of the true delta given a Go decision is:</p>
<pre><code><span><span class="co">##    Min. 1st Qu.  Median    Mean 3rd Qu.    Max. </span></span>
<span><span class="co">##   0.023   0.823   0.990   0.992   1.151   2.009</span></span></code></pre>
<p>The scaled posterior distribution of the true delta given a Go
decision is:</p>
<p><img src="AssuranceConsecutiveStudies_files/figure-html/unnamed-chunk-12-1.png" width="700"></p>
</div>
</div>
<div class="section level2">
<h2 id="example-3---fixed-sample-design-with-a-time-to-event-outcome">Example 3 - Fixed Sample Design With a Time-To-Event Outcome<a class="anchor" aria-label="anchor" href="#example-3---fixed-sample-design-with-a-time-to-event-outcome"></a>
</h2>
<p>This example considers a two-arm fixed sample design with a
time-to-event endpoint, with 300 patients per arm. It demonstrates how
to customize the the <strong>Response (Patient Simulation)</strong>
element of East Horizon’s simulation to simulate the true hazard ratio
from the prior and then simulate the patient data using the sampled
hazard ratio, and the <strong>Analysis</strong> element of East
Horizon’s simulation to perform the analysis using a Cox model.</p>
<p>The figure below illustrates where this example fits within the R
integration points of Cytel products, accompanied by flowcharts
outlining the general steps performed by the R code.</p>
<p><img src="AssuranceConsecutiveStudies_files/figure-html/unnamed-chunk-13-1.png" width="700"></p>
<div class="section level3">
<h3 id="response-patient-simulation-integration-point-2">Response (Patient Simulation) Integration Point<a class="anchor" aria-label="anchor" href="#response-patient-simulation-integration-point-2"></a>
</h3>
<div class="alert alert-primary" role="alert">
<p style="margin-bottom:0">
This endpoint is related to this R file:
<a href="https://github.com/Cytel-Inc/CyneRgy/blob/main/inst/Examples/AssuranceConsecutiveStudies/R/SimulatePatientSurvivalAssurance.R" class="external-link alert-link">SimulatePatientSurvivalAssurance.R</a>
</p>
</div>
<p>This function simulates patient-level outcomes within a Bayesian
assurance framework. Information generated from this simulation will be
used later for the <a href="#analysis-integration-point-2">Analysis
Integration Point</a>. In this example, a bi-modal prior on the
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>log</mo><mrow><mo stretchy="true" form="prefix">(</mo><mi>H</mi><mi>R</mi><mo stretchy="true" form="postfix">)</mo></mrow></mrow><annotation encoding="application/x-tex">\log(HR)</annotation></semantics></math>
is used. The components of the prior are:</p>
<ul>
<li>25% weight on
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>𝒩</mi><mrow><mo stretchy="true" form="prefix">(</mo><mn>0</mn><mo>,</mo><mn>0.02</mn><mo stretchy="true" form="postfix">)</mo></mrow></mrow><annotation encoding="application/x-tex">\mathcal{N}(0, 0.02)</annotation></semantics></math>.</li>
<li>75% weight on
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mrow><mi>ℬ</mi><mi>ℯ</mi><mi>𝓉</mi><mi>𝒶</mi></mrow><mrow><mo stretchy="true" form="prefix">(</mo><mn>2</mn><mo>,</mo><mn>2</mn><mo stretchy="true" form="postfix">)</mo></mrow></mrow><annotation encoding="application/x-tex">\mathcal{Beta}(2, 2)</annotation></semantics></math>,
rescaled between -0.4 and 0.</li>
</ul>
<p><img src="AssuranceConsecutiveStudies_files/figure-html/unnamed-chunk-14-1.png" width="700"></p>
<p>Refer to the table below for the definitions and values of the
user-defined parameters used in this example.</p>
<table class="table">
<thead><tr class="header">
<th><strong>User parameter</strong></th>
<th><strong>Definition</strong></th>
<th><strong>Value</strong></th>
</tr></thead>
<tbody>
<tr class="odd">
<td><strong>dWeight1</strong></td>
<td>Probability of using the normal prior for log(HR).</td>
<td>0.25</td>
</tr>
<tr class="even">
<td><strong>dPriorMean</strong></td>
<td>Mean of the normal prior for log(HR).</td>
<td>0</td>
</tr>
<tr class="odd">
<td><strong>dPriorSD</strong></td>
<td>Standard deviation of the normal prior for log(HR).</td>
<td>0.02</td>
</tr>
<tr class="even">
<td><strong>dAlpha</strong></td>
<td>Alpha parameter of the Beta prior for log(HR).</td>
<td>2</td>
</tr>
<tr class="odd">
<td><strong>dBeta</strong></td>
<td>Beta parameter of the Beta prior for log(HR).</td>
<td>2</td>
</tr>
<tr class="even">
<td><strong>dUpper</strong></td>
<td>Upper bound for scaling the Beta prior.</td>
<td>0</td>
</tr>
<tr class="odd">
<td><strong>dLower</strong></td>
<td>Lower bound for scaling the Beta prior.</td>
<td>-0.4</td>
</tr>
<tr class="even">
<td><strong>dMeanTTEControl</strong></td>
<td>Mean time-to-event for the control group.</td>
<td>12</td>
</tr>
</tbody>
</table>
</div>
<div class="section level3">
<h3 id="analysis-integration-point-2">Analysis Integration Point<a class="anchor" aria-label="anchor" href="#analysis-integration-point-2"></a>
</h3>
<div class="alert alert-primary" role="alert">
<p style="margin-bottom:0">
This endpoint is related to this R file:
<a href="https://github.com/Cytel-Inc/CyneRgy/blob/main/inst/Examples/AssuranceConsecutiveStudies/R/AnalyzeSurvivalDataUsingCoxPH.R" class="external-link alert-link">AnalyzeSurvivalDataUsingCoxPH.R</a>
</p>
</div>
<p>A single analysis is conducted once 50% of patients have experienced
the event of interest. Using the function in the file, the analysis
employs a Cox proportional hazards model, with a hazard ratio (HR) less
than 1 indicating a benefit in favor of the experimental arm. It uses
information from the simulation that is generated by the <a href="#response-patient-simulation-integration-point-2">Response</a>
element of East Horizon’s simulation, explained above. A Go decision is
made if the resulting p-value is less than or equal to 0.025. Refer to
the table below for the definitions of the user-defined parameters used
in this example.</p>
<table class="table">
<colgroup>
<col width="33%">
<col width="66%">
</colgroup>
<thead><tr class="header">
<th><strong>User parameter</strong></th>
<th><strong>Definition</strong></th>
</tr></thead>
<tbody>
<tr class="odd">
<td><strong>bReturnLogTrueHazard</strong></td>
<td>If <code>True</code>, the function returns the natural logarithm of
the true hazard ratio instead of its raw value.</td>
</tr>
<tr class="even">
<td><strong>bReturnNAForNoGoTrials</strong></td>
<td>If <code>True</code> and the trial does not meet the Go decision
criterion, the function returns <code>NA</code> for the hazard
ratio.</td>
</tr>
</tbody>
</table>
</div>
<div class="section level3">
<h3 id="results-2">Results<a class="anchor" aria-label="anchor" href="#results-2"></a>
</h3>
<p>The probability of a Go decision is 33% and the probability of a
No-Go Decision is is 67%. The posterior distribution of the true
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>log</mo><mrow><mo stretchy="true" form="prefix">(</mo><mi>H</mi><mi>R</mi><mo stretchy="true" form="postfix">)</mo></mrow></mrow><annotation encoding="application/x-tex">\log( HR )</annotation></semantics></math>
given a Go decision is:</p>
<p><img src="AssuranceConsecutiveStudies_files/figure-html/unnamed-chunk-16-1.png" width="700"><img src="AssuranceConsecutiveStudies_files/figure-html/unnamed-chunk-16-2.png" width="700"></p>
</div>
</div>
<div class="section level2">
<h2 id="example-4---two-consecutive-studies-normal-outcome-and-de-risking">Example 4 - Two Consecutive Studies (Normal Outcome) and
De-risking<a class="anchor" aria-label="anchor" href="#example-4---two-consecutive-studies-normal-outcome-and-de-risking"></a>
</h2>
<p>In this section, we explore how to compute assurance and conditional
assurance across two sequential studies: a Phase 2 trial followed by a
Phase 3 trial, both with a normal endpoint (as in Example 1).</p>
<p>The objective is to understand how conducting a Phase 2 study can
reduce the risk associated with the Phase 3 trial. This
<em>de-risking</em> is evaluated by comparing two scenarios: (1) the
probability of a No-Go decision in Phase 3 if Phase 2 is skipped, and
(2) the probability of a No-Go in Phase 3 if a preceding Phase 2 trial
is conducted and yields a Go decision. Specifically, we compute the
conditional assurance of Phase 3 given success in Phase 2.</p>
<p>Each study of this example customizes the same Integration Points as
<a href="#example-1---fixed-sample-design-with-a-mixture-of-normal-distributions">Example
1</a>, and utilizes the same R code. Please refer to it for more
information. The only difference is that we now have two different
studies: Phase 3 is conducted <strong>only</strong> if Phase 2 results
in a Go decision.</p>
<p><img src="AssuranceConsecutiveStudies_files/figure-html/unnamed-chunk-17-1.png" width="700"></p>
<div class="section level3">
<h3 id="phase-2-study">Phase 2 Study<a class="anchor" aria-label="anchor" href="#phase-2-study"></a>
</h3>
<p>This study considers a two-arm fixed sample design with normally
distributed outcomes
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>Y</mi><annotation encoding="application/x-tex">Y</annotation></semantics></math>,
with 80 patients per treatment arm.</p>
<div class="section level4">
<h4 id="response-patient-simulation-integration-point-3">Response (Patient Simulation) Integration Point<a class="anchor" aria-label="anchor" href="#response-patient-simulation-integration-point-3"></a>
</h4>
<div class="alert alert-primary" role="alert">
<p style="margin-bottom:0">
This endpoint is related to this R file:
<a href="https://github.com/Cytel-Inc/CyneRgy/blob/main/inst/Examples/AssuranceConsecutiveStudies/R/SimulatePatientOutcomeNormalAssurance.R" class="external-link alert-link">SimulatePatientOutcomeNormalAssurance.R</a>
</p>
</div>
<p>The function for the Response Integration Point of the Phase 2 Study
is the same as in <a href="#response-patient-simulation-integration-point">Example 1</a>.
Refer to the table below for the definitions and values of the
user-defined parameters used in this example.</p>
<table class="table">
<colgroup>
<col width="20%">
<col width="60%">
<col width="20%">
</colgroup>
<thead><tr class="header">
<th><strong>User parameter</strong></th>
<th><strong>Definition</strong></th>
<th><strong>Value</strong></th>
</tr></thead>
<tbody>
<tr class="odd">
<td><strong>dWeight1</strong></td>
<td>Weight of prior component 1.</td>
<td>0.25</td>
</tr>
<tr class="even">
<td><strong>dWeight2</strong></td>
<td>Weight of prior component 2.</td>
<td>0.75</td>
</tr>
<tr class="odd">
<td><strong>dMean1</strong></td>
<td>Mean of prior component 1.</td>
<td>0</td>
</tr>
<tr class="even">
<td><strong>dMean2</strong></td>
<td>Mean of prior component 2.</td>
<td>0.7</td>
</tr>
<tr class="odd">
<td><strong>dSD1</strong></td>
<td>Standard deviation of prior component 1.</td>
<td>0.05</td>
</tr>
<tr class="even">
<td><strong>dSD2</strong></td>
<td>Standard deviation of prior component 2.</td>
<td>0.3</td>
</tr>
<tr class="odd">
<td><strong>dMeanCtrl</strong></td>
<td>Mean of control arm (experimental arm will be sampled).</td>
<td>0</td>
</tr>
<tr class="even">
<td><strong>dSDCtrl</strong></td>
<td>Standard deviation for control arm.</td>
<td>1.9</td>
</tr>
<tr class="odd">
<td><strong>dSDExp</strong></td>
<td>Standard deviation for experimental arm.</td>
<td>1.9</td>
</tr>
</tbody>
</table>
</div>
<div class="section level4">
<h4 id="analysis-integration-point-3">Analysis Integration Point<a class="anchor" aria-label="anchor" href="#analysis-integration-point-3"></a>
</h4>
<div class="alert alert-primary" role="alert">
<p style="margin-bottom:0">
This endpoint is related to this R file:
<a href="https://github.com/Cytel-Inc/CyneRgy/blob/main/inst/Examples/AssuranceConsecutiveStudies/R/AnalyzeUsingBayesianNormals.R" class="external-link alert-link">AnalyzeUsingBayesianNormals.R</a>
</p>
</div>
<p>The function for the Analysis Integration Point of the Phase 2 Study
is the same as in <a href="#analysis-integration-point">Example
1</a>.</p>
<p>For this study, the <em>MAV</em> is set to 0.6 and
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><msub><mi>P</mi><mi>U</mi></msub><annotation encoding="application/x-tex">P_U</annotation></semantics></math>
to 0.8. Refer to the table below for all the definitions and values of
the user-defined parameters used in this example.</p>
<table class="table">
<colgroup>
<col width="27%">
<col width="54%">
<col width="18%">
</colgroup>
<thead><tr class="header">
<th><strong>User parameter</strong></th>
<th><strong>Definition</strong></th>
<th><strong>Value</strong></th>
</tr></thead>
<tbody>
<tr class="odd">
<td><strong>dPriorMeanCtrl</strong></td>
<td>Prior mean for control arm.</td>
<td>0</td>
</tr>
<tr class="even">
<td><strong>dPriorStdDevCtrl</strong></td>
<td>Prior standard deviation for control arm.</td>
<td>1000</td>
</tr>
<tr class="odd">
<td><strong>dPriorMeanExp</strong></td>
<td>Prior mean for experimental arm.</td>
<td>0</td>
</tr>
<tr class="even">
<td><strong>dPriorStdDevExp</strong></td>
<td>Prior standard deviation for experimental arm.</td>
<td>1000</td>
</tr>
<tr class="odd">
<td><strong>dSigma</strong></td>
<td>Known sampling standard deviation.</td>
<td>1.9</td>
</tr>
<tr class="even">
<td><strong>dMAV</strong></td>
<td>Minimum Acceptable Value (clinically meaningful difference).</td>
<td>0.6</td>
</tr>
<tr class="odd">
<td><strong>dPU</strong></td>
<td>Go threshold (posterior probability cutoff).</td>
<td>0.8</td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="section level3">
<h3 id="phase-3-study">Phase 3 Study<a class="anchor" aria-label="anchor" href="#phase-3-study"></a>
</h3>
<p>This study considers a two-arm fixed sample design with normally
distributed outcomes
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>Y</mi><annotation encoding="application/x-tex">Y</annotation></semantics></math>,
with 200 patients per treatment arm.</p>
<div class="section level4">
<h4 id="response-patient-simulation-integration-point-4">Response (Patient Simulation) Integration Point<a class="anchor" aria-label="anchor" href="#response-patient-simulation-integration-point-4"></a>
</h4>
<div class="alert alert-primary" role="alert">
<p style="margin-bottom:0">
This endpoint is related to this R file:
<a href="https://github.com/Cytel-Inc/CyneRgy/blob/main/inst/Examples/AssuranceConsecutiveStudies/R/SimulatePatientOutcomeNormalAssurance.R" class="external-link alert-link">SimulatePatientOutcomeNormalAssurance.R</a>
</p>
</div>
<p>The function for the Response Integration Point of the Phase 2 Study
is the same as in <a href="#response-patient-simulation-integration-point">Example 1</a>.
Refer to the table below for the definitions and values of the
user-defined parameters used in this example.</p>
<table class="table">
<colgroup>
<col width="20%">
<col width="60%">
<col width="20%">
</colgroup>
<thead><tr class="header">
<th><strong>User parameter</strong></th>
<th><strong>Definition</strong></th>
<th><strong>Value</strong></th>
</tr></thead>
<tbody>
<tr class="odd">
<td><strong>dWeight1</strong></td>
<td>Weight of prior component 1.</td>
<td>0.25</td>
</tr>
<tr class="even">
<td><strong>dWeight2</strong></td>
<td>Weight of prior component 2.</td>
<td>0.75</td>
</tr>
<tr class="odd">
<td><strong>dMean1</strong></td>
<td>Mean of prior component 1.</td>
<td>0</td>
</tr>
<tr class="even">
<td><strong>dMean2</strong></td>
<td>Mean of prior component 2.</td>
<td>0.7</td>
</tr>
<tr class="odd">
<td><strong>dSD1</strong></td>
<td>Standard deviation of prior component 1.</td>
<td>0.05</td>
</tr>
<tr class="even">
<td><strong>dSD2</strong></td>
<td>Standard deviation of prior component 2.</td>
<td>0.3</td>
</tr>
<tr class="odd">
<td><strong>dMeanCtrl</strong></td>
<td>Mean of control arm (experimental arm will be sampled).</td>
<td>0</td>
</tr>
<tr class="even">
<td><strong>dSDCtrl</strong></td>
<td>Standard deviation for control arm.</td>
<td>1.9</td>
</tr>
<tr class="odd">
<td><strong>dSDExp</strong></td>
<td>Standard deviation for experimental arm.</td>
<td>1.9</td>
</tr>
</tbody>
</table>
</div>
<div class="section level4">
<h4 id="analysis-integration-point-4">Analysis Integration Point<a class="anchor" aria-label="anchor" href="#analysis-integration-point-4"></a>
</h4>
<div class="alert alert-primary" role="alert">
<p style="margin-bottom:0">
This endpoint is related to this R file:
<a href="https://github.com/Cytel-Inc/CyneRgy/blob/main/inst/Examples/AssuranceConsecutiveStudies/R/AnalyzeUsingBayesianNormals.R" class="external-link alert-link">AnalyzeUsingBayesianNormals.R</a>
</p>
</div>
<p>The function for the Analysis Integration Point of the Phase 2 Study
is the same as in <a href="#analysis-integration-point">Example
1</a>.</p>
<p>For this study, the <em>MAV</em> is set to 0.6 and
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><msub><mi>P</mi><mi>U</mi></msub><annotation encoding="application/x-tex">P_U</annotation></semantics></math>
to 0.5. This design is equivalent to a t-test because the critical value
would be 0.6 and having a posterior probability greater than 0.5 would
indicate that the estimated treatment difference is above the critical
value.</p>
<p>Refer to the table below for all the definitions and values of the
user-defined parameters used in this example.</p>
<table class="table">
<colgroup>
<col width="27%">
<col width="54%">
<col width="18%">
</colgroup>
<thead><tr class="header">
<th><strong>User parameter</strong></th>
<th><strong>Definition</strong></th>
<th><strong>Value</strong></th>
</tr></thead>
<tbody>
<tr class="odd">
<td><strong>dPriorMeanCtrl</strong></td>
<td>Prior mean for control arm.</td>
<td>0</td>
</tr>
<tr class="even">
<td><strong>dPriorStdDevCtrl</strong></td>
<td>Prior standard deviation for control arm.</td>
<td>1000</td>
</tr>
<tr class="odd">
<td><strong>dPriorMeanExp</strong></td>
<td>Prior mean for experimental arm.</td>
<td>0</td>
</tr>
<tr class="even">
<td><strong>dPriorStdDevExp</strong></td>
<td>Prior standard deviation for experimental arm.</td>
<td>1000</td>
</tr>
<tr class="odd">
<td><strong>dSigma</strong></td>
<td>Known sampling standard deviation.</td>
<td>1.9</td>
</tr>
<tr class="even">
<td><strong>dMAV</strong></td>
<td>Minimum Acceptable Value (clinically meaningful difference).</td>
<td>0.6</td>
</tr>
<tr class="odd">
<td><strong>dPU</strong></td>
<td>Go threshold (posterior probability cutoff).</td>
<td>0.5</td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="section level3">
<h3 id="results-3">Results<a class="anchor" aria-label="anchor" href="#results-3"></a>
</h3>
<p>For the phase 2 study independently, the probability of a Go is 26.7%
and the probability of a No-Go is 73.3%.</p>
<p><img src="AssuranceConsecutiveStudies_files/figure-html/unnamed-chunk-19-1.png" width="700"></p>
<p>For the phase 3 study independently, the probability of a Go is 46%
and the probability of a No-Go is 54%.</p>
<p><img src="AssuranceConsecutiveStudies_files/figure-html/unnamed-chunk-21-1.png" width="700"></p>
<p>If the two studies are run sequentially, conducting Phase 3 only if
Phase 2 results in a Go decision, the probability of a Go in Phase 3 is
84.8% and the probability of a No-Go is 15.2%.</p>
<p><img src="AssuranceConsecutiveStudies_files/figure-html/unnamed-chunk-23-1.png" width="700"></p>
<p>Comparing the option of running only a Phase 3 versus a Phase 2
followed by a Phase 3 if Phase 2 is successful, the probability of Go in
phase 3 increases from <strong>46%</strong> to <strong>84.8%</strong>
and the probability of a No-Go in Phase 3 decreases from
<strong>54%</strong> to <strong>15.2%</strong>.</p>
</div>
</div>
<div class="section level2">
<h2 id="example-5---two-consecutive-studies-normal-and-time-to-event-outcomes-and-de-risking">Example 5 - Two Consecutive Studies (Normal and Time-To-Event
outcomes) and De-risking<a class="anchor" aria-label="anchor" href="#example-5---two-consecutive-studies-normal-and-time-to-event-outcomes-and-de-risking"></a>
</h2>
<p>Similarly to <a href="#example-4---two-consecutive-normal-studies-and-de-risking">Example
4</a>, in this section we explore how to compute assurance and
conditional assurance across two sequential studies: a Phase 2 trial
with a normal endpoint followed by a Phase 3 trial with a time-to-event
endpoint.</p>
<p>As before, Phase 3 is conducted <strong>only</strong> if Phase 2
results in a Go decision. The Phase 2 study of this example customizes
the same Integration Points as <a href="#example-1---fixed-sample-design-with-a-mixture-of-normal-distributions">Example
1</a>, and utilizes the same R code. Please refer to it for more
information. However, the Phase 3 study utilizes new Integration points
and R code, as described below.</p>
<div class="section level3">
<h3 id="phase-2-study-1">Phase 2 Study<a class="anchor" aria-label="anchor" href="#phase-2-study-1"></a>
</h3>
<p>This study considers a two-arm fixed sample design with normally
distributed outcomes
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>Y</mi><annotation encoding="application/x-tex">Y</annotation></semantics></math>,
with 80 patients per treatment arm.</p>
<div class="section level4">
<h4 id="response-patient-simulation-integration-point-5">Response (Patient Simulation) Integration Point<a class="anchor" aria-label="anchor" href="#response-patient-simulation-integration-point-5"></a>
</h4>
<div class="alert alert-primary" role="alert">
<p style="margin-bottom:0">
This endpoint is related to this R file:
<a href="https://github.com/Cytel-Inc/CyneRgy/blob/main/inst/Examples/AssuranceConsecutiveStudies/R/SimulatePatientOutcomeNormalAssurance.R" class="external-link alert-link">SimulatePatientOutcomeNormalAssurance.R</a>
</p>
</div>
<p>The function for the Response Integration Point of the Phase 2 Study
is the same as in <a href="#response-patient-simulation-integration-point">Example 1</a>.
Refer to the table below for the definitions and values of the
user-defined parameters used in this example.</p>
<table class="table">
<colgroup>
<col width="20%">
<col width="60%">
<col width="20%">
</colgroup>
<thead><tr class="header">
<th><strong>User parameter</strong></th>
<th><strong>Definition</strong></th>
<th><strong>Value</strong></th>
</tr></thead>
<tbody>
<tr class="odd">
<td><strong>dWeight1</strong></td>
<td>Weight of prior component 1.</td>
<td>0.25</td>
</tr>
<tr class="even">
<td><strong>dWeight2</strong></td>
<td>Weight of prior component 2.</td>
<td>0.75</td>
</tr>
<tr class="odd">
<td><strong>dMean1</strong></td>
<td>Mean of prior component 1.</td>
<td>0</td>
</tr>
<tr class="even">
<td><strong>dMean2</strong></td>
<td>Mean of prior component 2.</td>
<td>0.7</td>
</tr>
<tr class="odd">
<td><strong>dSD1</strong></td>
<td>Standard deviation of prior component 1.</td>
<td>0.05</td>
</tr>
<tr class="even">
<td><strong>dSD2</strong></td>
<td>Standard deviation of prior component 2.</td>
<td>0.3</td>
</tr>
<tr class="odd">
<td><strong>dMeanCtrl</strong></td>
<td>Mean of control arm (experimental arm will be sampled).</td>
<td>0</td>
</tr>
<tr class="even">
<td><strong>dSDCtrl</strong></td>
<td>Standard deviation for control arm.</td>
<td>1.9</td>
</tr>
<tr class="odd">
<td><strong>dSDExp</strong></td>
<td>Standard deviation for experimental arm.</td>
<td>1.9</td>
</tr>
</tbody>
</table>
</div>
<div class="section level4">
<h4 id="analysis-integration-point-5">Analysis Integration Point<a class="anchor" aria-label="anchor" href="#analysis-integration-point-5"></a>
</h4>
<div class="alert alert-primary" role="alert">
<p style="margin-bottom:0">
This endpoint is related to this R file:
<a href="https://github.com/Cytel-Inc/CyneRgy/blob/main/inst/Examples/AssuranceConsecutiveStudies/R/AnalyzeUsingBayesianNormals.R" class="external-link alert-link">AnalyzeUsingBayesianNormals.R</a>
</p>
</div>
<p>The function for the Analysis Integration Point of the Phase 2 Study
is the same as in <a href="#analysis-integration-point">Example
1</a>.</p>
<p>For this study, the <em>MAV</em> is set to 0.6 and
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><msub><mi>P</mi><mi>U</mi></msub><annotation encoding="application/x-tex">P_U</annotation></semantics></math>
to 0.8. Refer to the table below for all the definitions and values of
the user-defined parameters used in this example.</p>
<table class="table">
<colgroup>
<col width="27%">
<col width="54%">
<col width="18%">
</colgroup>
<thead><tr class="header">
<th><strong>User parameter</strong></th>
<th><strong>Definition</strong></th>
<th><strong>Value</strong></th>
</tr></thead>
<tbody>
<tr class="odd">
<td><strong>dPriorMeanCtrl</strong></td>
<td>Prior mean for control arm.</td>
<td>0</td>
</tr>
<tr class="even">
<td><strong>dPriorStdDevCtrl</strong></td>
<td>Prior standard deviation for control arm.</td>
<td>1000</td>
</tr>
<tr class="odd">
<td><strong>dPriorMeanExp</strong></td>
<td>Prior mean for experimental arm.</td>
<td>0</td>
</tr>
<tr class="even">
<td><strong>dPriorStdDevExp</strong></td>
<td>Prior standard deviation for experimental arm.</td>
<td>1000</td>
</tr>
<tr class="odd">
<td><strong>dSigma</strong></td>
<td>Known sampling standard deviation.</td>
<td>1.9</td>
</tr>
<tr class="even">
<td><strong>dMAV</strong></td>
<td>Minimum Acceptable Value (clinically meaningful difference).</td>
<td>0.6</td>
</tr>
<tr class="odd">
<td><strong>dPU</strong></td>
<td>Go threshold (posterior probability cutoff).</td>
<td>0.8</td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="section level3">
<h3 id="phase-3-study-1">Phase 3 Study<a class="anchor" aria-label="anchor" href="#phase-3-study-1"></a>
</h3>
<p>This study considers a two-arm fixed sample design with a
time-to-event endpoint, with 300 patients per arm.</p>
<p>The figure below illustrates where the integration points used in
this study fit within the R integration points of Cytel products,
accompanied by flowcharts outlining the general steps performed by the R
code.</p>
<p><img src="AssuranceConsecutiveStudies_files/figure-html/unnamed-chunk-24-1.png" width="700"></p>
</div>
<div class="section level3">
<h3 id="initialize-integration-point">Initialize Integration Point<a class="anchor" aria-label="anchor" href="#initialize-integration-point"></a>
</h3>
<div class="alert alert-primary" role="alert">
<p style="margin-bottom:0">
This endpoint is related to this R file:
<a href="https://github.com/Cytel-Inc/CyneRgy/blob/main/inst/Examples/AssuranceConsecutiveStudies/R/ReadInPrior.R" class="external-link alert-link">ReadInPrior.R</a>
</p>
</div>
<p>During the Phase 2 simulation, the true treatment difference was
sampled from the prior distribution and we manually saved it to an
output CSV file.</p>
<p>Both conditional and unconditional Phase 3 simulations use an R
initialization function to load this output and extract the true
treatment differences. These values are then converted to the log of the
true hazard ratio (HR) using the linear link function shown in the <a href="#response-patient-simulation-integration-point-6">Response
section</a>. Note that while unconditional assurance could be calculated
by sampling directly from the Phase 2 prior, reading the saved values
ensures a consistent comparison between conditional and unconditional
assurance. This approach provides a more accurate assessment of the
benefit of conducting a Phase 2 trial before Phase 3.</p>
<p>If used with East, the <em>ReadExample5Phase2Output</em> function is
used to load the true treatment differences from a CSV file. You can
update the R code to specify your correct file path. In East Horizon,
which does not support file uploads, use the
<em>ReadExample5Phase2OutputSolara</em> function instead. There, the
treatment differences are pasted directly into an R vector.</p>
<p>In the R code, note that the <code>&lt;&lt;-</code> operator is used
to define two global variables:</p>
<ul>
<li>
<code>vPrior</code>: a vector containing the true treatment
differences.</li>
<li>
<code>nSimIndex</code>: an index tracking the current replication
being executed during the Phase 3 simulation.</li>
</ul>
<p>Both variables are used in the <a href="#response-patient-simulation-integration-point-6">Response
Integration Point</a> R function. The <code>nSimIndex</code> value is
updated with each simulation iteration.</p>
<p>This function relies on the user-defined parameter
<code>bConditionalOnGo</code>. When set to 1, only the true treatment
differences that led to a Go decision in Phase 2 are used to calculate
conditional assurance. Note that the number of Phase 3 replications used
in simulating for conditional assurance must be no greater than the
number of successful Phase 2 simulations. When
<code>bConditionalOnGo</code> is set to 0, all sampled treatment
differences from Phase 2 are used to compute unconditional assurance.
Refer to the table below for the definitions of the user-defined
parameters used in this example.</p>
<table class="table">
<colgroup>
<col width="33%">
<col width="66%">
</colgroup>
<thead><tr class="header">
<th><strong>User parameter</strong></th>
<th><strong>Definition</strong></th>
</tr></thead>
<tbody><tr class="odd">
<td><strong>bConditionalOnGo</strong></td>
<td>If <code>True</code>, uses only Phase 2 results that led to a Go
decision. Otherwise, uses all results.</td>
</tr></tbody>
</table>
</div>
<div class="section level3">
<h3 id="response-patient-simulation-integration-point-6">Response (Patient Simulation) Integration Point<a class="anchor" aria-label="anchor" href="#response-patient-simulation-integration-point-6"></a>
</h3>
<div class="alert alert-primary" role="alert">
<p style="margin-bottom:0">
This endpoint is related to this R file:
<a href="https://github.com/Cytel-Inc/CyneRgy/blob/main/inst/Examples/AssuranceConsecutiveStudies/R/SimulatePatientSurvivalAssuranceUsingPh2Prior.R" class="external-link alert-link">SimulatePatientSurvivalAssuranceUsingPh2Prior.R</a>
</p>
</div>
<p>This function simulates patient-level outcomes within a Bayesian
assurance framework. The relationship between the continuous endpoint in
Phase 2 and the time-to-event endpoint in Phase 3 is modeled using a
linear function:</p>
<p><math display="block" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>log</mo><msub><mrow><mo stretchy="true" form="prefix">(</mo><mtext mathvariant="normal">True HR</mtext><mo stretchy="true" form="postfix">)</mo></mrow><mtext mathvariant="normal">Phase 3</mtext></msub><mo>=</mo><mn>0.1</mn><mo>−</mo><mn>0.4</mn><mo>×</mo><msub><mrow><mo stretchy="true" form="prefix">(</mo><mtext mathvariant="normal">True Treatment Difference</mtext><mo stretchy="true" form="postfix">)</mo></mrow><mtext mathvariant="normal">Phase 2</mtext></msub></mrow><annotation encoding="application/x-tex"> 
\log(\text{True HR})_{\text{Phase 3}} = 0.1 - 0.4 \times (\text{True Treatment Difference})_{\text{Phase 2}}
</annotation></semantics></math></p>
<p>Note that this relationship is defined in terms of the true treatment
effects. Since Phase 2 informs the prior on the true treatment
difference and a direct link is established between the true difference
and the true hazard ratio, there is no need to specify a separate prior
for the true HR as done in Example 3.</p>
<p>Refer to the table below for the definitions and values of the
user-defined parameters used in this example.</p>
<table class="table">
<colgroup>
<col width="20%">
<col width="60%">
<col width="20%">
</colgroup>
<thead><tr class="header">
<th><strong>User parameter</strong></th>
<th><strong>Definition</strong></th>
<th><strong>Value</strong></th>
</tr></thead>
<tbody>
<tr class="odd">
<td><strong>dMeanTTEControl</strong></td>
<td>Mean time-to-event for the control group.</td>
<td>12</td>
</tr>
<tr class="even">
<td><strong>dIntercept</strong></td>
<td>Intercept for the linear relationship between true treatment
difference and log(HR).</td>
<td>0.1</td>
</tr>
<tr class="odd">
<td><strong>dSlope</strong></td>
<td>Slope for the linear relationship between true treatment difference
and log(HR).</td>
<td>-0.4</td>
</tr>
</tbody>
</table>
</div>
<div class="section level3">
<h3 id="analysis-integration-point-6">Analysis Integration Point<a class="anchor" aria-label="anchor" href="#analysis-integration-point-6"></a>
</h3>
<div class="alert alert-primary" role="alert">
<p style="margin-bottom:0">
This endpoint is related to this R file:
<a href="https://github.com/Cytel-Inc/CyneRgy/blob/main/inst/Examples/AssuranceConsecutiveStudies/R/AnalyzeSurvivalDataUsingCoxPH.R" class="external-link alert-link">AnalyzeSurvivalDataUsingCoxPH.R</a>
</p>
</div>
<p>Similarly to <a href="#analysis-integration-point-2">Example 3</a>, a
single analysis is conducted once 50% of patients have experienced the
event of interest. Using the function in the file, the analysis employs
a Cox proportional hazards model, with a hazard ratio (HR) less than 1
indicating a benefit in favor of the experimental arm. A Go decision is
made if the resulting p-value is less than or equal to 0.025.</p>
<p>Refer to the table below for the definitions of the user-defined
parameters used in this example.</p>
<table class="table">
<colgroup>
<col width="33%">
<col width="66%">
</colgroup>
<thead><tr class="header">
<th><strong>User parameter</strong></th>
<th><strong>Definition</strong></th>
</tr></thead>
<tbody>
<tr class="odd">
<td><strong>bReturnLogTrueHazard</strong></td>
<td>If <code>True</code>, the function returns the natural logarithm of
the true hazard ratio instead of its raw value.</td>
</tr>
<tr class="even">
<td><strong>bReturnNAForNoGoTrials</strong></td>
<td>If <code>True</code> and the trial does not meet the Go decision
criterion, the function returns <code>NA</code> for the hazard
ratio.</td>
</tr>
</tbody>
</table>
</div>
<div class="section level3">
<h3 id="results-4">Results<a class="anchor" aria-label="anchor" href="#results-4"></a>
</h3>
<p>For the phase 2 study independently, the probability of a Go is 26.7%
and the probability of a No-Go is 73.3%.</p>
<p><img src="AssuranceConsecutiveStudies_files/figure-html/unnamed-chunk-26-1.png" width="700"></p>
<p>For the phase 3 study independently, the unconditional probability of
a Go decision is 29% and the unconditional probability of a No-Go
Decision is 71%. The 95% posterior credible for the Log( True HR ) is
(-<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>∞</mi><annotation encoding="application/x-tex">\infty</annotation></semantics></math>,
0.12 ). The posterior distribution of the true Log( HR ) given a Go
decision is:</p>
<p><img src="AssuranceConsecutiveStudies_files/figure-html/unnamed-chunk-28-1.png" width="700"></p>
<p>If the two studies are run sequentially, conducting Phase 3 only if
Phase 2 results in a Go decision, the probability of a Go decision is
60% and the unconditional probability of a No-Go Decision is 40%. The
95% posterior credible for the Log( True HR ) is (-0.46, -0.08). The
posterior distribution of the true Log( HR ) given a Phase 3 Go decision
is:</p>
<p><img src="AssuranceConsecutiveStudies_files/figure-html/unnamed-chunk-30-1.png" width="700"></p>
<p>Comparing the option of running only a Phase 3 versus a Phase 2
followed by a Phase 3 if Phase 2 is successful, the probability of Go in
phase 3 increases from <strong>29%</strong> to <strong>60%</strong> and
the probability of a No-Go in Phase 3 decreases from
<strong>71%</strong> to <strong>40%</strong>.</p>
</div>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by J. Kyle Wathen, Valeria A. G. Mazzanti, Gabriel Potvin.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer>
</div>





  </body>
</html>

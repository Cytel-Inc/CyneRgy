<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>2-Arm, Binary Outcome - Patient Simulation • CyneRgy</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="96x96" href="../favicon-96x96.png">
<link rel="icon" type="”image/svg+xml”" href="../favicon.svg">
<link rel="apple-touch-icon" sizes="180x180" href="../apple-touch-icon.png">
<link rel="icon" sizes="any" href="../favicon.ico">
<link rel="manifest" href="../site.webmanifest">
<script src="../lightswitch.js"></script><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/Source_Sans_3-0.4.9/font.css" rel="stylesheet">
<link href="../deps/Source_Code_Pro-0.4.9/font.css" rel="stylesheet">
<link href="../deps/font-awesome-6.4.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="2-Arm, Binary Outcome - Patient Simulation">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.11/dist/katex.min.css" integrity="sha384-nB0miv6/jRmo5UMMR1wu3Gz6NLsoTkbqJghGIsx//Rlm+ZU03BU6SQNC66uf4l5+" crossorigin="anonymous">
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.11/dist/katex.min.js" integrity="sha384-7zkQWkzuo3B5mTepMUcHkMB5jZaolc2xDwL6VFqjFALcbeS9Ggm/Yr2r3Dy4lfFg" crossorigin="anonymous"></script><script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.11/dist/contrib/auto-render.min.js" integrity="sha384-43gviWU0YVjaDtb/GhzOouOXtZMP/7XUzwPTstBeZFe/+rCMvRwr4yROQP43s0Xk" crossorigin="anonymous" onload="renderMathInElement(document.body);"></script>
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top " aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">CyneRgy</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.1.7</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../index.html">Home</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-getting-started" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Getting Started</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-getting-started">
<li><a class="dropdown-item" href="../articles/Overview.html">Overview</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>Integration Specific Points</h6></li>
    <li><a class="dropdown-item" href="../articles/IntegrationPointInitialization.html">Initialization</a></li>
    <li><a class="dropdown-item" href="../articles/IntegrationPointAnalysis.html">Analysis (Test Statistic)</a></li>
    <li><a class="dropdown-item" href="../articles/IntegrationPointEnrollment.html">Enrollment (Arrival Times)</a></li>
    <li><a class="dropdown-item" href="../articles/IntegrationPointRandomization.html">Randomization</a></li>
    <li><a class="dropdown-item" href="../articles/IntegrationPointResponse.html">Response (Patient Simulation)</a></li>
    <li><a class="dropdown-item" href="../articles/IntegrationPointDropout.html">Dropout</a></li>
    <li><a class="dropdown-item" href="../articles/IntegrationPointTreatmentSelection.html">Treatment Selection</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="../articles/ExampleOutline.html">Examples</a></li>
<li class="nav-item"><a class="nav-link" href="../reference/index.html">References</a></li>
<li class="nav-item"><a class="nav-link" href="../articles/ContributingToCyneRgy.html">Contribute</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/Cytel-Inc/CyneRgy"><span class="fa fa-github fa-lg"></span></a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-lightswitch" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true" aria-label="Light switch"><span class="fa fa-sun"></span></button>
  <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="dropdown-lightswitch">
<li><button class="dropdown-item" data-bs-theme-value="light"><span class="fa fa-sun"></span> Light</button></li>
    <li><button class="dropdown-item" data-bs-theme-value="dark"><span class="fa fa-moon"></span> Dark</button></li>
    <li><button class="dropdown-item" data-bs-theme-value="auto"><span class="fa fa-adjust"></span> Auto</button></li>
  </ul>
</li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>2-Arm, Binary Outcome - Patient Simulation</h1>
                        <h4 data-toc-skip class="author">J. Kyle
Wathen</h4>
            
            <h4 data-toc-skip class="date">October 14, 2025</h4>
      

      <div class="d-none name"><code>2ArmBinaryOutcomePatientSimulation.Rmd</code></div>
    </div>

    
    
<div class="alert alert-primary" role="alert">
<p style="margin-bottom:0">
These examples are related to the <strong>Integration Point: Response -
Binary Outcome</strong>.
<a href="IntegrationPointResponseBinary.html" class="alert-link">Click
here for more information about this integration point.</a>
</p>
</div>
<div class="section level2">
<h2 id="introduction">Introduction<a class="anchor" aria-label="anchor" href="#introduction"></a>
</h2>
<p>The following examples illustrate how to integrate new patient
outcome simulation (<em>response</em>) capabilities into East Horizon or
East using R functions in the context of a two-arm trial. In each
example, the trial design includes a standard-of-care control arm and an
experimental treatment arm, with patient outcomes modeled as binary
data.</p>
<p>Once CyneRgy is installed, you can load this example in RStudio with
the following commands:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">CyneRgy</span><span class="fu">::</span><span class="fu"><a href="../reference/RunExample.html">RunExample</a></span><span class="op">(</span> <span class="st">"2ArmBinaryOutcomePatientSimulation"</span> <span class="op">)</span></span></code></pre></div>
<p>Running the command above will load the RStudio project in
RStudio.</p>
<p><strong>East Workbook</strong>: <a href="https://github.com/Cytel-Inc/CyneRgy/blob/main/inst/Examples/2ArmBinaryOutcomePatientSimulation/2ArmBinaryOutcomePatientSimulation.cywx" class="external-link">2ArmBinaryOutcomePatientSimulation.cywx</a></p>
<p><strong>RStudio Project File</strong>: <a href="https://github.com/Cytel-Inc/CyneRgy/blob/main/inst/Examples/2ArmBinaryOutcomePatientSimulation/2ArmBinaryOutcomePatientSimulation.Rproj" class="external-link">2ArmBinaryOutcomePatientSimulation.Rproj</a></p>
<p>In the <a href="https://github.com/Cytel-Inc/CyneRgy/tree/main/inst/Examples/2ArmBinaryOutcomePatientSimulation/R" class="external-link">R
directory of this example</a> you will find the following R files:</p>
<ol style="list-style-type: decimal">
<li><p><a href="https://github.com/Cytel-Inc/CyneRgy/blob/main/inst/Examples/2ArmBinaryOutcomePatientSimulation/R/SimulatePatientOutcomePercentAtZero.Binary.R" class="external-link">SimulatePatientOutcomePercentAtZero.Binary.R</a>
- This file provides an example R function to simulate patient data from
a mixture distribution where a proportion of patients do not respond to
treatment. The code in Example 1 can be used when the proportion of
patients that don’t respond to treatment is a fixed value.</p></li>
<li><p><a href="https://github.com/Cytel-Inc/CyneRgy/blob/main/inst/Examples/2ArmBinaryOutcomePatientSimulation/R/SimulatePatientOutcomePercentAtZeroBetaDist.Binary.R" class="external-link">SimulatePatientOutcomePercentAtZeroBetaDist.Binary.R</a>
- This file provides an example R function to simulate patient data from
a mixture distribution where a proportion of patients do not respond to
treatment. This approach assumes that the percentage of patients that do
not respond to treatment is unknown and must first be drawn from a Beta
distribution.</p></li>
</ol>
</div>
<div class="section level2">
<h2 id="example-1---simulate-binary-data-from-a-mixture-distribution">Example 1 - Simulate Binary Data from a Mixture Distribution<a class="anchor" aria-label="anchor" href="#example-1---simulate-binary-data-from-a-mixture-distribution"></a>
</h2>
<div class="alert alert-primary" role="alert">
<p style="margin-bottom:0">
This example is related to this R file:
<a href="https://github.com/Cytel-Inc/CyneRgy/blob/main/inst/Examples/2ArmBinaryOutcomePatientSimulation/R/SimulatePatientOutcomePercentAtZero.Binary.R" class="external-link alert-link">SimulatePatientOutcomePercentAtZero.Binary.R</a>
</p>
</div>
<p>In this example, the patient outcome is binary, where 0 represents
treatment failure (non-response), and 1 indicates a successful response.
However, an unknown proportion of patients are treatment-resistant and
will not respond, resulting in an outcome of 0. Based on historical
data, it is estimated that between 20% and 40% of patients fall into
this category.</p>
<p>The R function <em>SimulatePatientOutcomePercentAtZero.Binary</em> is
provided to explore the proportion of treatment-resistant patients and
assess its impact on expected study power. In these examples, a binomial
distribution is used to determine whether a patient is
treatment-resistant. If a patient is not treatment-resistant, their
outcome is then simulated from a binomial distribution based on the
response probability specified in East Horizon or East and then sent to
R.</p>
<p>Refer to the table below for the definitions of the user-defined
parameters used in this example.</p>
<table class="table">
<colgroup>
<col width="40%">
<col width="60%">
</colgroup>
<thead><tr class="header">
<th><strong>User parameter</strong></th>
<th><strong>Definition</strong></th>
</tr></thead>
<tbody>
<tr class="odd">
<td><strong>dProbOfTreatmentResistantCtrl</strong></td>
<td>Value between 0 and 1 representing the probability a patient is
treatment-resistant in the control arm.</td>
</tr>
<tr class="even">
<td><strong>dProbOfTreatmentResistantExp</strong></td>
<td>Value between 0 and 1 representing the probability a patient is
treatment-resistant in the experimental arm.</td>
</tr>
</tbody>
</table>
<p>The figure below illustrates where this example fits within the R
integration points of Cytel products, accompanied by a flowchart
outlining the general steps performed by the R code.</p>
<p><img src="2ArmBinaryOutcomePatientSimulation_files/figure-html/unnamed-chunk-4-1.png" width="700"></p>
<div class="section level3">
<h3 id="example-1-1---all-patients-respond">Example 1.1 - All Patients Respond<a class="anchor" aria-label="anchor" href="#example-1-1---all-patients-respond"></a>
</h3>
<p>Assume that no patient will be treatment-resistant. A binomial
distribution is used to determine whether a patient is
treatment-resistant or not. If the patient is not treatment-resistant,
their outcome is simulated from a binomial distribution using the
parameters specified in East Horizon or East and sent to R. In this
example, the probability of a patient being treatment-resistant is set
to zero. Refer to the table below for the values of the user-defined
parameters used in this example.</p>
<table class="table">
<thead><tr class="header">
<th><strong>User parameter</strong></th>
<th><strong>Value</strong></th>
</tr></thead>
<tbody>
<tr class="odd">
<td><strong>dProbOfTreatmentResistantCtrl</strong></td>
<td>0.0</td>
</tr>
<tr class="even">
<td><strong>dProbOfTreatmentResistantExp</strong></td>
<td>0.0</td>
</tr>
</tbody>
</table>
<p>This demonstrates that using the R function with a treatment
resistance probability of zero produces the same results as simulating
the data directly with the default engine of East Horizon or East.</p>
</div>
<div class="section level3">
<h3 id="example-1-2---20-of-treatment-resistant-patients">Example 1.2 - 20% of Treatment-Resistant Patients<a class="anchor" aria-label="anchor" href="#example-1-2---20-of-treatment-resistant-patients"></a>
</h3>
<p>Now, assume that, on average, 20% of patients will be
treatment-resistant. A binomial distribution is used to determine
whether a patient is treatment-resistant or not. If the patient is not
treatment-resistant, their outcome is simulated from a binomial
distribution using the parameters specified in East Horizon or East and
sent to R. Refer to the table below for the values of the user-defined
parameters used in this example.</p>
<table class="table">
<thead><tr class="header">
<th><strong>User parameter</strong></th>
<th><strong>Value</strong></th>
</tr></thead>
<tbody>
<tr class="odd">
<td><strong>dProbOfTreatmentResistantCtrl</strong></td>
<td>0.2</td>
</tr>
<tr class="even">
<td><strong>dProbOfTreatmentResistantExp</strong></td>
<td>0.2</td>
</tr>
</tbody>
</table>
</div>
<div class="section level3">
<h3 id="example-1-3---40-of-treatment-resistant-patients">Example 1.3 - 40% of Treatment-Resistant Patients<a class="anchor" aria-label="anchor" href="#example-1-3---40-of-treatment-resistant-patients"></a>
</h3>
<p>This example is similar to the previous one, but here we assume that,
on average, 40% of patients will be treatment-resistant. Refer to the
table below for the values of the user-defined parameters used in this
example.</p>
<table class="table">
<thead><tr class="header">
<th><strong>User parameter</strong></th>
<th><strong>Value</strong></th>
</tr></thead>
<tbody>
<tr class="odd">
<td><strong>dProbOfTreatmentResistantCtrl</strong></td>
<td>0.4</td>
</tr>
<tr class="even">
<td><strong>dProbOfTreatmentResistantExp</strong></td>
<td>0.4</td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="section level2">
<h2 id="example-2---simulation-of-patient-data-from-a-mixture-distribution-with-mixture-percent-sampled-from-a-beta-distribution">Example 2 - Simulation of Patient Data from a Mixture Distribution
with Mixture Percent Sampled from a Beta Distribution<a class="anchor" aria-label="anchor" href="#example-2---simulation-of-patient-data-from-a-mixture-distribution-with-mixture-percent-sampled-from-a-beta-distribution"></a>
</h2>
<div class="alert alert-primary" role="alert">
<p style="margin-bottom:0">
This example is related to this R file:
<a href="https://github.com/Cytel-Inc/CyneRgy/blob/main/inst/Examples/2ArmBinaryOutcomePatientSimulation/R/SimulatePatientOutcomePercentAtZeroBetaDist.Binary.R" class="external-link alert-link">SimulatePatientOutcomePercentAtZeroBetaDist.Binary.R</a>
</p>
</div>
<p>Similarly to Example 1, this function models a binary patient
outcome, where 0 represents treatment failure (non-response) and 1
indicates a successful response, and an unknown proportion of patients
are treatment-resistant and will not respond, resulting in an outcome of
0.</p>
<p>Now, the function
<em>SimulatePatientOutcomePercentAtZeroBetaDist.Binary</em> assumes that
the probability of a patient being treatment-resistant is random and
follows a Beta distribution, incorporating variability in the unknown
probability of treatment resistance. Additionally, the function allows
for a different Beta distribution for each treatment arm, enabling the
evaluation of how a treatment that reduces the likelihood of failure
would perform in the trial. In these examples, a Beta distribution is
used to determine whether a patient is treatment-resistant. If the
patient is not treatment-resistant, their outcome is then simulated from
a binomial distribution based on the response probability specified in
East Horizon or East, with the data sent to R for further analysis.</p>
<p>Refer to the table below for the definitions of the user-defined
parameters used in this example.</p>
<table class="table">
<colgroup>
<col width="30%">
<col width="70%">
</colgroup>
<thead><tr class="header">
<th><strong>User parameter</strong></th>
<th><strong>Definition</strong></th>
</tr></thead>
<tbody>
<tr class="odd">
<td><strong>dCtrlBetaParam1</strong></td>
<td>Alpha parameter for the Beta Distribution used to get the
probability a patient is treatment-resistant in the control arm.</td>
</tr>
<tr class="even">
<td><strong>dCtrlBetaParam2</strong></td>
<td>Beta parameter for the Beta Distribution used to get the probability
a patient is treatment-resistant in the control arm.</td>
</tr>
<tr class="odd">
<td><strong>dExpBetaParam1</strong></td>
<td>Alpha parameter for the Beta Distribution used to get the
probability a patient is treatment-resistant in the experimental
arm.</td>
</tr>
<tr class="even">
<td><strong>dExpBetaParam2</strong></td>
<td>Beta parameter for the Beta Distribution used to get the probability
a patient is treatment-resistant in the experimental arm.</td>
</tr>
</tbody>
</table>
<p>The figure below illustrates where this example fits within the R
integration points of Cytel products, accompanied by a flowchart
outlining the general steps performed by the R code.</p>
<p><img src="2ArmBinaryOutcomePatientSimulation_files/figure-html/unnamed-chunk-5-1.png" width="700"></p>
<div class="section level3">
<h3 id="example-2-1---20-40-95-ci-of-treatment-resistant-patients">Example 2.1 - 20%-40% (95% CI) of Treatment-Resistant Patients<a class="anchor" aria-label="anchor" href="#example-2-1---20-40-95-ci-of-treatment-resistant-patients"></a>
</h3>
<p>For this example, independent
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mtext mathvariant="normal">Beta</mtext><mrow><mo stretchy="true" form="prefix">(</mo><mn>23.1</mn><mo>,</mo><mn>55.2</mn><mo stretchy="true" form="postfix">)</mo></mrow></mrow><annotation encoding="application/x-tex">\text{Beta} ( 23.1, 55.2 )</annotation></semantics></math>
distributions are used, which have a 95% credible interval of (0.2,
0.4). The function first simulates the probability of treatment
resistance for both the control and experimental arms using these Beta
distributions. It then uses the simulated probabilities to determine the
proportion of treatment-resistant patients. Refer to the table below for
the values of the user-defined parameters used in this example.</p>
<table class="table">
<thead><tr class="header">
<th><strong>User parameter</strong></th>
<th><strong>Value</strong></th>
</tr></thead>
<tbody>
<tr class="odd">
<td><strong>dCtrlBetaParam1</strong></td>
<td>23.1</td>
</tr>
<tr class="even">
<td><strong>dCtrlBetaParam2</strong></td>
<td>55.2</td>
</tr>
<tr class="odd">
<td><strong>dExpBetaParam1</strong></td>
<td>23.1</td>
</tr>
<tr class="even">
<td><strong>dExpBetaParam2</strong></td>
<td>55.2</td>
</tr>
</tbody>
</table>
<p>In this example, it is assumed that the two probabilities are sampled
from the same distribution but are not identical within a given
simulation. The R code can be easily adapted to modify this assumption
if needed.</p>
</div>
<div class="section level3">
<h3 id="example-2-2---20-40-95-ci-of-control-treatment-resistant-patients-10-30-95-ci-of-experimental-treatment-resistant-patients">Example 2.2 - 20%-40% (95% CI) of Control Treatment-Resistant
Patients, 10%-30% (95% CI) of Experimental Treatment-Resistant
Patients<a class="anchor" aria-label="anchor" href="#example-2-2---20-40-95-ci-of-control-treatment-resistant-patients-10-30-95-ci-of-experimental-treatment-resistant-patients"></a>
</h3>
<p>In this example, the treatment reduces the probability of treatment
resistance by 10% on average compared to the control. Specifically,
assume that the probability of being treatment-resistant in the control
group follows a
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mtext mathvariant="normal">Beta</mtext><mrow><mo stretchy="true" form="prefix">(</mo><mn>23.1</mn><mo>,</mo><mn>55.2</mn><mo stretchy="true" form="postfix">)</mo></mrow></mrow><annotation encoding="application/x-tex">\text{Beta} ( 23.1, 55.2 )</annotation></semantics></math>
distribution, with a 95% credible interval of (0.2, 0.4). For the
experimental treatment, assume the probability of being
treatment-resistant follows a
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mtext mathvariant="normal">Beta</mtext><mrow><mo stretchy="true" form="prefix">(</mo><mn>10.8</mn><mo>,</mo><mn>46.3</mn><mo stretchy="true" form="postfix">)</mo></mrow></mrow><annotation encoding="application/x-tex">\text{Beta} ( 10.8, 46.3 )</annotation></semantics></math>
distribution, with a 95% credible interval of (0.1, 0.3). Refer to the
table below for the values of the user-defined parameters used in this
example.</p>
<table class="table">
<thead><tr class="header">
<th><strong>User parameter</strong></th>
<th><strong>Value</strong></th>
</tr></thead>
<tbody>
<tr class="odd">
<td><strong>dCtrlBetaParam1</strong></td>
<td>23.1</td>
</tr>
<tr class="even">
<td><strong>dCtrlBetaParam2</strong></td>
<td>55.2</td>
</tr>
<tr class="odd">
<td><strong>dExpBetaParam1</strong></td>
<td>10.8</td>
</tr>
<tr class="even">
<td><strong>dExpBetaParam2</strong></td>
<td>46.3</td>
</tr>
</tbody>
</table>
</div>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by J. Kyle Wathen, Valeria A. G. Mazzanti, Gabriel Potvin.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer>
</div>





  </body>
</html>

<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Dual Endpoints - Patient Simulation • CyneRgy</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="96x96" href="../favicon-96x96.png">
<link rel="icon" type="”image/svg+xml”" href="../favicon.svg">
<link rel="apple-touch-icon" sizes="180x180" href="../apple-touch-icon.png">
<link rel="icon" sizes="any" href="../favicon.ico">
<link rel="manifest" href="../site.webmanifest">
<script src="../lightswitch.js"></script><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/Source_Sans_3-0.4.9/font.css" rel="stylesheet">
<link href="../deps/Source_Code_Pro-0.4.9/font.css" rel="stylesheet">
<link href="../deps/font-awesome-6.4.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Dual Endpoints - Patient Simulation">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.11/dist/katex.min.css" integrity="sha384-nB0miv6/jRmo5UMMR1wu3Gz6NLsoTkbqJghGIsx//Rlm+ZU03BU6SQNC66uf4l5+" crossorigin="anonymous">
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.11/dist/katex.min.js" integrity="sha384-7zkQWkzuo3B5mTepMUcHkMB5jZaolc2xDwL6VFqjFALcbeS9Ggm/Yr2r3Dy4lfFg" crossorigin="anonymous"></script><script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.11/dist/contrib/auto-render.min.js" integrity="sha384-43gviWU0YVjaDtb/GhzOouOXtZMP/7XUzwPTstBeZFe/+rCMvRwr4yROQP43s0Xk" crossorigin="anonymous" onload="renderMathInElement(document.body);"></script>
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top " aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">CyneRgy</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.1.8</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../index.html">Home</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-getting-started" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Getting Started</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-getting-started">
<li><a class="dropdown-item" href="../articles/Overview.html">Overview</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>Integration Specific Points</h6></li>
    <li><a class="dropdown-item" href="../articles/IntegrationPointInitialization.html">Initialization</a></li>
    <li><a class="dropdown-item" href="../articles/IntegrationPointAnalysis.html">Analysis (Test Statistic)</a></li>
    <li><a class="dropdown-item" href="../articles/IntegrationPointEnrollment.html">Enrollment (Arrival Times)</a></li>
    <li><a class="dropdown-item" href="../articles/IntegrationPointRandomization.html">Randomization</a></li>
    <li><a class="dropdown-item" href="../articles/IntegrationPointResponse.html">Response (Patient Simulation)</a></li>
    <li><a class="dropdown-item" href="../articles/IntegrationPointDropout.html">Dropout</a></li>
    <li><a class="dropdown-item" href="../articles/IntegrationPointTreatmentSelection.html">Treatment Selection</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="../articles/ExampleOutline.html">Examples</a></li>
<li class="nav-item"><a class="nav-link" href="../reference/index.html">References</a></li>
<li class="nav-item"><a class="nav-link" href="../articles/ContributingToCyneRgy.html">Contribute</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/Cytel-Inc/CyneRgy"><span class="fa fa-github fa-lg"></span></a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-lightswitch" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true" aria-label="Light switch"><span class="fa fa-sun"></span></button>
  <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="dropdown-lightswitch">
<li><button class="dropdown-item" data-bs-theme-value="light"><span class="fa fa-sun"></span> Light</button></li>
    <li><button class="dropdown-item" data-bs-theme-value="dark"><span class="fa fa-moon"></span> Dark</button></li>
    <li><button class="dropdown-item" data-bs-theme-value="auto"><span class="fa fa-adjust"></span> Auto</button></li>
  </ul>
</li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Dual Endpoints - Patient Simulation</h1>
                        <h4 data-toc-skip class="author">Gabriel Potvin,
Anoop Singh Rawat, Pradip Maske</h4>
            
            <h4 data-toc-skip class="date">October 31, 2025</h4>
      

      <div class="d-none name"><code>DEPPatientSimulation.Rmd</code></div>
    </div>

    
    
<div class="alert alert-primary" role="alert">
<p style="margin-bottom:0">
This example is related to the
<a href="IntegrationPointResponseDual.html" class="alert-link"><strong>Integration
Point: Response - Dual Endpoints</strong></a>. Click the link for setup
instructions, variable details, and additional information about this
integration point.
</p>
</div>
<div class="alert alert-danger" role="alert">
To try this example, create a new project in East Horizon using the
following configuration:
<ul style="margin-bottom:0">
<li>
<strong>Study objective:</strong> Two Arm Confirmatory
</li>
<li>
<strong>Number of endpoints:</strong> Dual Endpoints
</li>
<li>
<strong>Endpoint type:</strong> <em>Time-to-Event - Time-to-Event</em>
</li>
<li>
<strong>Task:</strong> Explore
</li>
<li>
<strong>Response Input Method:</strong> Hazard Rate
</li>
</ul>
</div>
<div class="section level2">
<h2 id="introduction">Introduction<a class="anchor" aria-label="anchor" href="#introduction"></a>
</h2>
<p>The following examples illustrate how to integrate new patient
outcome simulation (<em>response</em>) capabilities into East Horizon
using R functions in the context of 2-arm clinical trials with dual
endpoints. The first example shows how to simulate correlated dual
time-to-event (TTE) endpoints.</p>
<p>In the <a href="https://github.com/Cytel-Inc/CyneRgy/tree/main/inst/Examples/DEPOutcomePatientSimulation/R" class="external-link">R
directory of this example</a> you will find the following R files:</p>
<ol style="list-style-type: decimal">
<li><p><a href="https://github.com/Cytel-Inc/CyneRgy/blob/main/inst/Examples/DEPOutcomePatientSimulation/R/SimulatePatientOutcomeDEPSurvSurvSingleHazardPiece.R" class="external-link">SimulatePatientOutcomeDEPSurvSurvSingleHazardPiece.R</a>
- Contains the implementation for simulating correlated TTE outcomes
under a single-piece hazard assumption for both endpoints.</p></li>
<li><p><a href="https://github.com/Cytel-Inc/CyneRgy/blob/main/inst/Examples/DEPOutcomePatientSimulation/R/SimulatePatientOutcomeDEPSurvBinSingleHazardPiece.R" class="external-link">SimulatePatientOutcomeDEPSurvBinSingleHazardPiece.R</a>
- Contains the implementation for simulating correlated TTE and binary
outcomes under a single-piece hazard assumption for both
endpoints.</p></li>
</ol>
</div>
<div class="section level2">
<h2 id="example-1---simulate-correlated-tte-tte-dual-endpoints">Example 1 - Simulate Correlated TTE-TTE Dual Endpoints<a class="anchor" aria-label="anchor" href="#example-1---simulate-correlated-tte-tte-dual-endpoints"></a>
</h2>
<div class="alert alert-primary" role="alert">
<p style="margin-bottom:0">
This example is related to this R file:
<a href="https://github.com/Cytel-Inc/CyneRgy/blob/main/inst/Examples/DEPOutcomePatientSimulation/R/SimulatePatientOutcomeDEPSurvSurvSingleHazardPiece.R" class="external-link alert-link">SimulatePatientOutcomeDEPSurvSurvSingleHazardPiece.R</a>
</p>
</div>
<p>The function <em>SimulatePatientOutcomeSurvSurv.DEP</em> simulates
patient-level outcomes for a dual-endpoint design where both endpoints
are time-to-event variables. Each endpoint is modeled using an
exponential survival distribution, with arm-specific hazard rates
supplied through the East Horizon interface.</p>
<p>To simulate correlated endpoints, the function first maps the
qualitative correlation level (e.g., <em>Weak Positive</em>, <em>Strong
Negative</em>) to a numerical correlation coefficient and constructs the
corresponding 2×2 correlation matrix. A Cholesky decomposition of this
matrix is then used to generate pairs of correlated standard normal
variables for each simulated subject. These correlated normal deviates
are transformed into uniform and subsequently exponential variates using
the specified hazard rates for each arm, producing one survival time per
endpoint per subject.</p>
<p>This process results in two correlated vectors of event times (one
for each endpoint) returned within a structured response list compatible
with East Horizon. This simulation framework is useful for evaluating
trial designs that incorporate dual TTE endpoints, such as joint success
criteria or composite decision rules based on both survival
outcomes.</p>
<p>The figure below illustrates where this example fits within the R
integration points of Cytel products, accompanied by a flowchart
outlining the general steps performed by the R code.</p>
<p><img src="DEPPatientSimulation_files/figure-html/unnamed-chunk-3-1.png" width="700"></p>
</div>
<div class="section level2">
<h2 id="example-2">Example 2<a class="anchor" aria-label="anchor" href="#example-2"></a>
</h2>
<div class="alert alert-primary" role="alert">
<p style="margin-bottom:0">
This example is related to this R file:
<a href="https://github.com/Cytel-Inc/CyneRgy/blob/main/inst/Examples/DEPOutcomePatientSimulation/R/SimulatePatientOutcomeDEPSurvBinSingleHazardPiece.R" class="external-link alert-link">SimulatePatientOutcomeDEPSurvBinSingleHazardPiece.R</a>
</p>
</div>
<p>The function
<em>SimulatePatientOutcomeDEPSurvBinSingleHazardPiece</em> simulates
patient-level outcomes in studies that involve two correlated endpoints
where the first endpoint is time-to-event and the second is binary. This
configuration is commonly encountered in oncology or chronic disease
trials in which survival time is evaluated alongside a binary endpoint
like response or remission status.</p>
<p>The simulation begins by translating the qualitative correlation
level provided in East Horizon (e.g., <em>Weak Positive</em>, <em>Strong
Negative</em>) into a corresponding numerical correlation coefficient.
From this coefficient, a 2×2 correlation matrix is constructed and
decomposed using the Cholesky method. Two sets of correlated standard
normal variables are then generated, one for each simulated subject.</p>
<p>The first normal deviate is used to simulate survival times. Each
subject’s time-to-event value is derived by transforming the correlated
normal variable into a uniform distribution and then into an exponential
distribution governed by the arm-specific hazard rate provided through
East Horizon. The second deviate is converted into a binary outcome
using an inverse probability transformation. The expected proportion of
responders in each arm determines the threshold on the normal scale
above which a subject is classified as a non-responder and below which
they are classified as a responder.</p>
<p>This process results in two correlated outcome vectors, one
containing simulated survival times and the other containing binary
responses. These results are assembled into a structured response list
that East Horizon can process.</p>
<p>The figure below illustrates where this example fits within the R
integration points of Cytel products, accompanied by a flowchart
outlining the general steps performed by the R code.</p>
<p><img src="DEPPatientSimulation_files/figure-html/unnamed-chunk-4-1.png" width="700"></p>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by J. Kyle Wathen, Valeria A. G. Mazzanti, Gabriel Potvin.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer>
</div>





  </body>
</html>

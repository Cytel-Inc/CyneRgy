<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>2 Arm, Time-To-Event Outcome - Patient Simulation • CyneRgy</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.4.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="2 Arm, Time-To-Event Outcome - Patient Simulation">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">CyneRgy</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.1.3</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../index.html">Home</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-examples" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Examples</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-examples">
<li><a class="dropdown-item" href="../articles/ExampleOutline.html">Example List</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>Patient Simulation</h6></li>
    <li><a class="dropdown-item" href="../articles/2ArmNormalOutcomePatientSimulationDescription.html">2-Arm, Normal Outcome</a></li>
    <li><a class="dropdown-item" href="../articles/2ArmTimeToEventOutcomePatientSimulationDescription.html">2-Arm, Time-to-Event Outcome</a></li>
    <li><a class="dropdown-item" href="../articles/2ArmBinaryOutcomePatientSimulation.html">2-Arm, Binary Outcome</a></li>
    <li><a class="dropdown-item" href="../articles/2ArmNormalRepeatedMeasuresResponseGeneration.html">2-Arm, Repeated Measure</a></li>
    <li><a class="dropdown-item" href="../articles/ChildhoodAnxiety.html">Childhood Anxiety Trial</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>Analysis</h6></li>
    <li><a class="dropdown-item" href="../articles/2ArmNormalOutcomeAnalysisDescription.html">2-Arm, Normal Outcome</a></li>
    <li><a class="dropdown-item" href="../articles/2ArmTimeToEventOutcomeAnalysisDescription.html">2-Arm, Time-To-Event Outcome</a></li>
    <li><a class="dropdown-item" href="../articles/2ArmBinaryOutcomeAnalysisDescription.html">2-Arm, Binary Outcome</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>Treatment Selection</h6></li>
    <li><a class="dropdown-item" href="../articles/TreatmentSelectionDescription.html">Binary Outcome</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>Advanced Examples</h6></li>
    <li><a class="dropdown-item" href="../articles/AssuranceConsecutiveStudies.html">Bayesian Assurance of Consecutive Studies</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>Other Integration Points</h6></li>
    <li><a class="dropdown-item" href="../articles/GeneratePoissonArrival.html">Poisson Arrival Times</a></li>
    <li><a class="dropdown-item" href="../articles/PatientDropout.html">Patient Dropout</a></li>
    <li><a class="dropdown-item" href="../articles/PatientRandomization.html">Patient Randomization</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="../reference/index.html">References</a></li>
<li class="nav-item"><a class="nav-link" href="../articles/ContibutingToCyneRgy.html">Contribute</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/Cytel-Inc/CyneRgy"><span class="fa fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>2 Arm, Time-To-Event Outcome - Patient Simulation</h1>
                        <h4 data-toc-skip class="author">Valeria A. G.
Mazzanti, J. Kyle Wathen</h4>
            
            <h4 data-toc-skip class="date">November 14, 2024</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/Cytel-Inc/CyneRgy/blob/HEAD/vignettes/2ArmTimeToEventOutcomePatientSimulationDescription.Rmd" class="external-link"><code>vignettes/2ArmTimeToEventOutcomePatientSimulationDescription.Rmd</code></a></small>
      <div class="d-none name"><code>2ArmTimeToEventOutcomePatientSimulationDescription.Rmd</code></div>
    </div>

    
    
<div class="section level3">
<h3 id="introduction">Introduction<a class="anchor" aria-label="anchor" href="#introduction"></a>
</h3>
<p>The following examples demonstrate how to add new patient outcome
simulation capabilities into East using an R function in the context of
a two-arm trial with a time-to-event patient outcome. For all examples,
we assume the trial design consists of standard of care and an
experimental treatment and the trial design assumes patient outcomes are
normally distributed.</p>
<p>Once CyneRgy is installed, you can load this example in RStudio with
the following commands:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">CyneRgy</span><span class="fu">::</span><span class="fu"><a href="../reference/RunExample.html">RunExample</a></span><span class="op">(</span> <span class="st">"2ArmTimeToEventOutcomePatientSimulation"</span> <span class="op">)</span></span></code></pre></div>
<p>Running the command above will load the RStudio project in
RStudio.</p>
<p><strong>East Workbook</strong>: <a href="https://github.com/Cytel-Inc/CyneRgy/blob/main/inst/Examples/2ArmTimeToEventOutcomePatientSimulation/2ArmTimeToEventOutcomePatientSimulation.cywx" class="external-link">2ArmTimeToEventOutcomePatientSimulation.cywx</a></p>
<p><strong>RStudio Project File</strong>: <a href="https://github.com/Cytel-Inc/CyneRgy/blob/main/inst/Examples/2ArmTimeToEventOutcomePatientSimulation/2ArmTimeToEventOutcomePatientSimulation.Rproj" class="external-link">2ArmTimeToEventOutcomePatientSimulation.Rproj</a></p>
<p>In the <a href="https://github.com/Cytel-Inc/CyneRgy/tree/main/inst/Examples/2ArmTimeToEventOutcomePatientSimulation/RCode" class="external-link">RCode
directory of this example</a> you will find the following R files:</p>
<ol style="list-style-type: decimal">
<li><p><a href="https://github.com/Cytel-Inc/CyneRgy/blob/main/inst/Examples/2ArmTimeToEventOutcomePatientSimulation/RCode/SimulatePatientSurvivalWeibull.R" class="external-link">SimulatePatientSurvivalWeibull.R</a>
- This file provides an example R function to simulate patient
time-to-event data from a Weibull distribution.</p></li>
<li><p><a href="https://github.com/Cytel-Inc/CyneRgy/blob/main/inst/Examples/2ArmTimeToEventOutcomePatientSimulation/RCode/SimulatePatientSurvivalMixtureExponentials.R" class="external-link">SimulatePatientSurvivalMixtureExponentials.R</a>
- This file provides an example R function to simulate patient data from
a mixture of exponential distributions. The mixture is based on having
any number of patient groups in the study where each group has a
different exponential distribution for simulating the time-to-event
from.</p></li>
</ol>
</div>
<div class="section level3">
<h3 id="example-1---simulation-of-patient-time-to-event-data-from-a-weibull-distribution">Example 1 - Simulation of Patient Time-To-Event Data from a Weibull
Distribution<a class="anchor" aria-label="anchor" href="#example-1---simulation-of-patient-time-to-event-data-from-a-weibull-distribution"></a>
</h3>
<p>In this example, an R function is provided to help explore how to
simulate patient data that follows a pattern where hazards and hazard
ratio are changing over time and the impact on expected study power.</p>
<p>To replace the patient outcome simulation, the function used is
SimulatePatientSurvivalWeibull. The required user-specified parameters
are the shape and scale for each arm’s distribution, specifically,
dShapeCtrl, dShapeExp, dScaleCtrl, and dScaleExp.</p>
<ol style="list-style-type: decimal">
<li>Example 1.1 – Assume that the difference in risk of death for
patients in the control arm compared to the risk of death for patients
in the experimental arm remains the same over time. The time to death or
progression of patients is simulated from a Weibull distribution with
the shape and scale for each arm provided in East and sent to R. For
this example, the required parameters are the shape and scale for each
arm, specifically, dShapeCtrl = 1.0, dShapeExp = 1.0, dScaleCtrl =
17.31, and dScaleExp = 23.08. The Scale parameters are computed based on
the median Survival time for each arm. This example is included to
demonstrate using an R function if the data is simulated as it is in
East without the use of an R function.</li>
</ol>
<p><img src="2ArmTimeToEventOutcomePatientSimulationDescription_files/figure-html/unnamed-chunk-4-1.png" width="700"><img src="2ArmTimeToEventOutcomePatientSimulationDescription_files/figure-html/unnamed-chunk-4-2.png" width="700"></p>
<ol start="2" style="list-style-type: decimal">
<li>Example 1.2 – This function assumes that the hazard of death or
progression is increasing over time for both arms. The control arm’s
hazards, however, increase at a slower rate than the experimental arm’s
hazards. The time to death or progression of patients is simulated from
a Weibull distribution with the shape and scale for each arm provided in
East and sent to R. For this example, the required parameters are the
shape and scale for each arm, specifically, dShapeCtrl = 3.0, dShapeExp
= 4.0, dScaleCtrl = 13.56, and dScaleExp = 17.54. This example is
included to demonstrate using an R function if the data is simulated
differently to how it is in East without the use of an R function.</li>
</ol>
<p><img src="2ArmTimeToEventOutcomePatientSimulationDescription_files/figure-html/unnamed-chunk-5-1.png" width="700"><img src="2ArmTimeToEventOutcomePatientSimulationDescription_files/figure-html/unnamed-chunk-5-2.png" width="700"></p>
<ol start="3" style="list-style-type: decimal">
<li>Example 1.3 – This example is similar to the previous example,
however, this function assumes that both the arms’ hazards are
decreasing over time. The control arm’s hazards decrease at a slower
rate than the experimental arm’s hazards. The time to death or
progression of patients is simulated from a Weibull distribution with
the shape and scale for each arm provided in East and sent to R. For
this example, the required parameters are the shape and scale for each
arm, specifically, dShapeCtrl = 0.7, dShapeExp = 0.8, dScaleCtrl =
20.26, and dScaleExp = 25.30. This example is included to demonstrate
using an R function if the data is simulated differently to how it is in
East without the use of an R function.</li>
</ol>
<p><img src="2ArmTimeToEventOutcomePatientSimulationDescription_files/figure-html/unnamed-chunk-6-1.png" width="700"><img src="2ArmTimeToEventOutcomePatientSimulationDescription_files/figure-html/unnamed-chunk-6-2.png" width="700"></p>
</div>
<div class="section level3">
<h3 id="example-2---simulation-of-patient-time-to-event-data-from-a-mixture-of-distributions">Example 2 - Simulation of Patient Time-To-Event Data from a Mixture
of Distributions<a class="anchor" aria-label="anchor" href="#example-2---simulation-of-patient-time-to-event-data-from-a-mixture-of-distributions"></a>
</h3>
<p>Simulate patient data from a mixture of exponential distributions.
The mixture is based on having any number of patient subgroups in the
study where each group has a different Exponential distribution for
simulating the time-to-event (TTE) from. In the East workbook, four
simulations are conducted. The simulations are:</p>
<ol style="list-style-type: decimal">
<li>Both subgroups have the same HR = 0.75 with same median TTE, e.g.,
subgroup has no impact.</li>
<li>25% of patients are in subgroup 1, with a median TTE lower than in
group 2 and both subgroups have a HR = 0.75.</li>
<li>25% of patients are in subgroup 1 with an HR = 0.8 and subgroup 2
has a HR = 0.75.</li>
<li>40% of patients are in subgroup 1 with an HR = 0.8 and subgroup 2
has a HR = 0.75.</li>
</ol>
<p>The intent of the example is to illustrate the impact that the
patient subgroup may have on the operating characteristics of the
design.</p>
</div>
<div class="section level2">
<h2 id="notes-about-the-exponential-and-weibull-distributions">Notes about the Exponential and Weibull Distributions<a class="anchor" aria-label="anchor" href="#notes-about-the-exponential-and-weibull-distributions"></a>
</h2>
<p>In R the Weibull distribution has a shape parameter
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>α</mi><annotation encoding="application/x-tex">\alpha</annotation></semantics></math>
and scale parameter,
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>σ</mi><annotation encoding="application/x-tex">\sigma</annotation></semantics></math>
and has a density given by:</p>
<p><math display="block" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>f</mi><mrow><mo stretchy="true" form="prefix">(</mo><mi>x</mi><mo stretchy="true" form="postfix">)</mo></mrow><mo>=</mo><mfrac><mi>α</mi><mi>σ</mi></mfrac><msup><mrow><mo stretchy="true" form="prefix">(</mo><mfrac><mi>x</mi><mi>σ</mi></mfrac><mo stretchy="true" form="postfix">)</mo></mrow><mrow><mi>α</mi><mo>−</mo><mn>1</mn></mrow></msup><msup><mi>e</mi><mrow><mi>−</mi><msup><mrow><mo stretchy="true" form="prefix">(</mo><mfrac><mi>x</mi><mi>σ</mi></mfrac><mo stretchy="true" form="postfix">)</mo></mrow><mi>α</mi></msup></mrow></msup></mrow><annotation encoding="application/x-tex">
f(x) = \frac{\alpha}{\sigma}\left(\frac{x}{\sigma}\right)^{\alpha-1} e^{-\left(\frac{x}{\sigma}\right)^\alpha}
</annotation></semantics></math></p>
<p>The hazard function is:</p>
<p><math display="block" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>h</mi><mrow><mo stretchy="true" form="prefix">(</mo><mi>x</mi><mo stretchy="true" form="postfix">)</mo></mrow><mo>=</mo><mfrac><mi>α</mi><mi>σ</mi></mfrac><msup><mrow><mo stretchy="true" form="prefix">(</mo><mfrac><mi>x</mi><mi>σ</mi></mfrac><mo stretchy="true" form="postfix">)</mo></mrow><mrow><mi>α</mi><mo>−</mo><mn>1</mn></mrow></msup></mrow><annotation encoding="application/x-tex">
h(x) = \frac{\alpha}{\sigma}\left( \frac{x}{\sigma}\right)^{\alpha-1}
</annotation></semantics></math></p>
<p>In R, an Exponential distribution has a rate parameter,
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>λ</mi><annotation encoding="application/x-tex">\lambda</annotation></semantics></math>
and has density given by:</p>
<p><math display="block" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>f</mi><mrow><mo stretchy="true" form="prefix">(</mo><mi>x</mi><mo stretchy="true" form="postfix">)</mo></mrow><mo>=</mo><mi>λ</mi><msup><mi>e</mi><mrow><mi>−</mi><mi>λ</mi><mi>x</mi></mrow></msup></mrow><annotation encoding="application/x-tex">
f(x) = \lambda e^{-\lambda x}
</annotation></semantics></math> The hazard function is constant:</p>
<p><math display="block" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>h</mi><mrow><mo stretchy="true" form="prefix">(</mo><mi>x</mi><mo stretchy="true" form="postfix">)</mo></mrow><mo>=</mo><mi>λ</mi></mrow><annotation encoding="application/x-tex">
h(x) = \lambda
</annotation></semantics></math></p>
<p>The exponential distribution is a special case of the Weibull and can
be obtained by setting the shape parameter,
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>α</mi><mo>=</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">\alpha=1</annotation></semantics></math>,
and scale parameter,
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>σ</mi><mo>=</mo><mfrac><mn>1</mn><mi>λ</mi></mfrac></mrow><annotation encoding="application/x-tex">\sigma = \frac{1}{\lambda}</annotation></semantics></math>.
Functions to help with computation of Weibull parameters are found in <a href="https://github.com/Cytel-Inc/CyneRgy/blob/main/inst/Examples/2ArmTimeToEventOutcomePatientSimulation/RCode/HelperFunctionsWeibull.R" class="external-link">HelperFunctionsWeibull.R</a>.</p>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by J. Kyle Wathen, Valeria A. G. Mazzanti.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer>
</div>





  </body>
</html>

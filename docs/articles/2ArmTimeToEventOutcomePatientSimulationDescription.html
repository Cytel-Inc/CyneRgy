<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="CyneRgy">
<title>2 Arm Time-To-Event Outcome Patient Simulation â€¢ CyneRgy</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.11/clipboard.min.js" integrity="sha512-7O5pXpc0oCRrxk8RUfDYFgn0nO1t+jLuIOQdOMRp4APB7uZ4vSjspzp5y6YDtDs4VzUSTbWzBFZ/LKJhnyFOKw==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="2 Arm Time-To-Event Outcome Patient Simulation">
<meta property="og:description" content="CyneRgy">
<meta property="og:image" content="https://Cytel-Inc.github.io/CyneRgy/logo.png">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light" data-bs-theme="light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">CyneRgy</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.1.0</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="../index.html">Home</a>
</li>
<li class="active nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-examples">Examples</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-examples">
    <a class="dropdown-item" href="../articles/ExampleOutline.html">Example List</a>
    <div class="dropdown-divider"></div>
    <h6 class="dropdown-header" data-toc-skip>Patient Simulation</h6>
    <a class="dropdown-item" href="../articles/2ArmNormalOutcomePatientSimulationDescription.html">2-Arm, Normal Outcome</a>
    <a class="dropdown-item" href="../articles/2ArmTimeToEventOutcomePatientSimulationDescription.html">2-Arm, Time-to-Event Outcome</a>
    <a class="dropdown-item" href="../articles/2ArmBinaryOutcomePatientSimulation.html">2-Arm, Binary Outcome</a>
    <a class="dropdown-item" href="../articles/2ArmNormalRepeatedMeasuresResponseGeneration.html">2-Arm, Repeated Measure</a>
    <div class="dropdown-divider"></div>
    <h6 class="dropdown-header" data-toc-skip>Analysis</h6>
    <a class="dropdown-item" href="../articles/2ArmNormalOutcomeAnalysisDescription.html">2-Arm, Normal Outcome</a>
    <a class="dropdown-item" href="../articles/2ArmTimeToEventOutcomeAnalysisDescription.html">2-Arm, Time-To-Event Outcome</a>
    <a class="dropdown-item" href="../articles/2ArmBinaryOutcomeAnalysisDescription.html">2-Arm, Binary</a>
    <div class="dropdown-divider"></div>
    <h6 class="dropdown-header" data-toc-skip>Treatment Selection</h6>
    <a class="dropdown-item" href="../articles/TreatmentSelectionDescription.html">Binary Outcome</a>
    <div class="dropdown-divider"></div>
    <h6 class="dropdown-header" data-toc-skip>Advanced Examples</h6>
    <a class="dropdown-item" href="../articles/AssuranceConsecutiveStudies.html">Bayesian Assurance of Consecutive Studies</a>
    <div class="dropdown-divider"></div>
    <h6 class="dropdown-header" data-toc-skip>Other Integration Points</h6>
    <a class="dropdown-item" href="../articles/GeneratePoissonArrival.html">Poisson Arrival Times</a>
    <a class="dropdown-item" href="../articles/PatientDropout.html">Patient Dropout</a>
    <a class="dropdown-item" href="../articles/PatientRandomization.html">Patient Randomization</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">References</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../articles/ContibutingToCyneRgy.html">Contribute</a>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/Cytel-Inc/CyneRgy">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>2 Arm Time-To-Event Outcome Patient Simulation</h1>
                        <h4 data-toc-skip class="author">Valeria A. G.
Mazzanti, J. Kyle Wathen</h4>
            
            <h4 data-toc-skip class="date">July 16, 2024</h4>
      
      
      <div class="d-none name"><code>2ArmTimeToEventOutcomePatientSimulationDescription.Rmd</code></div>
    </div>

    
    
<div class="section level2">
<h2 id="two-arm-time-to-event-outcome---patient-outcome-simulation-examples">Two Arm, Time-To-Event Outcome - Patient Outcome Simulation
Examples<a class="anchor" aria-label="anchor" href="#two-arm-time-to-event-outcome---patient-outcome-simulation-examples"></a>
</h2>
<p>The following examples demonstrate how to add new patient outcome
simulation capabilities into East using an R function in the context of
a two-arm trial with a time-to-event patient outcome. For all examples,
we assume the trial design consists of standard of care and an
experimental treatment and the trial design assumes patient outcomes are
normally distributed.</p>
<p><strong>East Workbook</strong>:
2ArmTimeToEventOutcomePatientSimulation.cywx</p>
<p><strong>R Studio Project File</strong>:
2ArmTimeToEventOutcomePatientSimulation.Rproj.</p>
<p>In the RCode directory of this example you will find the following R
files:</p>
<ol style="list-style-type: decimal">
<li><p>SimulatePatientSurvivalWeibull.R - This file provides an example
R function to simulate patient time-to-event data from a Weibull
distribution.</p></li>
<li><p>SimulatePatientSurvivalMixtureExponential.R - This file provides
an example R function to simulate patient data from a mixture of
exponential distributions. The mixture is based on having any number of
patient groups in the study where each group has a different Exponential
distribution for simulating the time-to-event from.</p></li>
</ol>
<p>In addition, if you would like to experiment with these examples to
and would like some code to help you get started, we have provided
fill-in-the-blank type code files in the FillInTheBlankRCode
directory.</p>
<div class="section level3">
<h3 id="example-1---simulation-of-patient-time-to-event-data-from-a-weibull-distribution">Example 1 - Simulation of Patient Time-To-Event Data from a Weibull
Distribution<a class="anchor" aria-label="anchor" href="#example-1---simulation-of-patient-time-to-event-data-from-a-weibull-distribution"></a>
</h3>
<p>In this example, an R function is provided to help explore how to
simulate patient data that follows a pattern where hazards and hazard
ratio are changing over time and the impact on expected study power.</p>
<p>To replace the patient outcome simulation, the function used is
SimulatePatientSurvivalWeibull and can be found in
RCode/SimulatePatientSurvivalWeibull.R. The required User Specified
parameters are the shape and scale for each armâ€™s distribution,
specifically, dShapeCtrl, dShapeExp, dScaleCtrl, and dScaleExp.</p>
<ol style="list-style-type: decimal">
<li>Example 1.1 â€“ Assume that the difference in risk of death for
patients in the control arm compared to the risk of death for patients
in the experimental arm remains the same over time. The time to death or
progression of patients is simulated from a Weibull distribution with
the shape and scale for each arm provided in East and sent to R. For
this example, the required parameters are the shape and scale for each
arm, specifically, dShapeCtrl = 1.0, dShapeExp = 1.0, dScaleCtrl =
17.31, and dScaleExp = 23.08. The Scale parameters are computed based on
the median Survival time for each arm. This example is included to
demonstrate using an R function if the data is simulated as it is in
East without the use of an R function.</li>
</ol>
<p><img src="2ArmTimeToEventOutcomePatientSimulationDescription_files/figure-html/unnamed-chunk-3-1.png" width="700"><img src="2ArmTimeToEventOutcomePatientSimulationDescription_files/figure-html/unnamed-chunk-3-2.png" width="700"></p>
<ol start="2" style="list-style-type: decimal">
<li>Example 1.2 â€“ This function assumes that the hazard of death or
progression is increasing over time for both arms. The control armâ€™s
hazards, however, increase at a slower rate than the experimental armâ€™s
hazards. The time to death or progression of patients is simulated from
a Weibull distribution with the shape and scale for each arm provided in
East and sent to R. For this example, the required parameters are the
shape and scale for each arm, specifically, dShapeCtrl = 3.0, dShapeExp
= 4.0, dScaleCtrl = 13.56, and dScaleExp = 17.54. This example is
included to demonstrate using an R function if the data is simulated
differently to how it is in East without the use of an R function.</li>
</ol>
<p><img src="2ArmTimeToEventOutcomePatientSimulationDescription_files/figure-html/unnamed-chunk-4-1.png" width="700"><img src="2ArmTimeToEventOutcomePatientSimulationDescription_files/figure-html/unnamed-chunk-4-2.png" width="700"></p>
<ol start="3" style="list-style-type: decimal">
<li>Example 1.3 â€“ This example is similar to the previous example,
however, this function assumes that both the armsâ€™ hazards are
decreasing over time. The control armâ€™s hazards decrease at a slower
rate than the experimental armâ€™s hazards. The time to death or
progression of patients is simulated from a Weibull distribution with
the shape and scale for each arm provided in East and sent to R. For
this example, the required parameters are the shape and scale for each
arm, specifically, dShapeCtrl = 0.7, dShapeExp = 0.8, dScaleCtrl =
20.26, and dScaleExp = 25.30. This example is included to demonstrate
using an R function if the data is simulated differently to how it is in
East without the use of an R function.<br><img src="2ArmTimeToEventOutcomePatientSimulationDescription_files/figure-html/unnamed-chunk-5-1.png" width="700"><img src="2ArmTimeToEventOutcomePatientSimulationDescription_files/figure-html/unnamed-chunk-5-2.png" width="700">
</li>
</ol>
</div>
<div class="section level3">
<h3 id="example-2---simulation-of-patient-time-to-event-data-from-a-mixture-of-distributions">Example 2 - Simulation of Patient Time-To-Event Data from a Mixture
of Distributions<a class="anchor" aria-label="anchor" href="#example-2---simulation-of-patient-time-to-event-data-from-a-mixture-of-distributions"></a>
</h3>
<p>Simulate patient data from a mixture of exponential distributions.
The mixture is based on having any number of patient subgroups in the
study where each group has a different Exponential distribution for
simulating the time-to-event (TTE) from. In the East workbook, four
simulations are conducted. The simulations are: 1. both subgroups have
the same HR=0.75 with same median TTE, eg subgroup has no impact, 2. 25%
of patients are in subgroup 1, with a median TTE lower than in group 2
and both subgroups have a HR = 0.75, 3. 25% of patients are in subgroup
1 with an HR = 0.8 and subgroup 2 has a HR = 0.75, 4. 40% of patients
are in subgroup 1 with an HR = 0.8 and subgroup 2 has a HR = 0.75.</p>
<p>The intent of the example is to illustrate the impact of the patient
subgroup may have on the operating characteristics of the design.</p>
</div>
</div>
<div class="section level2">
<h2 id="notes-about-the-exponential-and-weibull-distributions">Notes about the Exponential and Weibull Distributions<a class="anchor" aria-label="anchor" href="#notes-about-the-exponential-and-weibull-distributions"></a>
</h2>
<p>In R the Weibull distribution has a shape parameter <span class="math inline">\(\alpha\)</span> and scale parameter, <span class="math inline">\(\sigma\)</span> and has a density given by</p>
<p><span class="math display">\[
f(x) = \frac{\alpha}{\sigma}\left(\frac{x}{\sigma}\right)^{\alpha-1}
e^{-\left(\frac{x}{\sigma}\right)^\alpha}
\]</span></p>
<p>The hazard function is <span class="math display">\[
h(x) = \frac{\alpha}{\sigma}\left( \frac{x}{\sigma}\right)^{\alpha-1}
\]</span></p>
<p>In R, an Exponential distribution has a rate parameter, <span class="math inline">\(\lambda\)</span> and has density given by</p>
<p><span class="math display">\[
f(x) = \lambda e^{-\lambda x}
\]</span> The hazard function is constant <span class="math display">\[
h(x) = \lambda
\]</span> The Exponential distribution is a special case of the Weibull
and can be obtained by setting the shape parameter, <span class="math inline">\(\alpha=1\)</span>, and scale parameter, <span class="math inline">\(\sigma = \frac{1}{\lambda}\)</span>. Functions to
help with computation of Weibull parameters are found in <a href="https://github.com/Cytel-Inc/CyneRgy/blob/Dev/inst/Examples/2ArmTimeToEventOutcomePatientSimulation/RCode/HelperFunctionsWeibull.R" class="external-link">HelperFunctionsWeibull.R</a></p>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by J. Kyle Wathen, Valeria A. G. Mazzanti.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.9.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>

<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>2-Arm - Randomization of Subjects • CyneRgy</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<script src="../lightswitch.js"></script><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.4.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="2-Arm - Randomization of Subjects">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.11/dist/katex.min.css" integrity="sha384-nB0miv6/jRmo5UMMR1wu3Gz6NLsoTkbqJghGIsx//Rlm+ZU03BU6SQNC66uf4l5+" crossorigin="anonymous">
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.11/dist/katex.min.js" integrity="sha384-7zkQWkzuo3B5mTepMUcHkMB5jZaolc2xDwL6VFqjFALcbeS9Ggm/Yr2r3Dy4lfFg" crossorigin="anonymous"></script><script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.11/dist/contrib/auto-render.min.js" integrity="sha384-43gviWU0YVjaDtb/GhzOouOXtZMP/7XUzwPTstBeZFe/+rCMvRwr4yROQP43s0Xk" crossorigin="anonymous" onload="renderMathInElement(document.body);"></script>
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top " aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">CyneRgy</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.1.3</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../index.html">Home</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-getting-started" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Getting Started</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-getting-started">
<li><a class="dropdown-item" href="../articles/Overview.html">Overview</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>Integration Specific Points</h6></li>
    <li><a class="dropdown-item" href="../articles/IntegrationPointInitialization.html">Initialization</a></li>
    <li><a class="dropdown-item" href="../articles/IntegrationPointAnalysis.html">Analysis (Test Statistic)</a></li>
    <li><a class="dropdown-item" href="../articles/IntegrationPointEnrollment.html">Enrollment (Arrival Times)</a></li>
    <li><a class="dropdown-item" href="../articles/IntegrationPointRandomization.html">Randomization (Assignment of Subjects)</a></li>
    <li><a class="dropdown-item" href="../articles/IntegrationPointResponse.html">Response (Patient Simulation)</a></li>
    <li><a class="dropdown-item" href="../articles/IntegrationPointDropout.html">Dropout</a></li>
    <li><a class="dropdown-item" href="../articles/IntegrationPointTreatmentSelection.html">Treatment Selection</a></li>
  </ul>
</li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-examples" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Examples</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-examples">
<li><a class="dropdown-item" href="../articles/ExampleOutline.html">Examples Outline</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>Patient Simulation</h6></li>
    <li><a class="dropdown-item" href="../articles/2ArmNormalOutcomePatientSimulationDescription.html">2-Arm, Normal Outcome</a></li>
    <li><a class="dropdown-item" href="../articles/2ArmTimeToEventOutcomePatientSimulationDescription.html">2-Arm, Time-to-Event Outcome</a></li>
    <li><a class="dropdown-item" href="../articles/2ArmBinaryOutcomePatientSimulation.html">2-Arm, Binary Outcome</a></li>
    <li><a class="dropdown-item" href="../articles/2ArmNormalRepeatedMeasuresResponseGeneration.html">2-Arm, Repeated Measure</a></li>
    <li><a class="dropdown-item" href="../articles/ChildhoodAnxiety.html">Childhood Anxiety Trial</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>Analysis</h6></li>
    <li><a class="dropdown-item" href="../articles/2ArmNormalOutcomeAnalysisDescription.html">2-Arm, Normal Outcome</a></li>
    <li><a class="dropdown-item" href="../articles/2ArmTimeToEventOutcomeAnalysisDescription.html">2-Arm, Time-To-Event Outcome</a></li>
    <li><a class="dropdown-item" href="../articles/2ArmBinaryOutcomeAnalysisDescription.html">2-Arm, Binary Outcome</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>Treatment Selection</h6></li>
    <li><a class="dropdown-item" href="../articles/TreatmentSelectionDescription.html">Binary Outcome</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>Advanced Examples</h6></li>
    <li><a class="dropdown-item" href="../articles/AssuranceConsecutiveStudies.html">Bayesian Assurance of Consecutive Studies</a></li>
    <li><a class="dropdown-item" href="../articles/ProbabilitySuccessDualEndpointsPFSOS.html">Probability of Success for Dual Endpoints (PFS &amp; OS)</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>Other Integration Points</h6></li>
    <li><a class="dropdown-item" href="../articles/GeneratePoissonArrival.html">Poisson Arrival Times</a></li>
    <li><a class="dropdown-item" href="../articles/PatientDropout.html">Patient Dropout</a></li>
    <li><a class="dropdown-item" href="../articles/PatientRandomization.html">Patient Randomization</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="../reference/index.html">References</a></li>
<li class="nav-item"><a class="nav-link" href="../articles/ContibutingToCyneRgy.html">Contribute</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/Cytel-Inc/CyneRgy"><span class="fa fa-github fa-lg"></span></a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-lightswitch" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true" aria-label="Light switch"><span class="fa fa-sun"></span></button>
  <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="dropdown-lightswitch">
<li><button class="dropdown-item" data-bs-theme-value="light"><span class="fa fa-sun"></span> Light</button></li>
    <li><button class="dropdown-item" data-bs-theme-value="dark"><span class="fa fa-moon"></span> Dark</button></li>
    <li><button class="dropdown-item" data-bs-theme-value="auto"><span class="fa fa-adjust"></span> Auto</button></li>
  </ul>
</li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>2-Arm - Randomization of Subjects</h1>
                        <h4 data-toc-skip class="author">Shubham
Lahoti</h4>
            
            <h4 data-toc-skip class="date">April 28, 2025</h4>
      

      <div class="d-none name"><code>PatientRandomization.Rmd</code></div>
    </div>

    
    
<div class="alert alert-primary" role="alert">
<p style="margin-bottom:0">
These examples are related to the <strong>Integration Point:
Randomization</strong>.
<a href="IntegrationPointRandomization.html" class="alert-link">Click
here for more information about this integration point.</a>
</p>
</div>
<div class="section level2">
<h2 id="introduction">Introduction<a class="anchor" aria-label="anchor" href="#introduction"></a>
</h2>
<p>The following examples illustrate how to integrate new custom
randomization methods and control how subjects are assigned to
designated arms into East Horizon or East using R functions in the
context of a two-arm trial.</p>
<p>Once CyneRgy is installed, you can load this example in RStudio with
the following commands:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">CyneRgy</span><span class="fu">::</span><span class="fu"><a href="../reference/RunExample.html">RunExample</a></span><span class="op">(</span> <span class="st">"RandomizeSubjects"</span> <span class="op">)</span></span></code></pre></div>
<p>Running the command above will load the RStudio project in
RStudio.</p>
<p><strong>RStudio Project File</strong>: <a href="https://github.com/Cytel-Inc/CyneRgy/blob/main/inst/Examples/RandomizeSubjects/RandomizeSubjects.Rproj" class="external-link">RandomizeSubjects.Rproj</a></p>
<p>In the <a href="https://github.com/Cytel-Inc/CyneRgy/tree/main/inst/Examples/RandomizeSubjects/R" class="external-link">R
directory of this example</a> you will find the following R files:</p>
<ol style="list-style-type: decimal">
<li><p><a href="https://github.com/Cytel-Inc/CyneRgy/blob/main/inst/Examples/RandomizeSubjects/R/RandomizationSubjectsUsingUniformDistribution.R" class="external-link">RandomizationSubjectsUsingUniformDistribution.R</a>
- Contains a function named
<em>RandomizationSubjectsUsingUniformDistribution</em> to demonstrate
the R code necessary for Example 1 as described below.</p></li>
<li><p><a href="https://github.com/Cytel-Inc/CyneRgy/blob/main/inst/Examples/RandomizeSubjects/R/RandomizationSubjectsUsingSampleFunctionInR.R" class="external-link">RandomizationSubjectsUsingSampleFunctionInR.R</a>
- Contains a function named
<em>RandomizationSubjectsUsingSampleFunctionInR</em> to demonstrate the
R code necessary for Example 2 as described below.</p></li>
<li><p><a href="https://github.com/Cytel-Inc/CyneRgy/blob/main/inst/Examples/RandomizeSubjects/R/BlockRandomizationSubjectsUsingRPackage.R" class="external-link">BlockRandomizationSubjectsUsingRPackage.R</a>
- Contains a function named
<em>BlockRandomizationSubjectsUsingRPackage</em> to demonstrate the R
code necessary for Example 3 as described below.</p></li>
<li><p><a href="https://github.com/Cytel-Inc/CyneRgy/blob/main/inst/Examples/RandomizeSubjects/R/LoadRandomizeR.R" class="external-link">LoadrandomizeR.R</a>
- This file is used to install the <em>randomizeR</em> package for
execution of Block Randomization in R.</p></li>
</ol>
</div>
<div class="section level2">
<h2 id="example-1---randomize-subjects-usings-uniform-distribution">Example 1 - Randomize Subjects Usings Uniform Distribution<a class="anchor" aria-label="anchor" href="#example-1---randomize-subjects-usings-uniform-distribution"></a>
</h2>
<div class="alert alert-primary" role="alert">
<p style="margin-bottom:0">
This example is related to this R file:
<a href="https://github.com/Cytel-Inc/CyneRgy/blob/main/inst/Examples/RandomizeSubjects/R/RandomizationSubjectsUsingUniformDistribution.R" class="external-link alert-link">RandomizationSubjectsUsingUniformDistribution.R</a>
</p>
</div>
<p>The R function <em>RandomizationSubjectsUsingUniformDistribution</em>
randomly assigns subjects to one of two arms using a uniform
distribution.</p>
<p>This function does not use any user-defined parameters, but uses
parameters specified in East Horizon. Refer to the table below for more
information.</p>
<table class="table">
<colgroup>
<col width="38%">
<col width="38%">
<col width="23%">
</colgroup>
<thead><tr class="header">
<th><strong>Name of the parameter in East Horizon</strong></th>
<th><strong>Where to find the parameter in East Horizon</strong></th>
<th><strong>Name of the variable in the R script</strong></th>
</tr></thead>
<tbody><tr class="odd">
<td>Allocation Ratio</td>
<td>Design Card</td>
<td><math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>A</mi><mi>l</mi><mi>l</mi><mi>o</mi><mi>c</mi><mi>R</mi><mi>a</mi><mi>t</mi><mi>i</mi><mi>o</mi></mrow><annotation encoding="application/x-tex">AllocRatio</annotation></semantics></math></td>
</tr></tbody>
</table>
<p>Steps:</p>
<ol style="list-style-type: decimal">
<li>Generate a random number
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>u</mi><annotation encoding="application/x-tex">u</annotation></semantics></math>
from a
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>U</mi><mi>n</mi><mi>i</mi><mi>f</mi><mi>o</mi><mi>r</mi><mi>m</mi><mrow><mo stretchy="true" form="prefix">(</mo><mn>0</mn><mo>,</mo><mn>1</mn><mo stretchy="true" form="postfix">)</mo></mrow></mrow><annotation encoding="application/x-tex">Uniform(0,1)</annotation></semantics></math>
distribution.</li>
<li>Define
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>p</mi><annotation encoding="application/x-tex">p</annotation></semantics></math>
as the allocation fraction for the control arm, with
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>1</mn><mo>−</mo><mi>p</mi></mrow><annotation encoding="application/x-tex">1 - p</annotation></semantics></math>
as the allocation fraction for the treatment arm.</li>
<li>If
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>u</mi><mo>≤</mo><mi>p</mi></mrow><annotation encoding="application/x-tex">u \leq p</annotation></semantics></math>,
assign the subject to the control arm; otherwise, assign them to the
treatment arm.</li>
<li>Ensure that the total sample size equals the sum of subjects in the
control and treatment arms.</li>
</ol>
<p>The figure below illustrates where this example fits within the R
integration points of Cytel products, accompanied by a flowchart
outlining the general steps performed by the R code.</p>
<p><img src="PatientRandomization_files/figure-html/unnamed-chunk-4-1.png" width="700"></p>
</div>
<div class="section level2">
<h2 id="example-2---randomize-subjects-using-sample-function">Example 2 - Randomize Subjects Using Sample Function<a class="anchor" aria-label="anchor" href="#example-2---randomize-subjects-using-sample-function"></a>
</h2>
<div class="alert alert-primary" role="alert">
<p style="margin-bottom:0">
This example is related to this R file:
<a href="https://github.com/Cytel-Inc/CyneRgy/blob/main/inst/Examples/RandomizeSubjects/R/RandomizationSubjectsUsingSampleFunctionInR.R" class="external-link alert-link">RandomizationSubjectsUsingSampleFunctionInR.R</a>
</p>
</div>
<p>The R function <em>RandomizationSubjectsUsingSampleFunctionInR</em>
uses the <code><a href="https://rdrr.io/r/base/sample.html" class="external-link">sample()</a></code> function in R to randomly assign patients
to the control and treatment arms.</p>
<p>This function does not use any user-defined parameters, but uses
parameters specified in East Horizon. Refer to the table below for more
information.</p>
<table class="table">
<colgroup>
<col width="38%">
<col width="38%">
<col width="23%">
</colgroup>
<thead><tr class="header">
<th><strong>Name of the parameter in East Horizon</strong></th>
<th><strong>Where to find the parameter in East Horizon</strong></th>
<th><strong>Name of the variable in the R script</strong></th>
</tr></thead>
<tbody><tr class="odd">
<td>Allocation Ratio</td>
<td>Design Card</td>
<td><math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>A</mi><mi>l</mi><mi>l</mi><mi>o</mi><mi>c</mi><mi>R</mi><mi>a</mi><mi>t</mi><mi>i</mi><mi>o</mi></mrow><annotation encoding="application/x-tex">AllocRatio</annotation></semantics></math></td>
</tr></tbody>
</table>
<p>Steps:</p>
<ol style="list-style-type: decimal">
<li>Let
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>p</mi><annotation encoding="application/x-tex">p</annotation></semantics></math>
be the allocation fraction for the control arm, with
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>1</mn><mo>−</mo><mi>p</mi></mrow><annotation encoding="application/x-tex">1 - p</annotation></semantics></math>
as the allocation fraction for the treatment arm.</li>
<li>Compute the expected sample sizes (rounded) for both arms using the
allocation fraction and total sample size.</li>
<li>Randomly assign subject indices to the control and treatment arms
using the <code><a href="https://rdrr.io/r/base/sample.html" class="external-link">sample()</a></code> function in R.</li>
<li>Create a vector of zeros with size equal to the total number of
subjects
(<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>N</mi><mi>u</mi><mi>m</mi><mi>S</mi><mi>u</mi><mi>b</mi></mrow><annotation encoding="application/x-tex">NumSub</annotation></semantics></math>),
then replace the zeros with ones for indices corresponding to the
treatment arm.</li>
</ol>
<p>The figure below illustrates where this example fits within the R
integration points of Cytel products, accompanied by a flowchart
outlining the general steps performed by the R code.</p>
<p><img src="PatientRandomization_files/figure-html/unnamed-chunk-5-1.png" width="700"></p>
</div>
<div class="section level2">
<h2 id="example-3---randomize-subjects-using-randomizer-package">Example 3 - Randomize Subjects Using randomizeR Package<a class="anchor" aria-label="anchor" href="#example-3---randomize-subjects-using-randomizer-package"></a>
</h2>
<div class="alert alert-primary" role="alert">
<p style="margin-bottom:0">
This example is related to this R file:
<a href="https://github.com/Cytel-Inc/CyneRgy/blob/main/inst/Examples/RandomizeSubjects/R/BlockRandomizationSubjectsUsingRPackage.R" class="external-link alert-link">BlockRandomizationSubjectsUsingRPackage.R</a>
</p>
</div>
<p>The function <em>BlockRandomizationSubjectsUsingRPackage.R</em> uses
the <code><a href="https://rdrr.io/pkg/randomizeR/man/pbrPar.html" class="external-link">randomizeR::pbrPar()</a></code> function from the
<strong>randomizeR</strong> package to perform block randomization.</p>
<p>In small-sample studies, imbalances between groups can be minimized
by using restricted randomization. This approach ensures that treatment
groups are allocated in the desired proportions while maintaining
randomness.</p>
<p>The <strong>permuted block randomization</strong> technique divides
study participants into blocks, within which subjects are randomly
assigned to treatment groups. This method ensures that the desired
allocation proportions are exactly maintained within each block while
keeping the order of assignments random.</p>
<p>Refer to the table below for the definitions of the user-defined
parameters used in this example.</p>
<table class="table">
<colgroup>
<col width="33%">
<col width="66%">
</colgroup>
<thead><tr class="header">
<th><strong>User parameter</strong></th>
<th><strong>Definition</strong></th>
</tr></thead>
<tbody>
<tr class="odd">
<td><strong>BlockSize1</strong></td>
<td>Size of the first block for the randomization process.</td>
</tr>
<tr class="even">
<td><strong>BlockSize2</strong></td>
<td>Size of the second block for the randomization process.</td>
</tr>
<tr class="odd">
<td><em>…</em></td>
<td>Block sizes for additional blocks follow the same format,
incrementing the block number (e.g., BlockSize3, BlockSize4, etc.).</td>
</tr>
</tbody>
</table>
<p>This function also uses parameters specified in East Horizon. Refer
to the tables below for more information.</p>
<table class="table">
<colgroup>
<col width="38%">
<col width="38%">
<col width="23%">
</colgroup>
<thead><tr class="header">
<th><strong>Name of the parameter in East Horizon</strong></th>
<th><strong>Where to find the parameter in East Horizon</strong></th>
<th><strong>Name of the variable in the R script</strong></th>
</tr></thead>
<tbody><tr class="odd">
<td>Allocation Ratio</td>
<td>Design Card</td>
<td><math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>A</mi><mi>l</mi><mi>l</mi><mi>o</mi><mi>c</mi><mi>R</mi><mi>a</mi><mi>t</mi><mi>i</mi><mi>o</mi></mrow><annotation encoding="application/x-tex">AllocRatio</annotation></semantics></math></td>
</tr></tbody>
</table>
<p>The figure below illustrates where this example fits within the R
integration points of Cytel products, accompanied by a flowchart
outlining the general steps performed by the R code.</p>
<p><img src="PatientRandomization_files/figure-html/unnamed-chunk-6-1.png" width="700"></p>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by J. Kyle Wathen, Valeria A. G. Mazzanti.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer>
</div>





  </body>
</html>

<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Bayesian Assurance, Continuous Outcome • CyneRgy</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="96x96" href="../favicon-96x96.png">
<link rel="icon" type="”image/svg+xml”" href="../favicon.svg">
<link rel="apple-touch-icon" sizes="180x180" href="../apple-touch-icon.png">
<link rel="icon" sizes="any" href="../favicon.ico">
<link rel="manifest" href="../site.webmanifest">
<script src="../lightswitch.js"></script><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/Source_Sans_3-0.4.9/font.css" rel="stylesheet">
<link href="../deps/Source_Code_Pro-0.4.9/font.css" rel="stylesheet">
<link href="../deps/font-awesome-6.4.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Bayesian Assurance, Continuous Outcome">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.11/dist/katex.min.css" integrity="sha384-nB0miv6/jRmo5UMMR1wu3Gz6NLsoTkbqJghGIsx//Rlm+ZU03BU6SQNC66uf4l5+" crossorigin="anonymous">
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.11/dist/katex.min.js" integrity="sha384-7zkQWkzuo3B5mTepMUcHkMB5jZaolc2xDwL6VFqjFALcbeS9Ggm/Yr2r3Dy4lfFg" crossorigin="anonymous"></script><script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.11/dist/contrib/auto-render.min.js" integrity="sha384-43gviWU0YVjaDtb/GhzOouOXtZMP/7XUzwPTstBeZFe/+rCMvRwr4yROQP43s0Xk" crossorigin="anonymous" onload="renderMathInElement(document.body);"></script>
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top " aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">CyneRgy</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.1.8</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../index.html">Home</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-getting-started" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Getting Started</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-getting-started">
<li><a class="dropdown-item" href="../articles/Overview.html">Overview</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>Integration Specific Points</h6></li>
    <li><a class="dropdown-item" href="../articles/IntegrationPointInitialization.html">Initialization</a></li>
    <li><a class="dropdown-item" href="../articles/IntegrationPointAnalysis.html">Analysis (Test Statistic)</a></li>
    <li><a class="dropdown-item" href="../articles/IntegrationPointEnrollment.html">Enrollment (Arrival Times)</a></li>
    <li><a class="dropdown-item" href="../articles/IntegrationPointRandomization.html">Randomization</a></li>
    <li><a class="dropdown-item" href="../articles/IntegrationPointResponse.html">Response (Patient Simulation)</a></li>
    <li><a class="dropdown-item" href="../articles/IntegrationPointDropout.html">Dropout</a></li>
    <li><a class="dropdown-item" href="../articles/IntegrationPointTreatmentSelection.html">Treatment Selection</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="../articles/ExampleOutline.html">Examples</a></li>
<li class="nav-item"><a class="nav-link" href="../reference/index.html">References</a></li>
<li class="nav-item"><a class="nav-link" href="../articles/ContributingToCyneRgy.html">Contribute</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/Cytel-Inc/CyneRgy"><span class="fa fa-github fa-lg"></span></a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-lightswitch" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true" aria-label="Light switch"><span class="fa fa-sun"></span></button>
  <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="dropdown-lightswitch">
<li><button class="dropdown-item" data-bs-theme-value="light"><span class="fa fa-sun"></span> Light</button></li>
    <li><button class="dropdown-item" data-bs-theme-value="dark"><span class="fa fa-moon"></span> Dark</button></li>
    <li><button class="dropdown-item" data-bs-theme-value="auto"><span class="fa fa-adjust"></span> Auto</button></li>
  </ul>
</li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Bayesian Assurance, Continuous Outcome</h1>
                        <h4 data-toc-skip class="author">J. Kyle Wathen
and Laurent Spiess</h4>
            
            <h4 data-toc-skip class="date">October 31, 2025</h4>
      

      <div class="d-none name"><code>BayesianAssuranceContinuous.Rmd</code></div>
    </div>

    
    
<div class="alert alert-primary" role="alert">
<p style="margin-bottom:0">
This example is related to both the
<a href="IntegrationPointResponseContinuous.html" class="alert-link"><strong>Integration
Point: Response - Continuous Outcome</strong></a> and the
<a href="IntegrationPointAnalysisContinuous.html" class="alert-link"><strong>Integration
Point: Analysis - Continuous Outcome</strong></a>. Click the links for
setup instructions, variable details, and additional information about
the integration points.
</p>
</div>
<div class="alert alert-danger" role="alert">
To try this example, create a new project in East Horizon using the
following configuration:
<ul style="margin-bottom:0">
<li>
<strong>Study objective:</strong> Two Arm Confirmatory
</li>
<li>
<strong>Number of endpoints:</strong> Single Endpoint
</li>
<li>
<strong>Endpoint type:</strong> Continuous Outcome
</li>
<li>
<strong>Task:</strong> Explore
</li>
</ul>
</div>
<div class="alert alert-warning" role="alert">
<p style="margin-bottom:0">
<strong>Note:</strong> This example is compatible with both Fixed Sample
and Group Sequential statistical designs. The R code automatically
detects whether interim look information (<em>LookInfo</em>) is
available and adjusts the analysis parameters accordingly.
</p>
</div>
<div class="section level2">
<h2 id="introduction">Introduction<a class="anchor" aria-label="anchor" href="#introduction"></a>
</h2>
<p>The intent of the following examples is to demonstrate the
computation of Bayesian assurance, or probability of success, through
the integration of R with Cytel products. The examples feature a two-arm
trial with normally distributed outcomes, using a <strong>mixture of
normal distributions</strong> prior to compute assurance.</p>
<p>The scenarios covered are as follows:</p>
<ol style="list-style-type: decimal">
<li>Fixed sample design using a mixture of normal distributions to
compute Bayesian assurance.</li>
<li>Group sequential design, expanding on Example 1, with an interim
analysis for futility based on Bayesian predictive probability.</li>
</ol>
<p>Once CyneRgy is installed, you can load this example in RStudio with
the following commands:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">CyneRgy</span><span class="fu">::</span><span class="fu"><a href="../reference/RunExample.html">RunExample</a></span><span class="op">(</span> <span class="st">"BayesianAssuranceContinuous"</span> <span class="op">)</span></span></code></pre></div>
<p>Running the command above will load the RStudio project in
RStudio.</p>
<p>In the <a href="https://github.com/Cytel-Inc/CyneRgy/tree/main/inst/Examples/BayesianAssuranceContinuous/R" class="external-link">R
directory of this example</a> you will find the R files used in the
examples:</p>
<ol style="list-style-type: decimal">
<li>
<a href="https://github.com/Cytel-Inc/CyneRgy/blob/main/inst/Examples/BayesianAssuranceContinuous/R/SimulatePatientOutcomeNormalAssurance.R" class="external-link">SimulatePatientOutcomeNormalAssurance.R</a>
- Functions to simulate patient outcomes under a normal distribution
informed by mixture priors.</li>
<li>
<a href="https://github.com/Cytel-Inc/CyneRgy/blob/main/inst/Examples/BayesianAssuranceContinuous/R/AnalyzeUsingBayesianNormals.R" class="external-link">AnalyzeUsingBayesianNormals.R</a>
- Implements Bayesian analysis of simulated outcomes using normal
priors.</li>
</ol>
</div>
<div class="section level2">
<h2 id="example-1---fixed-sample-design">Example 1 - Fixed Sample Design<a class="anchor" aria-label="anchor" href="#example-1---fixed-sample-design"></a>
</h2>
<p>This example considers a two-arm fixed sample design with normally
distributed outcomes
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>Y</mi><annotation encoding="application/x-tex">Y</annotation></semantics></math>,
with 80 patients per treatment arm. It demonstrates how to customize the
<strong>Response (Patient Simulation)</strong> element of East Horizon’s
simulation to simulate a mixture of normal distributions, and the
<strong>Analysis</strong> element of East Horizon’s simulation to
compute the probability of success.</p>
<p>By integrating an R function into the Analysis integration point,
users can evaluate the frequentist operating characteristics of the
Bayesian design in East Horizon. Additionally, by modifying the Response
integration point, the simulation will incorporate Bayesian assurance.
Specifically, an R function first samples from the assurance prior, then
generates the patient data. The resulting power from this simulation
reflects the Bayesian assurance, assuming the two-component prior.</p>
<p>Often, it is important to examine the posterior distributions of both
the observed and true treatment differences following a Go decision.
These posterior distributions provide valuable insights for planning
subsequent study phases and assessing potential risks. The process of
obtaining these posterior distributions is detailed in the next
example.</p>
<p>The figure below illustrates where this example fits within the R
integration points of Cytel products, accompanied by flowcharts
outlining the general steps performed by the R code.</p>
<p><img src="BayesianAssuranceContinuous_files/figure-html/unnamed-chunk-4-1.png" width="700"></p>
<div class="section level3">
<h3 id="response-patient-simulation-integration-point">Response (Patient Simulation) Integration Point<a class="anchor" aria-label="anchor" href="#response-patient-simulation-integration-point"></a>
</h3>
<div class="alert alert-primary" role="alert">
<p style="margin-bottom:0">
This endpoint is related to this R file:
<a href="https://github.com/Cytel-Inc/CyneRgy/blob/main/inst/Examples/BayesianAssuranceContinuous/R/SimulatePatientOutcomeNormalAssurance.R" class="external-link alert-link">SimulatePatientOutcomeNormalAssurance.R</a>
</p>
</div>
<p>This function simulates patient-level outcomes within a
<strong>Bayesian assurance framework</strong>, using a
<strong>two-component mixture prior</strong> to reflect uncertainty
about the true treatment effect. It allows for assessing the probability
of trial success (assurance) under uncertainty about the true treatment
effect. Information generated from this simulation will be used later
for the <a href="#analysis-integration-point">Analysis Integration
Point</a>.</p>
<p>In this example, the true treatment effect
(<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>μ</mi><mi>E</mi></msub><mo>−</mo><msub><mi>μ</mi><mi>S</mi></msub></mrow><annotation encoding="application/x-tex">\mu_E - \mu_S</annotation></semantics></math>)
is sampled from a mixture of two normal priors:</p>
<ul>
<li>25% weight on
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>𝒩</mi><mrow><mo stretchy="true" form="prefix">(</mo><mn>0</mn><mo>,</mo><msup><mn>0.05</mn><mn>2</mn></msup><mo stretchy="true" form="postfix">)</mo></mrow></mrow><annotation encoding="application/x-tex">\mathcal{N}(0, 0.05^2)</annotation></semantics></math>.</li>
<li>75% weight on
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>𝒩</mi><mrow><mo stretchy="true" form="prefix">(</mo><mn>0.7</mn><mo>,</mo><msup><mn>0.3</mn><mn>2</mn></msup><mo stretchy="true" form="postfix">)</mo></mrow></mrow><annotation encoding="application/x-tex">\mathcal{N}(0.7, 0.3^2)</annotation></semantics></math>.</li>
</ul>
<p>The control mean is fixed, while the experimental mean is computed as
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>d</mi><mtext mathvariant="normal">MeanCtrl</mtext><mo>+</mo><mtext mathvariant="normal">treatment effect</mtext></mrow><annotation encoding="application/x-tex">d\text{MeanCtrl} + \text{treatment effect}</annotation></semantics></math>.
Each patient’s response is then simulated from a normal distribution
corresponding to their assigned treatment group, with standard
deviations defined separately for each arm.</p>
<p><img src="BayesianAssuranceContinuous_files/figure-html/unnamed-chunk-5-1.png" width="700"></p>
<p>Refer to the table below for the definitions and values of the
user-defined parameters used in this example.</p>
<table class="table">
<colgroup>
<col width="20%">
<col width="60%">
<col width="20%">
</colgroup>
<thead><tr class="header">
<th><strong>User parameter</strong></th>
<th><strong>Definition</strong></th>
<th><strong>Value</strong></th>
</tr></thead>
<tbody>
<tr class="odd">
<td><strong>dWeight1</strong></td>
<td>Weight of prior component 1.</td>
<td>0.25</td>
</tr>
<tr class="even">
<td><strong>dWeight2</strong></td>
<td>Weight of prior component 2.</td>
<td>0.75</td>
</tr>
<tr class="odd">
<td><strong>dMean1</strong></td>
<td>Mean of prior component 1.</td>
<td>0</td>
</tr>
<tr class="even">
<td><strong>dMean2</strong></td>
<td>Mean of prior component 2.</td>
<td>0.7</td>
</tr>
<tr class="odd">
<td><strong>dSD1</strong></td>
<td>Standard deviation of prior component 1.</td>
<td>0.05</td>
</tr>
<tr class="even">
<td><strong>dSD2</strong></td>
<td>Standard deviation of prior component 2.</td>
<td>0.3</td>
</tr>
<tr class="odd">
<td><strong>dMeanCtrl</strong></td>
<td>Mean of control arm (experimental arm will be sampled).</td>
<td>0</td>
</tr>
<tr class="even">
<td><strong>dSDCtrl</strong></td>
<td>Standard deviation for control arm.</td>
<td>1.9</td>
</tr>
<tr class="odd">
<td><strong>dSDExp</strong></td>
<td>Standard deviation for experimental arm.</td>
<td>1.9</td>
</tr>
</tbody>
</table>
</div>
<div class="section level3">
<h3 id="analysis-integration-point">Analysis Integration Point<a class="anchor" aria-label="anchor" href="#analysis-integration-point"></a>
</h3>
<div class="alert alert-primary" role="alert">
<p style="margin-bottom:0">
This endpoint is related to this R file:
<a href="https://github.com/Cytel-Inc/CyneRgy/blob/main/inst/Examples/BayesianAssuranceContinuous/R/AnalyzeUsingBayesianNormals.R" class="external-link alert-link">AnalyzeUsingBayesianNormals.R</a>
</p>
</div>
<p>This function evaluates the <strong>posterior probability</strong>
that the experimental treatment arm is better than the control arm by
more than a clinically meaningful threshold, and returns a Go/No-Go
decision based on a cutoff
(<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><msub><mi>P</mi><mi>U</mi></msub><annotation encoding="application/x-tex">P_U</annotation></semantics></math>).
It uses information from the simulation that is generated by the <a href="#response-patient-simulation-integration-point">Response</a>
element of East Horizon’s simulation, explained above.</p>
<p>For patients receiving treatment
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>j</mi><mo>∈</mo><mo stretchy="false" form="prefix">{</mo><mtext mathvariant="normal">S</mtext><mo>,</mo><mtext mathvariant="normal">E</mtext><mo stretchy="false" form="postfix">}</mo></mrow><annotation encoding="application/x-tex">j \in \{\text{S}, \text{E}\}</annotation></semantics></math>
(S = standard/control, E = experimental), we assume the outcomes
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>Y</mi><mo>∼</mo><mi>𝒩</mi><mrow><mo stretchy="true" form="prefix">(</mo><msub><mi>μ</mi><mi>j</mi></msub><mo>,</mo><msup><mi>σ</mi><mn>2</mn></msup><mo stretchy="true" form="postfix">)</mo></mrow></mrow><annotation encoding="application/x-tex">Y \sim \mathcal{N}(\mu_j, \sigma^2)</annotation></semantics></math>,
where
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><msub><mi>μ</mi><mi>j</mi></msub><annotation encoding="application/x-tex">\mu_j</annotation></semantics></math>
is an unknown mean and
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><msup><mi>σ</mi><mn>2</mn></msup><annotation encoding="application/x-tex">\sigma^2</annotation></semantics></math>
is a known, fixed variance.</p>
<p>We assume <em>a priori</em> that:</p>
<p><math display="block" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>μ</mi><mi>j</mi></msub><mo>∼</mo><mi>𝒩</mi><mrow><mo stretchy="true" form="prefix">(</mo><msub><mi>θ</mi><mi>j</mi></msub><mo>,</mo><msubsup><mi>τ</mi><mi>j</mi><mn>2</mn></msubsup><mo>=</mo><msup><mn>1000</mn><mn>2</mn></msup><mo stretchy="true" form="postfix">)</mo></mrow><mo>,</mo><mspace width="1.0em"></mspace><mi>j</mi><mo>∈</mo><mo stretchy="false" form="prefix">{</mo><mtext mathvariant="normal">S</mtext><mo>,</mo><mtext mathvariant="normal">E</mtext><mo stretchy="false" form="postfix">}</mo></mrow><annotation encoding="application/x-tex">
\mu_j \sim \mathcal{N}(\theta_j, \tau_j^2 = 1000^2), \quad j \in \{\text{S}, \text{E}\}
</annotation></semantics></math></p>
<p>After observing
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>n</mi><annotation encoding="application/x-tex">n</annotation></semantics></math>
patients on treatment
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>j</mi><annotation encoding="application/x-tex">j</annotation></semantics></math>,
the posterior distribution of
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><msub><mi>μ</mi><mi>j</mi></msub><annotation encoding="application/x-tex">\mu_j</annotation></semantics></math>
becomes:</p>
<p><math display="block" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>μ</mi><mi>j</mi></msub><mo>∣</mo><mover><mi>y</mi><mo accent="true">‾</mo></mover><mo>∼</mo><mi>𝒩</mi><mrow><mo stretchy="true" form="prefix">(</mo><msubsup><mi>θ</mi><mi>j</mi><mo>*</mo></msubsup><mo>,</mo><msubsup><mi>τ</mi><mi>j</mi><mrow><mn>2</mn><mo>*</mo></mrow></msubsup><mo stretchy="true" form="postfix">)</mo></mrow></mrow><annotation encoding="application/x-tex">
\mu_j \mid \bar{y} \sim \mathcal{N}(\theta_j^*, \tau_j^{2*})
</annotation></semantics></math></p>
<p>where:</p>
<p><math display="block" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msubsup><mi>θ</mi><mi>j</mi><mo>*</mo></msubsup><mo>=</mo><mfrac><mrow><mfrac><msub><mi>θ</mi><mi>j</mi></msub><msubsup><mi>τ</mi><mi>j</mi><mn>2</mn></msubsup></mfrac><mo>+</mo><mfrac><mrow><mi>n</mi><mover><mi>y</mi><mo accent="true">‾</mo></mover></mrow><msup><mi>σ</mi><mn>2</mn></msup></mfrac></mrow><mrow><mfrac><mn>1</mn><msubsup><mi>τ</mi><mi>j</mi><mn>2</mn></msubsup></mfrac><mo>+</mo><mfrac><mi>n</mi><msup><mi>σ</mi><mn>2</mn></msup></mfrac></mrow></mfrac><mo>,</mo><mspace width="1.0em"></mspace><mtext mathvariant="normal">and</mtext><mspace width="1.0em"></mspace><mfrac><mn>1</mn><msubsup><mi>τ</mi><mi>j</mi><mrow><mn>2</mn><mo>*</mo></mrow></msubsup></mfrac><mo>=</mo><mfrac><mn>1</mn><msubsup><mi>τ</mi><mi>j</mi><mn>2</mn></msubsup></mfrac><mo>+</mo><mfrac><mi>n</mi><msup><mi>σ</mi><mn>2</mn></msup></mfrac></mrow><annotation encoding="application/x-tex">
\theta_j^* = \frac{\frac{\theta_j}{\tau_j^2} + \frac{n \bar{y}}{\sigma^2}}{\frac{1}{\tau_j^2} + \frac{n}{\sigma^2}}, \quad \text{and} \quad
\frac{1}{\tau_j^{2*}} = \frac{1}{\tau_j^2} + \frac{n}{\sigma^2}
</annotation></semantics></math></p>
<p>At the conclusion of the study, the posterior probability that the
experimental arm exceeds the control arm by more than the minimum
acceptable value (MAV) is calculated as:</p>
<p><math display="block" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>ρ</mi><mo>=</mo><mo>Pr</mo><mrow><mo stretchy="true" form="prefix">(</mo><msub><mi>μ</mi><mi>E</mi></msub><mo>&gt;</mo><msub><mi>μ</mi><mi>S</mi></msub><mo>+</mo><mtext mathvariant="normal">MAV</mtext><mo>∣</mo><mtext mathvariant="normal">data</mtext><mo stretchy="true" form="postfix">)</mo></mrow></mrow><annotation encoding="application/x-tex">
\rho = \Pr(\mu_E &gt; \mu_S + \text{MAV} \mid \text{data})
</annotation></semantics></math></p>
<p>The decision rule is as follows:</p>
<ul>
<li>If
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>ρ</mi><mo>&gt;</mo><msub><mi>P</mi><mi>U</mi></msub><mo>→</mo></mrow><annotation encoding="application/x-tex">\rho &gt; P_U \rightarrow</annotation></semantics></math>
Go.</li>
<li>If
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>ρ</mi><mo>≤</mo><msub><mi>P</mi><mi>U</mi></msub><mo>→</mo></mrow><annotation encoding="application/x-tex">\rho \leq P_U \rightarrow</annotation></semantics></math>
No-Go.</li>
</ul>
<p>Refer to the table below for the definitions and values of the
user-defined parameters used in this example.</p>
<table class="table">
<colgroup>
<col width="27%">
<col width="54%">
<col width="18%">
</colgroup>
<thead><tr class="header">
<th><strong>User parameter</strong></th>
<th><strong>Definition</strong></th>
<th><strong>Value</strong></th>
</tr></thead>
<tbody>
<tr class="odd">
<td><strong>dPriorMeanCtrl</strong></td>
<td>Prior mean for control arm.</td>
<td>0</td>
</tr>
<tr class="even">
<td><strong>dPriorStdDevCtrl</strong></td>
<td>Prior standard deviation for control arm.</td>
<td>1000</td>
</tr>
<tr class="odd">
<td><strong>dPriorMeanExp</strong></td>
<td>Prior mean for experimental arm.</td>
<td>0</td>
</tr>
<tr class="even">
<td><strong>dPriorStdDevExp</strong></td>
<td>Prior standard deviation for experimental arm.</td>
<td>1000</td>
</tr>
<tr class="odd">
<td><strong>dSigma</strong></td>
<td>Known sampling standard deviation.</td>
<td>1.9</td>
</tr>
<tr class="even">
<td><strong>dMAV</strong></td>
<td>Minimum Acceptable Value (clinically meaningful difference).</td>
<td>0.8</td>
</tr>
<tr class="odd">
<td><strong>dPU</strong></td>
<td>Go threshold (posterior probability cutoff).</td>
<td>0.8</td>
</tr>
<tr class="even">
<td><strong>dPUFutility</strong></td>
<td>Threshold probability of futility stopping. If the predictive
probability of a No Go decision at the end exceeds this value, the trial
is stopped early for futility.</td>
<td>0.8</td>
</tr>
</tbody>
</table>
</div>
<div class="section level3">
<h3 id="results">Results<a class="anchor" aria-label="anchor" href="#results"></a>
</h3>
<p>The probability of a Go is 15.3% and the probability of a No-Go is
84.7%.</p>
<p><img src="BayesianAssuranceContinuous_files/figure-html/unnamed-chunk-7-1.png" width="700"></p>
</div>
</div>
<div class="section level2">
<h2 id="example-2---group-sequential-design">Example 2 - Group Sequential Design<a class="anchor" aria-label="anchor" href="#example-2---group-sequential-design"></a>
</h2>
<p>This example follows the same structure and uses the same code as
Example 1. However, it introduces an interim analysis (IA) for futility
assessment when outcomes are observed for 50% of the enrolled patients.
The futility decision is based on the <strong>Bayesian predictive
probability</strong> of a No-Go decision at the end of the trial.
Specifically, if the predictive probability suggests that a No-Go is
likely at the final analysis, the trial is stopped early for futility.
If not, the trial continues to the final analysis (FA), which uses the
same R code. The in Analysis element of East Horizon’s simulation is
thus customized to handle this case as explained below.</p>
<p>The figure below illustrates where this example fits within the R
integration points of Cytel products, accompanied by flowcharts
outlining the general steps performed by the R code.</p>
<p><img src="BayesianAssuranceContinuous_files/figure-html/unnamed-chunk-8-1.png" width="700"></p>
<div class="section level3">
<h3 id="response-patient-simulation-integration-point-1">Response (Patient Simulation) Integration Point<a class="anchor" aria-label="anchor" href="#response-patient-simulation-integration-point-1"></a>
</h3>
<div class="alert alert-primary" role="alert">
<p style="margin-bottom:0">
This endpoint is related to this R file:
<a href="https://github.com/Cytel-Inc/CyneRgy/blob/main/inst/Examples/BayesianAssuranceContinuous/R/SimulatePatientOutcomeNormalAssurance.R" class="external-link alert-link">SimulatePatientOutcomeNormalAssurance.R</a>
</p>
</div>
<p>The function for the Response Integration Point is the same as in <a href="#response-patient-simulation-integration-point">Example 1</a>.
Refer to the table below for the definitions and values of the
user-defined parameters used in this example.</p>
<table class="table">
<colgroup>
<col width="20%">
<col width="60%">
<col width="20%">
</colgroup>
<thead><tr class="header">
<th><strong>User parameter</strong></th>
<th><strong>Definition</strong></th>
<th><strong>Value</strong></th>
</tr></thead>
<tbody>
<tr class="odd">
<td><strong>dWeight1</strong></td>
<td>Weight of prior component 1.</td>
<td>0.25</td>
</tr>
<tr class="even">
<td><strong>dWeight2</strong></td>
<td>Weight of prior component 2.</td>
<td>0.75</td>
</tr>
<tr class="odd">
<td><strong>dMean1</strong></td>
<td>Mean of prior component 1.</td>
<td>0</td>
</tr>
<tr class="even">
<td><strong>dMean2</strong></td>
<td>Mean of prior component 2.</td>
<td>0.7</td>
</tr>
<tr class="odd">
<td><strong>dSD1</strong></td>
<td>Standard deviation of prior component 1.</td>
<td>0.05</td>
</tr>
<tr class="even">
<td><strong>dSD2</strong></td>
<td>Standard deviation of prior component 2.</td>
<td>0.3</td>
</tr>
<tr class="odd">
<td><strong>dMeanCtrl</strong></td>
<td>Mean of control arm (experimental arm will be sampled).</td>
<td>0</td>
</tr>
<tr class="even">
<td><strong>dSDCtrl</strong></td>
<td>Standard deviation for control arm.</td>
<td>1.9</td>
</tr>
<tr class="odd">
<td><strong>dSDExp</strong></td>
<td>Standard deviation for experimental arm.</td>
<td>1.9</td>
</tr>
</tbody>
</table>
</div>
<div class="section level3">
<h3 id="analysis-integration-point-1">Analysis Integration Point<a class="anchor" aria-label="anchor" href="#analysis-integration-point-1"></a>
</h3>
<div class="alert alert-primary" role="alert">
<p style="margin-bottom:0">
This endpoint is related to this R file:
<a href="https://github.com/Cytel-Inc/CyneRgy/blob/main/inst/Examples/BayesianAssuranceContinuous/R/AnalyzeUsingBayesianNormals.R" class="external-link alert-link">AnalyzeUsingBayesianNormals.R</a>
</p>
</div>
<p>The function for the Analysis Integration Point is the same as in <a href="#analysis-integration-point">Example 1</a>, with the addition of
the <em>dPUFutility</em> variable to incorporate the interim analysis.
<em>dPUFutility</em> is a user-defined threshold that specifies the
minimum predictive probability of a No-Go decision required to stop the
trial early for futility at the interim analysis.</p>
<p>Let
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><msub><mi>X</mi><mn>1</mn></msub><annotation encoding="application/x-tex">X_1</annotation></semantics></math>
represent the data available at the interim analysis and
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><msub><mi>X</mi><mn>2</mn></msub><annotation encoding="application/x-tex">X_2</annotation></semantics></math>
the data for patients enrolled thereafter. If the predictive probability
of a No-Go decision at the end of the study, given
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><msub><mi>X</mi><mn>1</mn></msub><annotation encoding="application/x-tex">X_1</annotation></semantics></math>,
exceeds a pre-specified threshold
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>P</mi><msub><mi>U</mi><mtext mathvariant="normal">Futility</mtext></msub><mo>=</mo><mn>90</mn><mi>%</mi></mrow><annotation encoding="application/x-tex">PU_{\text{Futility}} = 90\%</annotation></semantics></math>,
the trial is stopped. Formally, the stopping rule is:</p>
<p><math display="block" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>Pr</mo><mrow><mo stretchy="true" form="prefix">(</mo><mtext mathvariant="normal">No-Go at end of study</mtext><mo>∣</mo><msub><mi>X</mi><mn>1</mn></msub><mo stretchy="true" form="postfix">)</mo></mrow><mo>&gt;</mo><mi>P</mi><msub><mi>U</mi><mtext mathvariant="normal">Futility</mtext></msub><mo>=</mo><mn>90</mn><mi>%</mi></mrow><annotation encoding="application/x-tex">\Pr( \text{No-Go at end of study} \mid X_1 ) &gt; PU_{\text{Futility}} = 90\%</annotation></semantics></math></p>
<p>This can be expressed as:</p>
<p><math display="block" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>Pr</mo><mrow><mo stretchy="true" form="prefix">(</mo><mrow><mo stretchy="true" form="prefix">{</mo><mo>Pr</mo><mrow><mo stretchy="true" form="prefix">(</mo><msub><mi>μ</mi><mi>E</mi></msub><mo>&gt;</mo><msub><mi>μ</mi><mi>S</mi></msub><mo>+</mo><mi>M</mi><mi>A</mi><mi>V</mi><mo>∣</mo><msub><mi>X</mi><mn>1</mn></msub><mo>,</mo><msub><mi>X</mi><mn>2</mn></msub><mo stretchy="true" form="postfix">)</mo></mrow><mo>&gt;</mo><mi>P</mi><mi>U</mi><mo stretchy="true" form="postfix">}</mo></mrow><mo minsize="1.8" maxsize="1.8" stretchy="false" form="prefix">|</mo><msub><mi>X</mi><mn>1</mn></msub><mo stretchy="true" form="postfix">)</mo></mrow><mo>&gt;</mo><mi>P</mi><msub><mi>U</mi><mtext mathvariant="normal">Futility</mtext></msub></mrow><annotation encoding="application/x-tex">\Pr\left( \left\{ \Pr( \mu_E &gt; \mu_S + MAV \mid X_1, X_2 ) &gt; PU \right\} \Big| X_1 \right) &gt; PU_{\text{Futility}}</annotation></semantics></math></p>
<p>Refer to the table below for the definitions and values of the
user-defined parameters used in this example.</p>
<table class="table">
<colgroup>
<col width="27%">
<col width="54%">
<col width="18%">
</colgroup>
<thead><tr class="header">
<th><strong>User parameter</strong></th>
<th><strong>Definition</strong></th>
<th><strong>Value</strong></th>
</tr></thead>
<tbody>
<tr class="odd">
<td><strong>dPriorMeanCtrl</strong></td>
<td>Prior mean for control arm.</td>
<td>0</td>
</tr>
<tr class="even">
<td><strong>dPriorStdDevCtrl</strong></td>
<td>Prior standard deviation for control arm.</td>
<td>1000</td>
</tr>
<tr class="odd">
<td><strong>dPriorMeanExp</strong></td>
<td>Prior mean for experimental arm.</td>
<td>0</td>
</tr>
<tr class="even">
<td><strong>dPriorStdDevExp</strong></td>
<td>Prior standard deviation for experimental arm.</td>
<td>1000</td>
</tr>
<tr class="odd">
<td><strong>dSigma</strong></td>
<td>Known sampling standard deviation.</td>
<td>1.9</td>
</tr>
<tr class="even">
<td><strong>dMAV</strong></td>
<td>Minimum Acceptable Value (clinically meaningful difference).</td>
<td>0.8</td>
</tr>
<tr class="odd">
<td><strong>dPU</strong></td>
<td>Go threshold (posterior probability cutoff).</td>
<td>0.8</td>
</tr>
<tr class="even">
<td><strong>dPUFutility</strong></td>
<td>Threshold to stop the trial early for futility.</td>
<td>0.9</td>
</tr>
</tbody>
</table>
</div>
<div class="section level3">
<h3 id="results-1">Results<a class="anchor" aria-label="anchor" href="#results-1"></a>
</h3>
<p>The results of the design are as follows:</p>
<ul>
<li>The probability of an end of study Go is: 0.1478</li>
<li>The probability of an end of study No-Go (Stop) is: 0.2656</li>
<li>The probability of futility at the interim: 0.5866</li>
<li>The probability of a Go conditional on not stopping at the interim:
0.357523</li>
<li>The probability of a No-Go conditional on not stopping at the
interim: 0.642477</li>
</ul>
<p>The posterior mean of the true delta,
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>μ</mi><mi>E</mi></msub><mo>−</mo><msub><mi>μ</mi><mi>S</mi></msub></mrow><annotation encoding="application/x-tex">\mu_E-\mu_S</annotation></semantics></math>,
given a Go decision is: 0.992</p>
<p>The summary of the true delta given a Go decision is:</p>
<pre><code><span><span class="co">##    Min. 1st Qu.  Median    Mean 3rd Qu.    Max. </span></span>
<span><span class="co">##   0.023   0.823   0.990   0.992   1.151   2.009</span></span></code></pre>
<p>The scaled posterior distribution of the true delta given a Go
decision is:</p>
<p><img src="BayesianAssuranceContinuous_files/figure-html/unnamed-chunk-12-1.png" width="700"></p>
</div>
</div>
<div class="section level2">
<h2 id="see-also">See Also<a class="anchor" aria-label="anchor" href="#see-also"></a>
</h2>
<p>Other relevant examples include:</p>
<ul>
<li><a href="BayesianAssuranceTimeToEvent.html">Bayesian Assurance,
Time-to-Event Outcome</a></li>
<li><a href="ConsecutiveStudiesContinuous.html">Consecutive Studies,
Continuous Outcome</a></li>
<li><a href="ConsecutiveStudiesContinuousTimeToEvent.html">Consecutive
Studies, Continuous &amp; Time-to-Event Outcomes</a></li>
<li><a href="ConsecutiveStudiesBinary.html">Consecutive Studies, Binary
Outcome</a></li>
<li><a href="ProbabilitySuccessDualEndpoints.html">Probability of
Success, Dual Endpoints</a></li>
</ul>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by J. Kyle Wathen, Valeria A. G. Mazzanti, Gabriel Potvin.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer>
</div>





  </body>
</html>

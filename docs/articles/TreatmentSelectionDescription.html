<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Multiarm, Binary Outcome - Treatment Selection â€¢ CyneRgy</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<script src="../lightswitch.js"></script><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.4.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Multiarm, Binary Outcome - Treatment Selection">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top " aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">CyneRgy</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.1.3</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../index.html">Home</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-getting-started" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Getting Started</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-getting-started">
<li><a class="dropdown-item" href="../articles/Overview.html">Overview</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>Integration Specific Points</h6></li>
    <li><a class="dropdown-item" href="../articles/IntegrationPointInitialization.html">Initialization</a></li>
    <li><a class="dropdown-item" href="../articles/IntegrationPointAnalysis.html">Analysis (Test Statistic)</a></li>
    <li><a class="dropdown-item" href="../articles/IntegrationPointEnrollment.html">Enrollment (Arrival Times)</a></li>
    <li><a class="dropdown-item" href="../articles/IntegrationPointRandomization.html">Randomization (Assignment of Subjects)</a></li>
    <li><a class="dropdown-item" href="../articles/IntegrationPointResponse.html">Response (Patient Simulation)</a></li>
    <li><a class="dropdown-item" href="../articles/IntegrationPointDropout.html">Dropout</a></li>
    <li><a class="dropdown-item" href="../articles/IntegrationPointTreatmentSelection.html">Treatment Selection</a></li>
  </ul>
</li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-examples" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Examples</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-examples">
<li><a class="dropdown-item" href="../articles/ExampleOutline.html">Examples Outline</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>Patient Simulation</h6></li>
    <li><a class="dropdown-item" href="../articles/2ArmNormalOutcomePatientSimulationDescription.html">2-Arm, Normal Outcome</a></li>
    <li><a class="dropdown-item" href="../articles/2ArmTimeToEventOutcomePatientSimulationDescription.html">2-Arm, Time-to-Event Outcome</a></li>
    <li><a class="dropdown-item" href="../articles/2ArmBinaryOutcomePatientSimulation.html">2-Arm, Binary Outcome</a></li>
    <li><a class="dropdown-item" href="../articles/2ArmNormalRepeatedMeasuresResponseGeneration.html">2-Arm, Repeated Measure</a></li>
    <li><a class="dropdown-item" href="../articles/ChildhoodAnxiety.html">Childhood Anxiety Trial</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>Analysis</h6></li>
    <li><a class="dropdown-item" href="../articles/2ArmNormalOutcomeAnalysisDescription.html">2-Arm, Normal Outcome</a></li>
    <li><a class="dropdown-item" href="../articles/2ArmTimeToEventOutcomeAnalysisDescription.html">2-Arm, Time-To-Event Outcome</a></li>
    <li><a class="dropdown-item" href="../articles/2ArmBinaryOutcomeAnalysisDescription.html">2-Arm, Binary Outcome</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>Treatment Selection</h6></li>
    <li><a class="dropdown-item" href="../articles/TreatmentSelectionDescription.html">Binary Outcome</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>Advanced Examples</h6></li>
    <li><a class="dropdown-item" href="../articles/AssuranceConsecutiveStudies.html">Bayesian Assurance of Consecutive Studies</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>Other Integration Points</h6></li>
    <li><a class="dropdown-item" href="../articles/GeneratePoissonArrival.html">Poisson Arrival Times</a></li>
    <li><a class="dropdown-item" href="../articles/PatientDropout.html">Patient Dropout</a></li>
    <li><a class="dropdown-item" href="../articles/PatientRandomization.html">Patient Randomization</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="../reference/index.html">References</a></li>
<li class="nav-item"><a class="nav-link" href="../articles/ContibutingToCyneRgy.html">Contribute</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/Cytel-Inc/CyneRgy"><span class="fa fa-github fa-lg"></span></a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-lightswitch" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true" aria-label="Light switch"><span class="fa fa-sun"></span></button>
  <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="dropdown-lightswitch">
<li><button class="dropdown-item" data-bs-theme-value="light"><span class="fa fa-sun"></span> Light</button></li>
    <li><button class="dropdown-item" data-bs-theme-value="dark"><span class="fa fa-moon"></span> Dark</button></li>
    <li><button class="dropdown-item" data-bs-theme-value="auto"><span class="fa fa-adjust"></span> Auto</button></li>
  </ul>
</li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Multiarm, Binary Outcome - Treatment Selection</h1>
                        <h4 data-toc-skip class="author">Sydney Ringold,
J. Kyle Wathen</h4>
            
            <h4 data-toc-skip class="date">April 11, 2025</h4>
      

      <div class="d-none name"><code>TreatmentSelectionDescription.Rmd</code></div>
    </div>

    
    
<div class="section level2">
<h2 id="introduction">Introduction<a class="anchor" aria-label="anchor" href="#introduction"></a>
</h2>
<p>This example demonstrates how to add new treatment selection
functionality into East using R functions.</p>
<p>For all of these examples, we assume all trial designs consist of
control and three experimental treatments. There is one Interim Analysis
(IA) and a Final Analysis (FA). At the IA, experimental treatment(s) are
selected and continue to the second stage of the study. If the trial is
not stopped for efficacy or futility, then control and any selected
treatments continue to the next stage of the trial.</p>
<p>The examples included here are to provide different approaches for
selecting treatments for stage 2.</p>
<p>Once CyneRgy is installed, you can load this example in R Studio with
the following commands:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">CyneRgy</span><span class="fu">::</span><span class="fu"><a href="../reference/RunExample.html">RunExample</a></span><span class="op">(</span><span class="st">"TreatmentSelection"</span><span class="op">)</span></span></code></pre></div>
<p>Running the command above will load the RStudio project in
RStudio.</p>
<p><strong>East Workbook</strong>: <a href="https://github.com/Cytel-Inc/CyneRgy/blob/main/inst/Examples/TreatmentSelection/TreatmentSelection.cywx" class="external-link">TreatmentSelection.cywx</a></p>
<p><strong>RStudio Project File</strong>: <a href="https://github.com/Cytel-Inc/CyneRgy/blob/main/inst/Examples/TreatmentSelection/TreatmentSelection.Rproj" class="external-link">TreatmentSelection.Rproj</a></p>
<p>In the <a href="https://github.com/Cytel-Inc/CyneRgy/tree/main/inst/Examples/TreatmentSelection/R" class="external-link">R
directory of this example</a> you will find the following R files:</p>
<ol style="list-style-type: decimal">
<li><p><a href="https://github.com/Cytel-Inc/CyneRgy/blob/main/inst/Examples/TreatmentSelection/R/SelectExpThatAreBetterThanCtrl.R" class="external-link">SelectExpThatAreBetterThanCtrl.R</a>
- Contains a function named SelectExpThatAreBetterThanCtrl to
demonstrate the R code necessary for Example 1 as described
below.</p></li>
<li><p><a href="https://github.com/Cytel-Inc/CyneRgy/blob/main/inst/Examples/TreatmentSelection/R/SelectExpWithPValueLessThanSpecified.R" class="external-link">SelectExpWithPValueLessThanSpecified.R</a>
- Contains a function named SelectExpWithPValueLessThanSpecified to
demonstrate the R code necessary for Example 2 as described
below.</p></li>
<li><p><a href="https://github.com/Cytel-Inc/CyneRgy/blob/main/inst/Examples/TreatmentSelection/R/SelectSpecifiedNumberOfExpWithHighestResponses.R" class="external-link">SelectSpecifiedNumberOfExpWithHighestResponses.R</a>
- Contains a function named
SelectSpecifiedNumberOfExpWithHighestResponses to demonstrate the R code
necessary for Example 3 as described below.</p></li>
<li><p><a href="https://github.com/Cytel-Inc/CyneRgy/blob/main/inst/Examples/TreatmentSelection/R/SelectExpUsingBayesianRule.R" class="external-link">SelectExpUsingBayesianRule.R</a>
- Contains a function named SelectExpUsingBayesianRule to demonstrate
the R code necessary for Example 4 as described below.</p></li>
</ol>
<p>In addition, if you would like to experiment with these examples and
would like code to help you get started we have provided
fill-in-the-blank type code files in the <a href="https://github.com/Cytel-Inc/CyneRgy/tree/main/inst/Examples/TreatmentSelection/FillInTheBlankR" class="external-link">FillInTheBlankR
directory</a>.</p>
</div>
<div class="section level2">
<h2 id="example-1---selection-based-on-response-rates-above-control">Example 1 - Selection Based on Response Rates Above Control<a class="anchor" aria-label="anchor" href="#example-1---selection-based-on-response-rates-above-control"></a>
</h2>
<p>At the interim analysis, select any treatment with a response rate
that is higher than control for stage 2.</p>
<p>If none of the treatments have a higher response rate than control,
select the treatment with the largest probability of response.</p>
<p>In the second stage, the randomization ratio will be 1:1
(experimental:control)</p>
</div>
<div class="section level2">
<h2 id="example-2---selection-based-on-p-value-less-than-specified">Example 2 - Selection Based on P-Value Less Than Specified<a class="anchor" aria-label="anchor" href="#example-2---selection-based-on-p-value-less-than-specified"></a>
</h2>
<p>At the interim analysis, compare treatment and each experimental to
control using a chi-squared test.</p>
<p>Any treatment with p-value less than user-specified dMaxPValue is
selected for stage 2.</p>
<p>If none of the treatments have a p-value less than user-specified
dMaxPValue, select the treatment with the smallest p-value.</p>
<p>In the second stage, the randomization ratio will be 1:1
(experimental:control)</p>
</div>
<div class="section level2">
<h2 id="example-3---select-treatments-with-highest-number-of-responses">Example 3 - Select Treatments With Highest Number of Responses<a class="anchor" aria-label="anchor" href="#example-3---select-treatments-with-highest-number-of-responses"></a>
</h2>
<p>At the interim analysis, the user-specified number of experimental
treatments (QtyOfArmsToSelect) that have the largest number of responses
are selected.</p>
<p>After the interim analysis, randomization occurs based on user
specified inputs: 1:Rank1AllocationRatio:Rank2AllocationRatio (control,
selected experimental arm with highest number of responses, selected
experimental arm with the second highest number of responses).</p>
<p>For example, the randomization ratio could be updated to the
following:</p>
<table class="table">
<thead><tr class="header">
<th>Treatment</th>
<th>Randomization Ratio</th>
</tr></thead>
<tbody>
<tr class="odd">
<td>Control</td>
<td>1</td>
</tr>
<tr class="even">
<td>Treatment with largest number of responses</td>
<td>2</td>
</tr>
<tr class="odd">
<td>Treatment with 2nd largest number of responses</td>
<td>1</td>
</tr>
</tbody>
</table>
</div>
<div class="section level2">
<h2 id="example-4---selection-based-on-bayesian-posterior-probabilities">Example 4 - Selection Based on Bayesian Posterior Probabilities<a class="anchor" aria-label="anchor" href="#example-4---selection-based-on-bayesian-posterior-probabilities"></a>
</h2>
<p>At the interim analysis, we use the following Bayesian model and
selection rule:</p>
<p>Denote the probability of response on experimental treatment by
p<sub>j</sub> , for j = 1, 2, 3.</p>
<p>Prior: User-specified p<sub>j</sub> ~ Beta( dPriorAlpha, dPriorBeta
)</p>
<p>Select any treatment that has at least a user-specified probability
(dMinPosteriorProbability) of being greater than the user-specified
historical response rate (dHistoricResponseRate). Specifically, if Pr(
p<sub>j</sub> &gt; dHistoricResponseRate | data ) &gt;
dMinPosteriorProbability, then experimental treatment j is selected for
stage 2. If none of the treatments meet the criteria for selection, then
select the treatment with the largest Pr( p<sub>j</sub> &gt;
dHistoricResponseRate | data ).</p>
<p>After the IA, we use a randomization ratio of 2:1
(experimental:control) for all experimental treatments that are selected
for stage 2.</p>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by J. Kyle Wathen, Valeria A. G. Mazzanti.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer>
</div>





  </body>
</html>

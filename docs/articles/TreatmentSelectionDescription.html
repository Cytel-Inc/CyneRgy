<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="CyneRgy">
<title>Treatment Selection Example â€¢ CyneRgy</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.2.2/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.2.2/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Treatment Selection Example">
<meta property="og:description" content="CyneRgy">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">CyneRgy</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.0</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="../index.html">Home</a>
</li>
<li class="active nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-examples">Examples</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-examples">
    <a class="dropdown-item" href="../articles/ExampleOutline.html">Example List</a>
    <a class="dropdown-item" href="../articles/2ArmNormalOutcomePatientSimulationDescription.html">2-Arm, Normal Outcome, Patient Simulation</a>
    <a class="dropdown-item" href="../articles/TreatmentSelectionDescription.html">Treatment Selection</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">References</a>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/Cytel-Inc/CyneRgy">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>Treatment Selection Example</h1>
                        <h4 data-toc-skip class="author">J. Kyle
Wathen</h4>
            
            <h4 data-toc-skip class="date">December 22, 2023</h4>
      
      
      <div class="d-none name"><code>TreatmentSelectionDescription.Rmd</code></div>
    </div>

    
    
<div class="section level2">
<h2 id="multiarm-binary-outcome---treatment-selection-example">Multiarm, Binary Outcome - Treatment Selection Example<a class="anchor" aria-label="anchor" href="#multiarm-binary-outcome---treatment-selection-example"></a>
</h2>
<p>This example demonstrates how to add new treatment selection
functionality into East using an R function.</p>
<p>For all of these examples, we assume all trial designs consist of
control and three experimental treatments. There is one Interim
Analysis, IA, and a Final Analysis, FA. At the IA, experimental
treatment(s) are selected and continue to the second stage of the study.
If the trial is not stopped for efficacy or futility, then control and
any selected treatments continue to the next stage of the trial.</p>
<p>The examples included here are to provide different approaches for
selecting treatments for stage 2.</p>
<p><strong>East Workbook</strong>: TreatmentSelection.cywx</p>
<p><strong>R Studio Project File</strong>: TreatmentSelection.Rproj.</p>
<p>In the RCode directory of this example you will find the following R
files:</p>
<ol style="list-style-type: decimal">
<li><p>TreatmentSelectionTemplate.R - This file provides a template that
may be used as a starting point for developing new treatment selection
functions in R.</p></li>
<li><p>SelectExpThatAreBetterThanCtrl.R - Contains a function named
SelectExpThatAreBetterThanCtrl to demonstrate the R code necessary for
Example 1 as described below.</p></li>
<li><p>SelectExpWithPValueLessThanSpecified.R - Contains a function
named SelectExpWithPValueLessThanSpecified to demonstrate the R code
necessary for Example 2 as described below.</p></li>
<li><p>SelectSpecifiedNumberOfExpWithHighestResponses.R - Contains a
function named SelectSpecifiedNumberOfExpWithHighestResponses to
demonstrate the R code necessary for Example 3 as described
below.</p></li>
<li><p>SelectExpUsingBayesianRule.R - Contains a function named
SelectExpUsingBayesianRule to demonstrate the R code necessary for
Example 4 as described below.</p></li>
</ol>
<p>In addition, if you would like to experiment with these examples and
would like code to help you get started we have provided
fill-in-the-blank type code files in the FillInTheBlankRCode
directory.</p>
<div class="section level3">
<h3 id="example-1---selection-based-on-response-rates-above-control">Example 1 - Selection Based on Response Rates Above Control<a class="anchor" aria-label="anchor" href="#example-1---selection-based-on-response-rates-above-control"></a>
</h3>
<p>At the interim analysis, select any treatment with a response rate
that is higher than control for stage 2.</p>
<p>If none of the treatments have a higher response rate than control,
select the treatment with the largest probability of response.</p>
<p>In the second stage, the randomization ratio will be 1:1
(experimental:control)</p>
</div>
<div class="section level3">
<h3 id="example-2---selection-based-on-p-value-less-than-specified">Example 2 - Selection Based on P-Value Less Than Specified<a class="anchor" aria-label="anchor" href="#example-2---selection-based-on-p-value-less-than-specified"></a>
</h3>
<p>At the interim analysis, compare treatment and each experimental to
control using a chi-squared test.</p>
<p>Any treatment with p-value less than user-specified dMaxPValue is
selected for stage 2.</p>
<p>If none of the treatments have a p-value less than user-specified
dMaxPValue, select the treatment with the smallest p-value.</p>
<p>In the second stage, the randomization ratio will be 1:1
(experimental:control)</p>
</div>
<div class="section level3">
<h3 id="example-3---select-treatments-with-highest-number-of-responses">Example 3 - Select Treatments With Highest Number of Responses<a class="anchor" aria-label="anchor" href="#example-3---select-treatments-with-highest-number-of-responses"></a>
</h3>
<p>At the interim analysis, the user-specified number of experimental
treatments (maxSelection) that have the largest number of responses are
selected.</p>
<p>After the interim analysis, randomization occurs based on user
specified inputs: 1:highestResponse:nextHighestResponse (control,
selected experimental arm with highest number of responses, selected
experimental arm with the second highest number of responses).</p>
<p>For example, the randomization ratio could be updated to the
following:</p>
<table class="table">
<thead><tr class="header">
<th>Treatment</th>
<th>Randomization Ratio</th>
</tr></thead>
<tbody>
<tr class="odd">
<td>Control</td>
<td>1</td>
</tr>
<tr class="even">
<td>Treatment with largest number of responses</td>
<td>2</td>
</tr>
<tr class="odd">
<td>Treatment with 2nd largest number of responses</td>
<td>1</td>
</tr>
</tbody>
</table>
</div>
<div class="section level3">
<h3 id="example-4---selection-based-on-bayesian-posterior-probabilities">Example 4 - Selection Based on Bayesian Posterior Probabilities<a class="anchor" aria-label="anchor" href="#example-4---selection-based-on-bayesian-posterior-probabilities"></a>
</h3>
<p>At the interim analysis, we use the following Bayesian model and
selection rule:</p>
<p>Denote the probability of response on experimental treatment by
p<sub>j</sub> , for j = 1, 2, 3.</p>
<p><u>Prior:</u></p>
<p>User-specified p<sub>j</sub> ~ Beta( dPriorAlpha, dPriorBeta )</p>
<p>Select any treatment that has at least a user-specified probability
(treatmentPValue) of being greater than the user-specified historical
response rate (historicResponseRate). Specifically, if Pr( p<sub>j</sub>
&gt; historicResponseRate | data ) &gt; treatmentPValue, then
experimental treatment j is selected for stage 2. If none of the
treatments meet the criteria for selection, then select the treatment
with the largest Pr( p<sub>j</sub> &gt; historicResponseRate | data
).</p>
<p>After the IA, we use a randomization ratio of 2:1
(experimental:control) for all experimental treatments that are selected
for stage 2.</p>
</div>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by J. Kyle Wathen.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>

<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>2 Arm, Time-To-Event Outcome - Patient Simulation • CyneRgy</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="96x96" href="../favicon-96x96.png">
<link rel="icon" type="”image/svg+xml”" href="../favicon.svg">
<link rel="apple-touch-icon" sizes="180x180" href="../apple-touch-icon.png">
<link rel="icon" sizes="any" href="../favicon.ico">
<link rel="manifest" href="../site.webmanifest">
<script src="../lightswitch.js"></script><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/Source_Sans_3-0.4.9/font.css" rel="stylesheet">
<link href="../deps/Source_Code_Pro-0.4.9/font.css" rel="stylesheet">
<link href="../deps/font-awesome-6.4.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="2 Arm, Time-To-Event Outcome - Patient Simulation">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.11/dist/katex.min.css" integrity="sha384-nB0miv6/jRmo5UMMR1wu3Gz6NLsoTkbqJghGIsx//Rlm+ZU03BU6SQNC66uf4l5+" crossorigin="anonymous">
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.11/dist/katex.min.js" integrity="sha384-7zkQWkzuo3B5mTepMUcHkMB5jZaolc2xDwL6VFqjFALcbeS9Ggm/Yr2r3Dy4lfFg" crossorigin="anonymous"></script><script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.11/dist/contrib/auto-render.min.js" integrity="sha384-43gviWU0YVjaDtb/GhzOouOXtZMP/7XUzwPTstBeZFe/+rCMvRwr4yROQP43s0Xk" crossorigin="anonymous" onload="renderMathInElement(document.body);"></script>
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top " aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">CyneRgy</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.1.9</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../index.html">Home</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-getting-started" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Getting Started</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-getting-started">
<li><a class="dropdown-item" href="../articles/Overview.html">Overview</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>Integration Specific Points</h6></li>
    <li><a class="dropdown-item" href="../articles/IntegrationPointInitialization.html">Initialization</a></li>
    <li><a class="dropdown-item" href="../articles/IntegrationPointAnalysis.html">Analysis (Test Statistic)</a></li>
    <li><a class="dropdown-item" href="../articles/IntegrationPointEnrollment.html">Enrollment (Arrival Times)</a></li>
    <li><a class="dropdown-item" href="../articles/IntegrationPointRandomization.html">Randomization</a></li>
    <li><a class="dropdown-item" href="../articles/IntegrationPointResponse.html">Response (Patient Simulation)</a></li>
    <li><a class="dropdown-item" href="../articles/IntegrationPointDropout.html">Dropout</a></li>
    <li><a class="dropdown-item" href="../articles/IntegrationPointTreatmentSelection.html">Treatment Selection</a></li>
    <li><a class="dropdown-item" href="../articles/IntegrationPointMultiplicityAdjustment.html">Multiplicity Adjustment</a></li>
    <li><a class="dropdown-item" href="../articles/IntegrationPointDesign.html">Design</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="../articles/ExampleOutline.html">Examples</a></li>
<li class="nav-item"><a class="nav-link" href="../reference/index.html">References</a></li>
<li class="nav-item"><a class="nav-link" href="../articles/ContributingToCyneRgy.html">Contribute</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/Cytel-Inc/CyneRgy"><span class="fa fa-github fa-lg"></span></a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-lightswitch" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true" aria-label="Light switch"><span class="fa fa-sun"></span></button>
  <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="dropdown-lightswitch">
<li><button class="dropdown-item" data-bs-theme-value="light"><span class="fa fa-sun"></span> Light</button></li>
    <li><button class="dropdown-item" data-bs-theme-value="dark"><span class="fa fa-moon"></span> Dark</button></li>
    <li><button class="dropdown-item" data-bs-theme-value="auto"><span class="fa fa-adjust"></span> Auto</button></li>
  </ul>
</li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>2 Arm, Time-To-Event Outcome - Patient Simulation</h1>
                        <h4 data-toc-skip class="author">Valeria A. G.
Mazzanti, J. Kyle Wathen, and Gabriel Potvin</h4>
            
            <h4 data-toc-skip class="date">January 09, 2026</h4>
      

      <div class="d-none name"><code>2ArmTimeToEventOutcomePatientSimulation.Rmd</code></div>
    </div>

    
    
<div class="alert alert-primary" role="alert">
<p style="margin-bottom:0">
This example is related to the
<a href="IntegrationPointResponseTimeToEvent.html" class="alert-link"><strong>Integration
Point: Response - Time-to-Event Outcome</strong></a>. Click the link for
setup instructions, variable details, and additional information about
this integration point.
</p>
</div>
<div class="alert alert-danger" role="alert">
To try this example, create a new project in East Horizon using the
following configuration:
<ul style="margin-bottom:0">
<li>
<strong>Study objective:</strong> Two Arm Confirmatory
</li>
<li>
<strong>Number of endpoints:</strong> Single Endpoint
</li>
<li>
<strong>Endpoint type:</strong> Time-to-Event Outcome
</li>
<li>
<strong>Task:</strong> Any
</li>
<li>
<strong>Stratification turned on</strong>: For Example 3
</li>
</ul>
</div>
<div class="alert alert-warning" role="alert">
<p style="margin-bottom:0">
Important: <strong>ArrivalTime</strong> is a new required parameter.
Existing R scripts must be updated to include this parameter in the
function definition, even if it is not used. See
<a href="IntegrationPointResponseTimeToEvent.html" class="alert-link"><strong>Integration
Point: Response - Time-to-Event Outcome</strong></a> for more
information.
</p>
</div>
<div class="section level2">
<h2 id="introduction">Introduction<a class="anchor" aria-label="anchor" href="#introduction"></a>
</h2>
<p>The following examples illustrate how to integrate new patient
outcome simulation (<em>response</em>) capabilities into East Horizon or
East using R functions in the context of a two-arm trial. In each
example, the trial design includes a standard-of-care control arm and an
experimental treatment arm, with patient outcomes modeled as
time-to-event data.</p>
<p>Once CyneRgy is installed, you can load this example in RStudio with
the following commands:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">CyneRgy</span><span class="fu">::</span><span class="fu"><a href="../reference/RunExample.html">RunExample</a></span><span class="op">(</span> <span class="st">"2ArmTimeToEventOutcomePatientSimulation"</span> <span class="op">)</span></span></code></pre></div>
<p>Running the command above will load the RStudio project in
RStudio.</p>
<p><strong>East Workbook</strong>: <a href="https://github.com/Cytel-Inc/CyneRgy/blob/main/inst/Examples/2ArmTimeToEventOutcomePatientSimulation/2ArmTimeToEventOutcomePatientSimulation.cywx" class="external-link">2ArmTimeToEventOutcomePatientSimulation.cywx</a></p>
<p><strong>RStudio Project File</strong>: <a href="https://github.com/Cytel-Inc/CyneRgy/blob/main/inst/Examples/2ArmTimeToEventOutcomePatientSimulation/2ArmTimeToEventOutcomePatientSimulation.Rproj" class="external-link">2ArmTimeToEventOutcomePatientSimulation.Rproj</a></p>
<p>In the <a href="https://github.com/Cytel-Inc/CyneRgy/tree/main/inst/Examples/2ArmTimeToEventOutcomePatientSimulation/R" class="external-link">R
directory of this example</a> you will find the following R files:</p>
<ol style="list-style-type: decimal">
<li><p><a href="https://github.com/Cytel-Inc/CyneRgy/blob/main/inst/Examples/2ArmTimeToEventOutcomePatientSimulation/R/SimulatePatientSurvivalWeibull.R" class="external-link">SimulatePatientSurvivalWeibull.R</a>
- This file provides an example R function to simulate patient
time-to-event data from a Weibull distribution.</p></li>
<li><p><a href="https://github.com/Cytel-Inc/CyneRgy/blob/main/inst/Examples/2ArmTimeToEventOutcomePatientSimulation/R/HelperFunctionsWeibull.R" class="external-link">HelperFunctionsWeibull.R</a>
- This file contains functions to assist in the computation of Weibull
parameters.</p></li>
<li><p><a href="https://github.com/Cytel-Inc/CyneRgy/blob/main/inst/Examples/2ArmTimeToEventOutcomePatientSimulation/R/SimulatePatientSurvivalMixtureExponentials.R" class="external-link">SimulatePatientSurvivalMixtureExponentials.R</a>
- This file provides an example R function to simulate patient data from
a mixture of exponential distributions. The mixture is based on having
any number of patient groups in the study where each group has a
different exponential distribution for simulating the time-to-event
from.</p></li>
<li><p><a href="https://github.com/Cytel-Inc/CyneRgy/blob/main/inst/Examples/2ArmTimeToEventOutcomePatientSimulation/R/SimulatePatientOutcomeStratification.R" class="external-link">SimulatePatientOutcomeStratification.R</a>
- Contains a function named
<em>SimulatePatientOutcomeStratification</em> that extends the standard
TTE response generation to support stratification.</p></li>
</ol>
</div>
<div class="section level2">
<h2 id="example-1---simulation-of-patient-time-to-event-data-from-a-weibull-distribution">Example 1 - Simulation of Patient Time-To-Event Data from a Weibull
Distribution<a class="anchor" aria-label="anchor" href="#example-1---simulation-of-patient-time-to-event-data-from-a-weibull-distribution"></a>
</h2>
<div class="alert alert-primary" role="alert">
<p style="margin-bottom:0">
This example is related to this R file:
<a href="https://github.com/Cytel-Inc/CyneRgy/blob/main/inst/Examples/2ArmTimeToEventOutcomePatientSimulation/R/SimulatePatientSurvivalWeibull.R" class="external-link alert-link">SimulatePatientSurvivalWeibull.R</a>
</p>
</div>
<p>In this example, the R function
<em>SimulatePatientSurvivalWeibull</em> is provided to simulate patient
data with hazards and hazard ratios that change over time, allowing for
an exploration of their impact on expected study power. Refer to the
table below for the definitions of the user-defined parameters used in
this example.</p>
<table class="table">
<colgroup>
<col width="25%">
<col width="75%">
</colgroup>
<thead><tr class="header">
<th><strong>User parameter</strong></th>
<th><strong>Definition</strong></th>
</tr></thead>
<tbody>
<tr class="odd">
<td><strong>dShapeCtrl</strong></td>
<td>Shape parameter of the Weibull distribution for the control
arm.</td>
</tr>
<tr class="even">
<td><strong>dShapeExp</strong></td>
<td>Shape parameter of the Weibull distribution for the experimental
arm.</td>
</tr>
<tr class="odd">
<td><strong>dScaleCtrl</strong></td>
<td>Scale parameter of the Weibull distribution for the control
arm.</td>
</tr>
<tr class="even">
<td><strong>dScaleExp</strong></td>
<td>Scale parameter of the Weibull distribution for the experimental
arm.</td>
</tr>
</tbody>
</table>
<p>The figure below illustrates where this example fits within the R
integration points of Cytel products, accompanied by a flowchart
outlining the general steps performed by the R code.</p>
<p><img src="2ArmTimeToEventOutcomePatientSimulation_files/figure-html/unnamed-chunk-4-1.png" width="700"></p>
<div class="section level3">
<h3 id="example-1-1-constant-hazards">Example 1.1 – Constant Hazards<a class="anchor" aria-label="anchor" href="#example-1-1-constant-hazards"></a>
</h3>
<p>Assume that the difference in risk of death for patients in the
control arm compared to the risk of death for patients in the
experimental arm remains the same over time. The time to death or
progression of patients is simulated from a Weibull distribution with
the shape and scale for each arm provided in East Horizon or East and
sent to R. Refer to the table below for the values of the user-defined
parameters used in this example.</p>
<table class="table">
<thead><tr class="header">
<th><strong>User parameter</strong></th>
<th><strong>Value</strong></th>
</tr></thead>
<tbody>
<tr class="odd">
<td><strong>dShapeCtrl</strong></td>
<td>1.0</td>
</tr>
<tr class="even">
<td><strong>dShapeExp</strong></td>
<td>1.0</td>
</tr>
<tr class="odd">
<td><strong>dScaleCtrl</strong></td>
<td>17.31</td>
</tr>
<tr class="even">
<td><strong>dScaleExp</strong></td>
<td>23.08</td>
</tr>
</tbody>
</table>
<p>The scale parameters are calculated based on the median survival time
for each arm. This example demonstrates that using the R function with
these parameters produces the same results as simulating the data
directly in East Horizon or East without an R function.</p>
<p><img src="2ArmTimeToEventOutcomePatientSimulation_files/figure-html/unnamed-chunk-5-1.png" width="700"><img src="2ArmTimeToEventOutcomePatientSimulation_files/figure-html/unnamed-chunk-5-2.png" width="700"></p>
</div>
<div class="section level3">
<h3 id="example-1-2-increasing-hazards">Example 1.2 – Increasing Hazards<a class="anchor" aria-label="anchor" href="#example-1-2-increasing-hazards"></a>
</h3>
<p>This function assumes that the hazard of death or disease progression
increases over time in both arms, but at different rates: the control
arm’s hazard increases more slowly than that of the experimental arm.
The time to death or progression is simulated using a Weibull
distribution, with shape and scale parameters specified for each arm in
East Horizon or East and then sent to R. Refer to the table below for
the values of the user-defined parameters used in this example.</p>
<table class="table">
<thead><tr class="header">
<th><strong>User parameter</strong></th>
<th><strong>Value</strong></th>
</tr></thead>
<tbody>
<tr class="odd">
<td><strong>dShapeCtrl</strong></td>
<td>3.0</td>
</tr>
<tr class="even">
<td><strong>dShapeExp</strong></td>
<td>4.0</td>
</tr>
<tr class="odd">
<td><strong>dScaleCtrl</strong></td>
<td>13.56</td>
</tr>
<tr class="even">
<td><strong>dScaleExp</strong></td>
<td>17.54</td>
</tr>
</tbody>
</table>
<p>This example demonstrates how an R function can be used to simulate
data in a way that differs from East Horizon’s or East’s default
simulation approach.</p>
<p><img src="2ArmTimeToEventOutcomePatientSimulation_files/figure-html/unnamed-chunk-6-1.png" width="700"><img src="2ArmTimeToEventOutcomePatientSimulation_files/figure-html/unnamed-chunk-6-2.png" width="700"></p>
</div>
<div class="section level3">
<h3 id="example-1-3-decreasing-hazards">Example 1.3 – Decreasing Hazards<a class="anchor" aria-label="anchor" href="#example-1-3-decreasing-hazards"></a>
</h3>
<p>This example is similar to the previous one, but here the function
assumes that hazards decrease over time in both arms. However, the
control arm’s hazard decreases at a slower rate than that of the
experimental arm. The time to death or progression is simulated using a
Weibull distribution, with shape and scale parameters specified for each
arm in East Horizon or East and then sent to R. Refer to the table below
for the values of the user-defined parameters used in this example.</p>
<table class="table">
<thead><tr class="header">
<th><strong>User parameter</strong></th>
<th><strong>Value</strong></th>
</tr></thead>
<tbody>
<tr class="odd">
<td><strong>dShapeCtrl</strong></td>
<td>0.7</td>
</tr>
<tr class="even">
<td><strong>dShapeExp</strong></td>
<td>0.8</td>
</tr>
<tr class="odd">
<td><strong>dScaleCtrl</strong></td>
<td>20.26</td>
</tr>
<tr class="even">
<td><strong>dScaleExp</strong></td>
<td>25.30</td>
</tr>
</tbody>
</table>
<p>This example demonstrates how an R function can be used to simulate
data differently from East Horizon’s or East’s default simulation
approach.</p>
<p><img src="2ArmTimeToEventOutcomePatientSimulation_files/figure-html/unnamed-chunk-7-1.png" width="700"><img src="2ArmTimeToEventOutcomePatientSimulation_files/figure-html/unnamed-chunk-7-2.png" width="700"></p>
</div>
<div class="section level3">
<h3 id="notes-about-the-exponential-and-weibull-distributions">Notes about the Exponential and Weibull Distributions<a class="anchor" aria-label="anchor" href="#notes-about-the-exponential-and-weibull-distributions"></a>
</h3>
<p>In R, the Weibull distribution is defined by a shape parameter
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>α</mi><annotation encoding="application/x-tex">\alpha</annotation></semantics></math>
and a scale parameter
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>σ</mi><annotation encoding="application/x-tex">\sigma</annotation></semantics></math>,
with a probability density function (PDF) given by:</p>
<p><math display="block" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>f</mi><mrow><mo stretchy="true" form="prefix">(</mo><mi>x</mi><mo stretchy="true" form="postfix">)</mo></mrow><mo>=</mo><mfrac><mi>α</mi><mi>σ</mi></mfrac><msup><mrow><mo stretchy="true" form="prefix">(</mo><mfrac><mi>x</mi><mi>σ</mi></mfrac><mo stretchy="true" form="postfix">)</mo></mrow><mrow><mi>α</mi><mo>−</mo><mn>1</mn></mrow></msup><msup><mi>e</mi><mrow><mi>−</mi><msup><mrow><mo stretchy="true" form="prefix">(</mo><mfrac><mi>x</mi><mi>σ</mi></mfrac><mo stretchy="true" form="postfix">)</mo></mrow><mi>α</mi></msup></mrow></msup></mrow><annotation encoding="application/x-tex">
f(x) = \frac{\alpha}{\sigma} \left(\frac{x}{\sigma}\right)^{\alpha-1} e^{-\left(\frac{x}{\sigma}\right)^\alpha}
</annotation></semantics></math></p>
<p>Its corresponding hazard function is:</p>
<p><math display="block" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>h</mi><mrow><mo stretchy="true" form="prefix">(</mo><mi>x</mi><mo stretchy="true" form="postfix">)</mo></mrow><mo>=</mo><mfrac><mi>α</mi><mi>σ</mi></mfrac><msup><mrow><mo stretchy="true" form="prefix">(</mo><mfrac><mi>x</mi><mi>σ</mi></mfrac><mo stretchy="true" form="postfix">)</mo></mrow><mrow><mi>α</mi><mo>−</mo><mn>1</mn></mrow></msup></mrow><annotation encoding="application/x-tex">
h(x) = \frac{\alpha}{\sigma} \left(\frac{x}{\sigma}\right)^{\alpha-1}
</annotation></semantics></math></p>
<p>The Exponential distribution in R is parameterized by a rate
parameter
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>λ</mi><annotation encoding="application/x-tex">\lambda</annotation></semantics></math>,
with a PDF given by:</p>
<p><math display="block" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>f</mi><mrow><mo stretchy="true" form="prefix">(</mo><mi>x</mi><mo stretchy="true" form="postfix">)</mo></mrow><mo>=</mo><mi>λ</mi><msup><mi>e</mi><mrow><mi>−</mi><mi>λ</mi><mi>x</mi></mrow></msup></mrow><annotation encoding="application/x-tex">
f(x) = \lambda e^{-\lambda x}
</annotation></semantics></math></p>
<p>Its hazard function remains constant:</p>
<p><math display="block" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>h</mi><mrow><mo stretchy="true" form="prefix">(</mo><mi>x</mi><mo stretchy="true" form="postfix">)</mo></mrow><mo>=</mo><mi>λ</mi></mrow><annotation encoding="application/x-tex">
h(x) = \lambda
</annotation></semantics></math></p>
<p>We can see that the Exponential distribution is a special case of the
Weibull distribution, obtained by setting the shape parameter
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>α</mi><mo>=</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">\alpha = 1</annotation></semantics></math>
and the scale parameter
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>σ</mi><mo>=</mo><mfrac><mn>1</mn><mi>λ</mi></mfrac></mrow><annotation encoding="application/x-tex">\sigma = \frac{1}{\lambda}</annotation></semantics></math>.</p>
<p>Functions to assist in the computation of Weibull parameters can be
found in <a href="https://github.com/Cytel-Inc/CyneRgy/blob/main/inst/Examples/2ArmTimeToEventOutcomePatientSimulation/R/HelperFunctionsWeibull.R" class="external-link">HelperFunctionsWeibull.R</a>.</p>
</div>
</div>
<div class="section level2">
<h2 id="example-2---simulation-of-patient-time-to-event-data-from-a-mixture-of-distributions">Example 2 - Simulation of Patient Time-To-Event Data from a Mixture
of Distributions<a class="anchor" aria-label="anchor" href="#example-2---simulation-of-patient-time-to-event-data-from-a-mixture-of-distributions"></a>
</h2>
<div class="alert alert-primary" role="alert">
<p style="margin-bottom:0">
This example is related to this R file:
<a href="https://github.com/Cytel-Inc/CyneRgy/blob/main/inst/Examples/2ArmTimeToEventOutcomePatientSimulation/R/SimulatePatientSurvivalMixtureExponentials.R" class="external-link alert-link">SimulatePatientSurvivalMixtureExponentials.R</a>
</p>
</div>
<p>This example simulates patient data using a mixture of exponential
distributions, allowing for multiple patient subgroups within the study.
Each subgroup follows a distinct exponential distribution for modeling
TTE, capturing variability in patient outcomes. Refer to the table below
for the definitions of the user-defined parameters used in this
example.</p>
<table class="table">
<colgroup>
<col width="33%">
<col width="66%">
</colgroup>
<thead><tr class="header">
<th><strong>User parameter</strong></th>
<th><strong>Definition</strong></th>
</tr></thead>
<tbody>
<tr class="odd">
<td><strong>QtyOfSubgroups</strong></td>
<td>Number of patient subgroups.</td>
</tr>
<tr class="even">
<td><strong>ProbSubgroup1</strong></td>
<td>Probability a patient is in subgroup 1.</td>
</tr>
<tr class="odd">
<td><strong>MedianTTECtrlSubgroup1</strong></td>
<td>Median time-to-event for a patient in subgroup 1 that receives
control treatment.</td>
</tr>
<tr class="even">
<td><strong>MedianTTEExpSubgroup1</strong></td>
<td>Median time-to-event for a patient in subgroup 1 that receives
experimental treatment.</td>
</tr>
<tr class="odd">
<td><strong>ProbSubgroup2</strong></td>
<td>Probability a patient is in subgroup 2.</td>
</tr>
<tr class="even">
<td><strong>MedianTTECtrlSubgroup2</strong></td>
<td>Median time-to-event for a patient in subgroup 2 that receives
control treatment.</td>
</tr>
<tr class="odd">
<td><strong>MedianTTEExpSubgroup2</strong></td>
<td>Median time-to-event for a patient in subgroup 2 that receives
experimental treatment.</td>
</tr>
<tr class="even">
<td><em>…</em></td>
<td>Probabilities and median time-to-event for additional subgroups
follow the same format, incrementing the subgroup number (e.g.,
<em>ProbSubgroup3</em>, <em>MedianTTECtrlSubgroup3</em>,
<em>MedianTTEExpSubgroup3</em>, etc.).</td>
</tr>
<tr class="odd">
<td><strong>ProbSubgroup&lt;<code>QtyOfSubgroups</code>&gt;</strong></td>
<td>Probability a patient is in the final subgroup.
<code>QtyOfSubgroups</code> should be replaced by the number of
subgroups.</td>
</tr>
<tr class="even">
<td><strong>MedianTTECtrlSubgroup&lt;<code>QtyOfSubgroups</code>&gt;</strong></td>
<td>Median time-to-event for a patient in the final subgroup that
receives control treatment. <code>QtyOfSubgroups</code> should be
replaced by the number of subgroups.</td>
</tr>
<tr class="odd">
<td><strong>MedianTTEExpSubgroup&lt;<code>QtyOfSubgroups</code>&gt;</strong></td>
<td>Median time-to-event for a patient in the final subgroup that
receives experimental treatment. <code>QtyOfSubgroups</code> should be
replaced by the number of subgroups.</td>
</tr>
</tbody>
</table>
<p>The figure below illustrates where this example fits within the R
integration points of Cytel products, accompanied by a flowchart
outlining the general steps performed by the R code.</p>
<p><img src="2ArmTimeToEventOutcomePatientSimulation_files/figure-html/unnamed-chunk-8-1.png" width="700"></p>
<div class="section level3">
<h3 id="example-2-1---no-group-difference">Example 2.1 - No Group Difference<a class="anchor" aria-label="anchor" href="#example-2-1---no-group-difference"></a>
</h3>
<p>We are using two subgroups. Both subgroups have the same Hazard Ratio
(HR),
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>H</mi><mi>R</mi><mo>=</mo><mfrac><mn>12</mn><mn>16</mn></mfrac><mo>=</mo><mn>0.75</mn></mrow><annotation encoding="application/x-tex">HR = \frac{12}{16} = 0.75</annotation></semantics></math>
with same median TTE, i.e., subgroup has no impact. Refer to the table
below for the values of the user-defined parameters used in this
example.</p>
<table class="table">
<thead><tr class="header">
<th><strong>User parameter</strong></th>
<th><strong>Value</strong></th>
</tr></thead>
<tbody>
<tr class="odd">
<td><strong>QtyOfSubgroups</strong></td>
<td>2</td>
</tr>
<tr class="even">
<td><strong>ProbSubgroup1</strong></td>
<td>0.25</td>
</tr>
<tr class="odd">
<td><strong>MedianTTECtrlSubgroup1</strong></td>
<td>12</td>
</tr>
<tr class="even">
<td><strong>MedianTTEExpSubgroup1</strong></td>
<td>16</td>
</tr>
<tr class="odd">
<td><strong>ProbSubgroup2</strong></td>
<td>0.75</td>
</tr>
<tr class="even">
<td><strong>MedianTTECtrlSubgroup2</strong></td>
<td>12</td>
</tr>
<tr class="odd">
<td><strong>MedianTTEExpSubgroup2</strong></td>
<td>16</td>
</tr>
</tbody>
</table>
</div>
<div class="section level3">
<h3 id="example-2-2---hr-0-75">Example 2.2 - HR = 0.75<a class="anchor" aria-label="anchor" href="#example-2-2---hr-0-75"></a>
</h3>
<p>25% of patients are in subgroup 1, with a median TTE lower than in
group 2. Both subgroups have an
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>H</mi><mi>R</mi><mo>=</mo><mfrac><mn>9</mn><mn>12</mn></mfrac><mo>=</mo><mfrac><mn>12</mn><mn>16</mn></mfrac><mo>=</mo><mn>0.75</mn></mrow><annotation encoding="application/x-tex">HR = \frac{9}{12} = \frac{12}{16} = 0.75</annotation></semantics></math>.
Refer to the table below for the values of the user-defined parameters
used in this example.</p>
<table class="table">
<thead><tr class="header">
<th><strong>User parameter</strong></th>
<th><strong>Value</strong></th>
</tr></thead>
<tbody>
<tr class="odd">
<td><strong>QtyOfSubgroups</strong></td>
<td>2</td>
</tr>
<tr class="even">
<td><strong>ProbSubgroup1</strong></td>
<td>0.25</td>
</tr>
<tr class="odd">
<td><strong>MedianTTECtrlSubgroup1</strong></td>
<td>9</td>
</tr>
<tr class="even">
<td><strong>MedianTTEExpSubgroup1</strong></td>
<td>12</td>
</tr>
<tr class="odd">
<td><strong>ProbSubgroup2</strong></td>
<td>0.75</td>
</tr>
<tr class="even">
<td><strong>MedianTTECtrlSubgroup2</strong></td>
<td>12</td>
</tr>
<tr class="odd">
<td><strong>MedianTTEExpSubgroup2</strong></td>
<td>16</td>
</tr>
</tbody>
</table>
</div>
<div class="section level3">
<h3 id="example-2-3---group-1-hr-0-8-prob-0-25-group-2-hr-0-75">Example 2.3 - Group 1 HR = 0.8 (Prob = 0.25), Group 2 HR = 0.75<a class="anchor" aria-label="anchor" href="#example-2-3---group-1-hr-0-8-prob-0-25-group-2-hr-0-75"></a>
</h3>
<p>25% of patients are in subgroup 1 with an
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>H</mi><mi>R</mi><mo>=</mo><mfrac><mn>9</mn><mn>11.25</mn></mfrac><mo>=</mo><mn>0.8</mn></mrow><annotation encoding="application/x-tex">HR = \frac{9}{11.25} = 0.8</annotation></semantics></math>.
Subgroup 2 has an
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>H</mi><mi>R</mi><mo>=</mo><mfrac><mn>12</mn><mn>16</mn></mfrac><mo>=</mo><mn>0.75</mn></mrow><annotation encoding="application/x-tex">HR = \frac{12}{16} = 0.75</annotation></semantics></math>.
Refer to the table below for the values of the user-defined parameters
used in this example.</p>
<table class="table">
<thead><tr class="header">
<th><strong>User parameter</strong></th>
<th><strong>Value</strong></th>
</tr></thead>
<tbody>
<tr class="odd">
<td><strong>QtyOfSubgroups</strong></td>
<td>2</td>
</tr>
<tr class="even">
<td><strong>ProbSubgroup1</strong></td>
<td>0.25</td>
</tr>
<tr class="odd">
<td><strong>MedianTTECtrlSubgroup1</strong></td>
<td>9</td>
</tr>
<tr class="even">
<td><strong>MedianTTEExpSubgroup1</strong></td>
<td>11.25</td>
</tr>
<tr class="odd">
<td><strong>ProbSubgroup2</strong></td>
<td>0.75</td>
</tr>
<tr class="even">
<td><strong>MedianTTECtrlSubgroup2</strong></td>
<td>12</td>
</tr>
<tr class="odd">
<td><strong>MedianTTEExpSubgroup2</strong></td>
<td>16</td>
</tr>
</tbody>
</table>
</div>
<div class="section level3">
<h3 id="example-2-4---group-1-hr-0-8-prob-0-4-group-2-hr-0-75">Example 2.4 - Group 1 HR = 0.8 (Prob = 0.4), Group 2 HR = 0.75<a class="anchor" aria-label="anchor" href="#example-2-4---group-1-hr-0-8-prob-0-4-group-2-hr-0-75"></a>
</h3>
<p>40% of patients are in subgroup 1 with an
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>H</mi><mi>R</mi><mo>=</mo><mfrac><mn>9</mn><mn>11.25</mn></mfrac><mo>=</mo><mn>0.8</mn></mrow><annotation encoding="application/x-tex">HR = \frac{9}{11.25} = 0.8</annotation></semantics></math>.
Subgroup 2 has an
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>H</mi><mi>R</mi><mo>=</mo><mfrac><mn>12</mn><mn>16</mn></mfrac><mo>=</mo><mn>0.75</mn></mrow><annotation encoding="application/x-tex">HR = \frac{12}{16} = 0.75</annotation></semantics></math>.
Refer to the table below for the values of the user-defined parameters
used in this example.</p>
<table class="table">
<thead><tr class="header">
<th><strong>User parameter</strong></th>
<th><strong>Value</strong></th>
</tr></thead>
<tbody>
<tr class="odd">
<td><strong>QtyOfSubgroups</strong></td>
<td>2</td>
</tr>
<tr class="even">
<td><strong>ProbSubgroup1</strong></td>
<td>0.4</td>
</tr>
<tr class="odd">
<td><strong>MedianTTECtrlSubgroup1</strong></td>
<td>9</td>
</tr>
<tr class="even">
<td><strong>MedianTTEExpSubgroup1</strong></td>
<td>11.25</td>
</tr>
<tr class="odd">
<td><strong>ProbSubgroup2</strong></td>
<td>0.75</td>
</tr>
<tr class="even">
<td><strong>MedianTTECtrlSubgroup2</strong></td>
<td>12</td>
</tr>
<tr class="odd">
<td><strong>MedianTTEExpSubgroup2</strong></td>
<td>16</td>
</tr>
</tbody>
</table>
<p>The intent of the example is to illustrate the impact that the
patient subgroup may have on the operating characteristics of the
design.</p>
</div>
</div>
<div class="section level2">
<h2 id="example-3---response-generation-with-stratification">Example 3 - Response Generation with Stratification<a class="anchor" aria-label="anchor" href="#example-3---response-generation-with-stratification"></a>
</h2>
<div class="alert alert-primary" role="alert">
<p style="margin-bottom:0">
This example is related to this R file:
<a href="https://github.com/Cytel-Inc/CyneRgy/blob/main/inst/Examples/2ArmTimeToEventOutcomePatientSimulation/R/SimulatePatientOutcomeStratification.R" class="external-link alert-link">SimulatePatientOutcomeStratification.R</a>
</p>
</div>
<p>This example illustrates how to customize the response generation
when turning on <code>Stratification</code> in East Horizon. Unlike the
previous examples, where a single set of survival parameters applies to
all patients in an arm, this example allows different survival
characteristics for each stratum, while still supporting two arms.</p>
<p>For each stratum, the survival parameters provided in East Horizon
are converted into arm-specific hazard rates. Patient survival times are
then simulated independently within each stratum using an Exponential
distribution. This approach enables realistic modeling of heterogeneous
patient populations where baseline risk differs across strata.</p>
<p>The behavior of the response simulation depends on the value selected
for Survival Method in East Horizon:</p>
<ul>
<li>If <code>SurvMethod = 1</code> (<em>Hazard Rates</em>), the hazard
rates provided for each stratum and arm are used directly to simulate
patient survival times.</li>
<li>If <code>SurvMethod = 2</code> (<em>Cumulative % Survival</em>), the
cumulative survival value at the specified time point is converted into
a constant hazard rate for each stratum and arm.</li>
<li>If <code>SurvMethod = 3</code> (<em>Median Survival Times</em>), the
median survival time is converted into a hazard rate using
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>λ</mi><mo>=</mo><mfrac><mrow><mo>log</mo><mrow><mo stretchy="true" form="prefix">(</mo><mn>2</mn><mo stretchy="true" form="postfix">)</mo></mrow></mrow><mtext mathvariant="normal">Median</mtext></mfrac></mrow><annotation encoding="application/x-tex">\lambda = \frac{\log(2)}{\text{Median}}</annotation></semantics></math>.</li>
</ul>
<p>The stratum ID (<code>StratumID</code>) input parameter is a vector
indicating the stratum assignment for each subject. Subjects sharing the
same value belong to the same stratum.</p>
<p>The figure below illustrates where this example fits within the R
integration points of Cytel products, accompanied by a flowchart
outlining the general steps performed by the R code.</p>
<p><img src="2ArmTimeToEventOutcomePatientSimulation_files/figure-html/unnamed-chunk-9-1.png" width="700"></p>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by J. Kyle Wathen, Valeria A. G. Mazzanti, Gabriel Potvin.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer>
</div>





  </body>
</html>

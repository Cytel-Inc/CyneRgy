<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Consecutive Studies, Binary Outcome • CyneRgy</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="96x96" href="../favicon-96x96.png">
<link rel="icon" type="”image/svg+xml”" href="../favicon.svg">
<link rel="apple-touch-icon" sizes="180x180" href="../apple-touch-icon.png">
<link rel="icon" sizes="any" href="../favicon.ico">
<link rel="manifest" href="../site.webmanifest">
<script src="../lightswitch.js"></script><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/Source_Sans_3-0.4.9/font.css" rel="stylesheet">
<link href="../deps/Source_Code_Pro-0.4.9/font.css" rel="stylesheet">
<link href="../deps/font-awesome-6.4.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Consecutive Studies, Binary Outcome">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.11/dist/katex.min.css" integrity="sha384-nB0miv6/jRmo5UMMR1wu3Gz6NLsoTkbqJghGIsx//Rlm+ZU03BU6SQNC66uf4l5+" crossorigin="anonymous">
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.11/dist/katex.min.js" integrity="sha384-7zkQWkzuo3B5mTepMUcHkMB5jZaolc2xDwL6VFqjFALcbeS9Ggm/Yr2r3Dy4lfFg" crossorigin="anonymous"></script><script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.11/dist/contrib/auto-render.min.js" integrity="sha384-43gviWU0YVjaDtb/GhzOouOXtZMP/7XUzwPTstBeZFe/+rCMvRwr4yROQP43s0Xk" crossorigin="anonymous" onload="renderMathInElement(document.body);"></script>
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top " aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">CyneRgy</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.1.10</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../index.html">Home</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-getting-started" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Getting Started</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-getting-started">
<li><a class="dropdown-item" href="../articles/Overview.html">Overview</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>Integration Specific Points</h6></li>
    <li><a class="dropdown-item" href="../articles/IntegrationPointInitialization.html">Initialization</a></li>
    <li><a class="dropdown-item" href="../articles/IntegrationPointAnalysis.html">Analysis (Test Statistic)</a></li>
    <li><a class="dropdown-item" href="../articles/IntegrationPointEnrollment.html">Enrollment (Arrival Times)</a></li>
    <li><a class="dropdown-item" href="../articles/IntegrationPointRandomization.html">Randomization</a></li>
    <li><a class="dropdown-item" href="../articles/IntegrationPointResponse.html">Response (Patient Simulation)</a></li>
    <li><a class="dropdown-item" href="../articles/IntegrationPointDropout.html">Dropout</a></li>
    <li><a class="dropdown-item" href="../articles/IntegrationPointTreatmentSelection.html">Treatment Selection</a></li>
    <li><a class="dropdown-item" href="../articles/IntegrationPointMultiplicityAdjustment.html">Multiplicity Adjustment</a></li>
    <li><a class="dropdown-item" href="../articles/IntegrationPointDesign.html">Design</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="../articles/ExampleOutline.html">Examples</a></li>
<li class="nav-item"><a class="nav-link" href="../reference/index.html">References</a></li>
<li class="nav-item"><a class="nav-link" href="../articles/ContributingToCyneRgy.html">Contribute</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/Cytel-Inc/CyneRgy"><span class="fa fa-github fa-lg"></span></a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-lightswitch" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true" aria-label="Light switch"><span class="fa fa-sun"></span></button>
  <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="dropdown-lightswitch">
<li><button class="dropdown-item" data-bs-theme-value="light"><span class="fa fa-sun"></span> Light</button></li>
    <li><button class="dropdown-item" data-bs-theme-value="dark"><span class="fa fa-moon"></span> Dark</button></li>
    <li><button class="dropdown-item" data-bs-theme-value="auto"><span class="fa fa-adjust"></span> Auto</button></li>
  </ul>
</li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Consecutive Studies, Binary Outcome</h1>
                        <h4 data-toc-skip class="author">Gabriel Potvin,
Valeria A. G. Mazzanti, J. Kyle Wathen</h4>
            
            <h4 data-toc-skip class="date">February 16, 2026</h4>
      

      <div class="d-none name"><code>ConsecutiveStudiesBinary.Rmd</code></div>
    </div>

    
    
<div class="alert alert-primary" role="alert">
<p style="margin-bottom:0">
This example is related to both the
<a href="IntegrationPointResponseBinary.html" class="alert-link"><strong>Integration
Point: Response - Binary Outcome</strong></a> and the
<a href="IntegrationPointAnalysisBinary.html" class="alert-link"><strong>Integration
Point: Analysis - Binary Outcome</strong></a>. Click the links for setup
instructions, variable details, and additional information about the
integration points.
</p>
</div>
<div class="alert alert-danger" role="alert">
To try this example, create a new project in East Horizon using the
following configuration:
<ul style="margin-bottom:0">
<li>
<strong>Study objective:</strong> Two Arm Confirmatory
</li>
<li>
<strong>Number of endpoints:</strong> Single Endpoint
</li>
<li>
<strong>Endpoint type:</strong> Binary Outcome
</li>
<li>
<strong>Task:</strong> Explore
</li>
</ul>
</div>
<div class="alert alert-warning" role="alert">
<p style="margin-bottom:0">
<strong>Note:</strong> This example is compatible with both Fixed Sample
and Group Sequential statistical designs. The R code automatically
detects whether interim look information (<em>LookInfo</em>) is
available and adjusts the analysis parameters accordingly.
</p>
</div>
<div class="section level2">
<h2 id="introduction">Introduction<a class="anchor" aria-label="anchor" href="#introduction"></a>
</h2>
<p>This example demonstrates the computation of conditional probability
of success in consecutive studies by using custom R scripts for the
<strong>Response (Patient Simulation)</strong> and the
<strong>Analysis</strong> integration points of East Horizon. It
features a sequential trial program involving a Phase 2 trial followed
by a Phase 3 trial, both with the same binary endpoint.</p>
<p>We show how Phase 2 results are simulated, saved, and then used as
the prior data for Phase 3, allowing the Phase 3 patient outcomes to be
generated only conditional on the Phase 2 trial’s success. This approach
illustrates how simulations can mimic using an earlier trial’s data to
directly inform subsequent trials, which is particularly valuable in
drug development where Phase 3 studies are expensive and
resource-intensive.</p>
<div class="section level3">
<h3 id="why-do-we-need-r-integration-for-this-example">Why do we need R Integration for this example?<a class="anchor" aria-label="anchor" href="#why-do-we-need-r-integration-for-this-example"></a>
</h3>
<p>The decision to move forward with certain trials is relying more and
more on the computation of the trial’s probability of success and the
optimization of parameters that will boost it. To identify a realistic
probability of success, though, can be difficult without having
sufficient prior knowledge of the treatment in question. Data from
previous historical studies is not always readily accessible to many
clinicians that are tasked with this type of decision-making.</p>
<p>Simulations and creating this prior data through the combination of R
functions with the East Horizon product can help alleviate this gap in
knowledge and help clinical teams decide to invest in an entire program
of trials (e.g. a Phase 2 followed by a Phase 3) rather than just one
confirmatory trial (e.g. only move forward with a Phase 3).</p>
<p>By combining the R functions described below with the East Horizon
native inputs, users are able to simulate data taking into account
uncertainty around their scenario’s assumptions, pass generated data
from the first trial in a program to the inputs of the second trial’s
simulation, and then compute the probability of success of each
simulated trial as well as the program’s probability of success overall.
Users will also continue to benefit from East Horizon’s output
visualizations for each trial – with the caveat that the Probability of
Success &amp; Conditional Probability of Success metrics will be labeled
as “Power” in the native outputs of East Horizon.</p>
<p>R Integration is required for this type of trial design because East
Horizon does not natively support transferring results from one trial’s
simulations to another. The R functions created for this example enable
users to leverage simulated data from one simulation into a following
simulation’s inputs.</p>
</div>
<div class="section level3">
<h3 id="what-do-the-r-functions-do">What do the R functions do?<a class="anchor" aria-label="anchor" href="#what-do-the-r-functions-do"></a>
</h3>
<p>In the <a href="https://github.com/Cytel-Inc/CyneRgy/tree/main/inst/Examples/ConsecutiveStudiesBinary/R" class="external-link">R
directory of this example</a> you will find the following R files:</p>
<ul>
<li>
<p><strong><a href="https://github.com/Cytel-Inc/CyneRgy/blob/main/inst/Examples/ConsecutiveStudiesBinary/R/SimulatePatientOutcomeBinaryWithAssurance.R" class="external-link">SimulatePatientOutcomeBinaryWithAssurance.R</a></strong></p>
<p>This R file is used for the <strong>Response (Patient
Simulation)</strong> integration point of the Phase 2 study. It contains
a function that generates patient outcomes for a binary response trial
while incorporating uncertainty about the true response rates, for the
control and treatment arms, by sampling them from a <strong>Beta
distribution</strong> prior.</p>
<p>For more information on this function, see the <a href="#response-patient-simulation-integration-point">Response (Patient
Simulation) Integration Point</a> section of the Phase 2 study
below.</p>
</li>
<li>
<p><strong><a href="https://github.com/Cytel-Inc/CyneRgy/blob/main/inst/Examples/ConsecutiveStudiesBinary/R/AnalyzeUsingEastManualFormula.R" class="external-link">AnalyzeUsingEastManualFormula.R</a></strong></p>
<p>This R file is used for the <strong>Analysis</strong> integration
point of the Phase 2 study. It contains a function that performs the
analysis the same way as East Horizon, but additionally saves relevant
outputs required for the Phase 3 simulation.</p>
<p>For more information on this function, see the <a href="#analysis-integration-point">Analysis Integration Point</a>
section of the Phase 2 study below.</p>
</li>
<li>
<p><strong><a href="https://github.com/Cytel-Inc/CyneRgy/blob/main/inst/Examples/ConsecutiveStudiesBinary/R/SimulatePatientOutcomeBinaryWithAssurancePh3.R" class="external-link">SimulatePatientOutcomeBinaryWithAssurancePh3.R</a></strong></p>
<p>This R file is used for the <strong>Response (Patient
Simulation)</strong> integration point of the Phase 3 study. It contains
a function that generates patient outcomes for a binary response trial.
This time, we sample the true response rates from the posterior
distribution obtained from the Phase 2 simulations.</p>
<p>For more information on this function, see the <a href="#response-patient-simulation-integration-point-1">Response
(Patient Simulation) Integration Point</a> section of the Phase 3 study
below.</p>
</li>
</ul>
<hr>
</div>
</div>
<div class="section level2">
<h2 id="step-by-step-instructions">Step-by-Step Instructions<a class="anchor" aria-label="anchor" href="#step-by-step-instructions"></a>
</h2>
<p>Before starting, make sure you have the required tools and files.</p>
<ul>
<li><a href="https://platform.cytel.com" class="external-link">East Horizon</a></li>
<li>Download R Files from our public Github repo: <a href="https://github.com/Cytel-Inc/CyneRgy/blob/main/inst/Examples/ConsecutiveStudiesBinary/AnalyzeUsingEastManualFormula.R" class="external-link">AnalyzeUsingEastManualFormula.R</a>,
<a href="https://github.com/Cytel-Inc/CyneRgy/blob/main/inst/Examples/ConsecutiveStudiesBinary/SimulatePatientOutcomeBinaryWithAssurance.R" class="external-link">SimulatePatientOutcomeBinaryWithAssurance.R</a>,
and <a href="https://github.com/Cytel-Inc/CyneRgy/blob/main/inst/Examples/ConsecutiveStudiesBinary/SimulatePatientOutcomeBinaryWithAssurancePh3" class="external-link">SimulatePatientOutcomeBinaryWithAssurancePh3</a>.</li>
</ul>
<div class="section level3">
<h3 id="new-project-page">New Project Page<a class="anchor" aria-label="anchor" href="#new-project-page"></a>
</h3>
<ol style="list-style-type: decimal">
<li>On East Horizon, create a new project with a binary endpoint.</li>
</ol>
<p><img src="ConsecutiveStudiesBinary_files/Step1.png" width="800"></p>
<p>In this example, we will create two different input sets: one for the
Phase 2 study and one for the Phase 3 study.</p>
</div>
<div class="section level3">
<h3 id="phase-2-study">Phase 2 Study<a class="anchor" aria-label="anchor" href="#phase-2-study"></a>
</h3>
<div class="section level4">
<h4 id="new-input-set-page">New Input Set Page<a class="anchor" aria-label="anchor" href="#new-input-set-page"></a>
</h4>
<ol start="2" style="list-style-type: decimal">
<li>Navigate to the Inputs tab, and create a new input set using the
Explore task. Rename the input set as “Phase 2”.</li>
</ol>
<p><img src="ConsecutiveStudiesBinary_files/Step2.png" width="800"></p>
</div>
<div class="section level4">
<h4 id="design-page">Design Page<a class="anchor" aria-label="anchor" href="#design-page"></a>
</h4>
<ol start="3" style="list-style-type: decimal">
<li>Within the input set you just created, navigate to the Design page
and enter the Phase 2 details, e.g. sample size. Then select the “User
Specified – R” option in the Test field.</li>
</ol>
<p><img src="ConsecutiveStudiesBinary_files/Step3.png" width="800"></p>
<ol start="4" style="list-style-type: decimal">
<li><p>Click the “+” icon next to “User Specified - R” to open the R
Integration pop-up window.</p></li>
<li><p>Click on “Select File” and then on “Continue”.</p></li>
</ol>
<p><img src="ConsecutiveStudiesBinary_files/Step5.png" width="800"></p>
<ol start="6" style="list-style-type: decimal">
<li><p>Upload and then select the file
<strong>AnalyzeUsingEastManualFormula.R</strong>.</p></li>
<li><p>Check that the correct file has been imported and the correct
Function Name has been specified by the system. Click on the “Save”
button to exit the R Integration details window.</p></li>
</ol>
<p><img src="ConsecutiveStudiesBinary_files/Step7.png" width="800"></p>
</div>
<div class="section level4">
<h4 id="response-page">Response Page<a class="anchor" aria-label="anchor" href="#response-page"></a>
</h4>
<ol start="8" style="list-style-type: decimal">
<li>Navigate to the Response page and then select “User Specified – R”
in the Distribution field.</li>
</ol>
<p><img src="ConsecutiveStudiesBinary_files/Step8.png" width="800"></p>
<ol start="9" style="list-style-type: decimal">
<li><p>Click on the “+” icon next to “User Specified - R” to open the R
Integration pop-up window.</p></li>
<li><p>Click on “Select File” and then on “Continue”.</p></li>
</ol>
<p><img src="ConsecutiveStudiesBinary_files/Step10.png" width="800"></p>
<ol start="11" style="list-style-type: decimal">
<li><p>Upload and then select the file
<strong>SimulatePatientOutcomeBinaryWithAssurance.R</strong>.</p></li>
<li><p>Check that the correct file has been imported and the correct
Function Name has been specified by the system. Note that the User
Parameter variables have been automatically pulled from the R function
that was imported.</p></li>
<li><p>Fill the parameter values to define the Beta distribution that
you would like to use to generate patient outcome data for the Phase 2
trial. In our case, we use the example values below. See the <a href="#response-integration-point">Response Integration Point</a>
section below for more information about these variables.</p></li>
</ol>
<p>Note that in this example, we used Beta priors but you could use any
other distribution by changing the R code to sample from a different one
on lines 29 and 30 of the file.</p>
<p><img src="ConsecutiveStudiesBinary_files/Step13.png" width="800"></p>
<ol start="14" style="list-style-type: decimal">
<li>Click on the “Save” button to exit the R Integration details
window.</li>
</ol>
</div>
<div class="section level4">
<h4 id="simulation-setup-page">Simulation Setup Page<a class="anchor" aria-label="anchor" href="#simulation-setup-page"></a>
</h4>
<ol start="15" style="list-style-type: decimal">
<li>Specify the number of simulation runs as needed. You can select any
number from the dropdown list as you require. For the Phase 2 input set,
it is recommended to run as many simulations as possible (e.g., 20,000).
This is because the Phase 3 simulation will only use data from
successful Phase 2 trials, so the more simulations you run, the larger
the pool of usable response rates for Phase 3’s data generation.</li>
</ol>
<p><img src="ConsecutiveStudiesBinary_files/Step15.png" width="800"></p>
<ol start="16" style="list-style-type: decimal">
<li>Check the box to “Generate Data File for All Simulated Models”.</li>
</ol>
<p><img src="ConsecutiveStudiesBinary_files/Step16.png" width="800"></p>
<ol start="17" style="list-style-type: decimal">
<li>Click the “Save &amp; Simulate” button.</li>
</ol>
<p><img src="ConsecutiveStudiesBinary_files/Step17.png" width="800"></p>
<ol start="18" style="list-style-type: decimal">
<li>Confirm by clicking on “Simulate” in the pop-up window, and wait for
the simulation runs to finish.</li>
</ol>
<p><img src="ConsecutiveStudiesBinary_files/Step18.png" width="500"></p>
</div>
<div class="section level4">
<h4 id="results-page">Results Page<a class="anchor" aria-label="anchor" href="#results-page"></a>
</h4>
<ol start="19" style="list-style-type: decimal">
<li>Navigate to the Results tab, then check whether the Phase 2
simulation failed or was completed by looking at the Status column.</li>
</ol>
<p><img src="ConsecutiveStudiesBinary_files/Step19.png" width="800"></p>
<ol start="20" style="list-style-type: decimal">
<li>If the simulation failed, open the Log window to see if there are
any helpful error messages.</li>
</ol>
<ol style="list-style-type: lower-alpha">
<li>Click on the “?” icon in the top right corner of your screen.</li>
</ol>
<p><img src="ConsecutiveStudiesBinary_files/Step20a.png" width="800"></p>
<ol start="2" style="list-style-type: lower-alpha">
<li>Click on “Log”.</li>
</ol>
<p><img src="ConsecutiveStudiesBinary_files/Step20b.png" width="400"></p>
<ol start="3" style="list-style-type: lower-alpha">
<li>Identify any errors that appear. For example:</li>
</ol>
<p><img src="ConsecutiveStudiesBinary_files/Step20c.png" width="600"></p>
<ol start="21" style="list-style-type: decimal">
<li>If the simulation has completed, click on the Result Set’s name to
open the outputs within East Horizon. If you have multiple scenarios in
your simulation, you will be prompted to label at least one scenario
from the list by clicking the ribbon icon in the Favorites column and
assigning it a name and color. Alternatively, you may also skip this
step by selecting the “Skip” button in the bottom left corner.</li>
</ol>
<p><img src="ConsecutiveStudiesBinary_files/Step21.png" width="800"></p>
<ol start="22" style="list-style-type: decimal">
<li>The Explore page of the results appears. You will notice a checkbox
on the left side of each row in the table, below the heatmap. Click on
the checkbox of the model you’d like to use as your first trial in your
program. In our example, we chose the model that generated the data
using our beta prior distributions, e.g.:</li>
</ol>
<p><img src="ConsecutiveStudiesBinary_files/Step22.png" width="800"></p>
<ol start="23" style="list-style-type: decimal">
<li>Now click on the Download dropdown menu, that is in the top right of
the screen, and the Summary Statistics option. Wait until the file is
downloaded and rename it to <strong>Ph2_results.csv</strong>.</li>
</ol>
<p><img src="ConsecutiveStudiesBinary_files/Step23.png" width="800"></p>
</div>
<div class="section level4">
<h4 id="files-page">Files Page<a class="anchor" aria-label="anchor" href="#files-page"></a>
</h4>
<ol start="24" style="list-style-type: decimal">
<li>Navigate to the Files page and click on the Inputs folder.</li>
</ol>
<p><img src="ConsecutiveStudiesBinary_files/Step24.png" width="800"></p>
<ol start="25" style="list-style-type: decimal">
<li>Click on “Upload” and select the file you just downloaded from East
Horizon. Alternatively, you can use the example file provided in the
<code>Outputs</code> directory of this example if you want to test the
workflow with our example data. Make sure the file is renamed to
“Ph2_results.csv” and placed in the Inputs folder if you intend to use
the R script as provided. If you prefer a different file name, you can
update the script accordingly.</li>
</ol>
<p><img src="ConsecutiveStudiesBinary_files/Step25.png" width="800"></p>
</div>
</div>
<div class="section level3">
<h3 id="phase-3-study">Phase 3 Study<a class="anchor" aria-label="anchor" href="#phase-3-study"></a>
</h3>
<div class="section level4">
<h4 id="new-input-set-page-1">New Input Set Page<a class="anchor" aria-label="anchor" href="#new-input-set-page-1"></a>
</h4>
<ol start="26" style="list-style-type: decimal">
<li>In East Horizon, navigate to the Inputs tab again, and create a new
input set using the Explore task. Rename the input set as “Phase
3”.</li>
</ol>
<p><img src="ConsecutiveStudiesBinary_files/Step26.png" width="800"></p>
</div>
<div class="section level4">
<h4 id="design-page-1">Design Page<a class="anchor" aria-label="anchor" href="#design-page-1"></a>
</h4>
<ol start="27" style="list-style-type: decimal">
<li>Within the input set you just created, create an input card, and
enter the Phase 3 details, e.g. sample size. For Phase 3, it is not
necessary to customize the Analysis element unless you want to use its
simulation data for an additional phase.</li>
</ol>
</div>
<div class="section level4">
<h4 id="response-page-1">Response Page<a class="anchor" aria-label="anchor" href="#response-page-1"></a>
</h4>
<ol start="28" style="list-style-type: decimal">
<li>Navigate to the Response page, create an input card, and then select
“User Specified – R” in the Distribution field.</li>
</ol>
<p><img src="ConsecutiveStudiesBinary_files/Step8.png" width="800"></p>
<ol start="29" style="list-style-type: decimal">
<li><p>Click on the “+” icon next to “User Specified - R” to open the R
Integration pop-up window.</p></li>
<li><p>Click on “Select File” and then on “Continue”.</p></li>
</ol>
<p><img src="ConsecutiveStudiesBinary_files/Step5.png" width="800"></p>
<ol start="31" style="list-style-type: decimal">
<li><p>Select the file
<strong>SimulatePatientOutcomeBinaryWithAssurancePh3.R</strong>.</p></li>
<li><p>Check that the correct file has been imported and the correct
Function Name has been specified by the system.</p></li>
</ol>
<p><img src="ConsecutiveStudiesBinary_files/Step32.png" width="800"></p>
<ol start="33" style="list-style-type: decimal">
<li>Click on the “Save” button to exit the R Integration details
window.</li>
</ol>
</div>
<div class="section level4">
<h4 id="simulation-setup-page-1">Simulation Setup Page<a class="anchor" aria-label="anchor" href="#simulation-setup-page-1"></a>
</h4>
<ol start="34" style="list-style-type: decimal">
<li>Simulate the input set the same way as described before. See Steps
15 to 18 for more information. However, for Phase 3, we recommend
choosing a lower number of simulations (e.g., 10,000). This is because
the simulation will fail when specifying a number of simulation higher
than the number of successful Phase 2 trials. In our case, it was about
13,000.</li>
</ol>
</div>
<div class="section level4">
<h4 id="results-page-1">Results Page<a class="anchor" aria-label="anchor" href="#results-page-1"></a>
</h4>
<ol start="35" style="list-style-type: decimal">
<li>Load the results as described before (see steps 19 to 21 for more
information). In the Explore page of the results, hover over each cell
in the heatmap to see a summary of the outputs. Because of our custom R
scripts, the result printed as “Power” is actually now equivalent to the
Conditional Probability of Success of the Phase 3 study, i.e., the
probability that Phase 3 succeeds given that Phase 2 succeeded.</li>
</ol>
<p><img src="ConsecutiveStudiesBinary_files/Step35.png" width="350"></p>
<p>See the <a href="#results">Results</a> section below for more
information.</p>
<hr>
</div>
</div>
</div>
<div class="section level2">
<h2 id="technical-information-and-example-values">Technical Information and Example Values<a class="anchor" aria-label="anchor" href="#technical-information-and-example-values"></a>
</h2>
<div class="section level3">
<h3 id="phase-2-study-1">Phase 2 Study<a class="anchor" aria-label="anchor" href="#phase-2-study-1"></a>
</h3>
<p>For the Phase 2 study, we customize both Response and Analysis
integration points. The figure below illustrates where everything fits
within the R integration points of Cytel products, accompanied by
flowcharts outlining the general steps performed by the R code.</p>
<p><img src="ConsecutiveStudiesBinary_files/figure-html/unnamed-chunk-3-1.png" width="700"></p>
<div class="section level4">
<h4 id="response-patient-simulation-integration-point">Response (Patient Simulation) Integration Point<a class="anchor" aria-label="anchor" href="#response-patient-simulation-integration-point"></a>
</h4>
<div class="alert alert-primary" role="alert">
<p style="margin-bottom:0">
This endpoint is related to this R file:
<a href="https://github.com/Cytel-Inc/CyneRgy/blob/main/inst/Examples/ConsecutiveStudiesBinary/R/SimulatePatientOutcomeBinaryWithAssurance.R" class="external-link alert-link">SimulatePatientOutcomeBinaryWithAssurance.R</a>
</p>
</div>
<p>Using the file above, the Response element of the Phase 2 study is
customized to generate patient outcomes for a binary response trial
while incorporating uncertainty about the true response rates by
sampling them from prior distributions. Here, we use a <strong>Beta
distribution</strong> prior. However, you could use any other
distribution by changing the R code to sample from a different one on
lines 29 and 30 of the file.</p>
<p><img src="ConsecutiveStudiesBinary_files/Beta.png" width="800"></p>
<p>For each arm, the true response probability is drawn from a Beta
distribution:</p>
<p><math display="block" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>π</mi><mtext mathvariant="normal">ctrl</mtext></msub><mo>∼</mo><mtext mathvariant="normal">Beta</mtext><mrow><mo stretchy="true" form="prefix">(</mo><msub><mi>α</mi><mtext mathvariant="normal">ctrl</mtext></msub><mo>,</mo><msub><mi>β</mi><mtext mathvariant="normal">ctrl</mtext></msub><mo stretchy="true" form="postfix">)</mo></mrow></mrow><annotation encoding="application/x-tex">
\pi_\text{ctrl} \sim \text{Beta}(\alpha_\text{ctrl}, \beta_\text{ctrl})
</annotation></semantics></math></p>
<p><math display="block" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>π</mi><mtext mathvariant="normal">exp</mtext></msub><mo>∼</mo><mtext mathvariant="normal">Beta</mtext><mrow><mo stretchy="true" form="prefix">(</mo><msub><mi>α</mi><mtext mathvariant="normal">exp</mtext></msub><mo>,</mo><msub><mi>β</mi><mtext mathvariant="normal">exp</mtext></msub><mo stretchy="true" form="postfix">)</mo></mrow></mrow><annotation encoding="application/x-tex">
\pi_\text{exp} \sim \text{Beta}(\alpha_\text{exp}, \beta_\text{exp})
</annotation></semantics></math></p>
<p>where
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><msub><mi>α</mi><mtext mathvariant="normal">ctrl</mtext></msub><annotation encoding="application/x-tex">\alpha_\text{ctrl}</annotation></semantics></math>,
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><msub><mi>β</mi><mtext mathvariant="normal">ctrl</mtext></msub><annotation encoding="application/x-tex">\beta_\text{ctrl}</annotation></semantics></math>,
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><msub><mi>α</mi><mtext mathvariant="normal">exp</mtext></msub><annotation encoding="application/x-tex">\alpha_\text{exp}</annotation></semantics></math>,
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><msub><mi>β</mi><mtext mathvariant="normal">exp</mtext></msub><annotation encoding="application/x-tex">\beta_\text{exp}</annotation></semantics></math>
are the parameters of the Beta distributions and can be user-defined.
Refer to the table below for the values of the user-defined parameters
and some example values.</p>
<table class="table">
<colgroup>
<col width="25%">
<col width="50%">
<col width="25%">
</colgroup>
<thead><tr class="header">
<th><strong>User parameter</strong></th>
<th><strong>Definition</strong></th>
<th><strong>Example Value</strong></th>
</tr></thead>
<tbody>
<tr class="odd">
<td><strong>dParameter1Ctrl</strong></td>
<td>Parameter 1 of the Beta distribution for control arm
(<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><msub><mi>α</mi><mtext mathvariant="normal">ctrl</mtext></msub><annotation encoding="application/x-tex">\alpha_\text{ctrl}</annotation></semantics></math>)</td>
<td>25</td>
</tr>
<tr class="even">
<td><strong>dParameter2Ctrl</strong></td>
<td>Parameter 2 of the Beta distribution for control arm
(<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><msub><mi>β</mi><mtext mathvariant="normal">ctrl</mtext></msub><annotation encoding="application/x-tex">\beta_\text{ctrl}</annotation></semantics></math>)</td>
<td>75</td>
</tr>
<tr class="odd">
<td><strong>dParameter1Exp</strong></td>
<td>Parameter 1 of the Beta distribution for experimental arm
(<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><msub><mi>α</mi><mtext mathvariant="normal">exp</mtext></msub><annotation encoding="application/x-tex">\alpha_\text{exp}</annotation></semantics></math>)</td>
<td>40</td>
</tr>
<tr class="even">
<td><strong>dParameter2Exp</strong></td>
<td>Parameter 2 of the Beta distribution for experimental arm
(<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><msub><mi>β</mi><mtext mathvariant="normal">exp</mtext></msub><annotation encoding="application/x-tex">\beta_\text{exp}</annotation></semantics></math>)</td>
<td>60</td>
</tr>
</tbody>
</table>
<p>These two true response probabilities are returned as outputs
<strong>TrueProbabilityControl</strong> and
<strong>TrueProbabilityExperimental</strong> at the end of the R
function. This is important because this is why these variables will
then be included in the <em>SimData</em> list of variables and picked up
in the Phase 2 Analysis script, and finally appear in the Phase 2
results CSV file, which is downloadable from East Horizon. They are
later reused in Phase 3 by loading the saved values. See Steps 24 and 25
of the <a href="#step-by-step-instructions">Step-by-Step
Instructions</a> section for more information on the loading
process.</p>
<p>Then, each patient’s binary outcome is drawn from a Bernoulli
distribution:</p>
<p><math display="block" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>Y</mi><mi>i</mi></msub><mo>∼</mo><mtext mathvariant="normal">Bernoulli</mtext><mrow><mo stretchy="true" form="prefix">(</mo><msub><mi>π</mi><mi>j</mi></msub><mo stretchy="true" form="postfix">)</mo></mrow></mrow><annotation encoding="application/x-tex">
Y_i \sim \text{Bernoulli}(\pi_j)
</annotation></semantics></math></p>
<p>where
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>Y</mi><mi>i</mi></msub><mo>∈</mo><mo stretchy="false" form="prefix">{</mo><mn>0</mn><mo>,</mo><mn>1</mn><mo stretchy="false" form="postfix">}</mo></mrow><annotation encoding="application/x-tex">Y_i \in \{0,1\}</annotation></semantics></math>
is the binary response, and
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><msub><mi>π</mi><mi>j</mi></msub><annotation encoding="application/x-tex">\pi_j</annotation></semantics></math>
is the true response probability
(<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><msub><mi>π</mi><mtext mathvariant="normal">ctrl</mtext></msub><annotation encoding="application/x-tex">\pi_\text{ctrl}</annotation></semantics></math>
or
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><msub><mi>π</mi><mtext mathvariant="normal">exp</mtext></msub><annotation encoding="application/x-tex">\pi_\text{exp}</annotation></semantics></math>
depending whether the patient
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>i</mi><annotation encoding="application/x-tex">i</annotation></semantics></math>
is in the control or experimental arm).</p>
</div>
<div class="section level4">
<h4 id="analysis-integration-point">Analysis Integration Point<a class="anchor" aria-label="anchor" href="#analysis-integration-point"></a>
</h4>
<div class="alert alert-primary" role="alert">
<p style="margin-bottom:0">
This endpoint is related to this R file:
<a href="https://github.com/Cytel-Inc/CyneRgy/blob/main/inst/Examples/ConsecutiveStudiesBinary/R/AnalyzeUsingEastManualFormula.R" class="external-link alert-link">AnalyzeUsingEastManualFormula.R</a>
</p>
</div>
<p>The analysis is the same as East Horizon, based on formulas of the
<strong>Chapter 24: Binomial Superiority Two‐Sample</strong> from the
East manual (24.2). No user-defined parameter is required for this
integration point.</p>
<p><strong>Test Statistic:</strong></p>
<p><math display="block" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>Z</mi><mi>j</mi></msub><mo>=</mo><mfrac><mrow><msub><mover><mi>π</mi><mo accent="true">̂</mo></mover><mrow><mi>t</mi><mi>j</mi></mrow></msub><mo>−</mo><msub><mover><mi>π</mi><mo accent="true">̂</mo></mover><mrow><mi>c</mi><mi>j</mi></mrow></msub></mrow><msqrt><mrow><msub><mover><mi>π</mi><mo accent="true">̂</mo></mover><mi>j</mi></msub><mo>⋅</mo><mrow><mo stretchy="true" form="prefix">(</mo><mn>1</mn><mo>−</mo><msub><mover><mi>π</mi><mo accent="true">̂</mo></mover><mi>j</mi></msub><mo stretchy="true" form="postfix">)</mo></mrow><mo>⋅</mo><mrow><mo stretchy="true" form="prefix">(</mo><mfrac><mn>1</mn><msub><mi>n</mi><mrow><mi>t</mi><mi>j</mi></mrow></msub></mfrac><mo>+</mo><mfrac><mn>1</mn><msub><mi>n</mi><mrow><mi>c</mi><mi>j</mi></mrow></msub></mfrac><mo stretchy="true" form="postfix">)</mo></mrow></mrow></msqrt></mfrac></mrow><annotation encoding="application/x-tex">Z_j = \frac{\hat{\pi}_{tj} - \hat{\pi}_{cj}}{\sqrt{\hat{\pi}_j \cdot (1 - \hat{\pi}_j) \cdot ( \frac{1}{n_{tj}} + \frac{1}{n_{cj}} )}}</annotation></semantics></math></p>
<p>Where:</p>
<ul>
<li>
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><msub><mover><mi>π</mi><mo accent="true">̂</mo></mover><mrow><mi>t</mi><mi>j</mi></mrow></msub><annotation encoding="application/x-tex">\hat{\pi}_{tj}</annotation></semantics></math>
and
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><msub><mover><mi>π</mi><mo accent="true">̂</mo></mover><mrow><mi>c</mi><mi>j</mi></mrow></msub><annotation encoding="application/x-tex">\hat{\pi}_{cj}</annotation></semantics></math>
are the observed response rate at the jth interim look in the treatment
and control groups, respectively.</li>
<li>
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><msub><mi>n</mi><mrow><mi>t</mi><mi>j</mi></mrow></msub><annotation encoding="application/x-tex">n_{tj}</annotation></semantics></math>
and
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><msub><mi>n</mi><mrow><mi>c</mi><mi>j</mi></mrow></msub><annotation encoding="application/x-tex">n_{cj}</annotation></semantics></math>
are the numbers of patients at the jth interim look in the treatment and
control groups, respectively.</li>
<li>
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mover><mi>π</mi><mo accent="true">̂</mo></mover><mi>j</mi></msub><mo>=</mo><mfrac><mrow><msub><mi>n</mi><mrow><mi>t</mi><mi>j</mi></mrow></msub><mo>⋅</mo><msub><mover><mi>π</mi><mo accent="true">̂</mo></mover><mrow><mi>t</mi><mi>j</mi></mrow></msub><mo>+</mo><msub><mi>n</mi><mrow><mi>c</mi><mi>j</mi></mrow></msub><mo>⋅</mo><msub><mover><mi>π</mi><mo accent="true">̂</mo></mover><mrow><mi>c</mi><mi>j</mi></mrow></msub></mrow><mrow><msub><mi>n</mi><mrow><mi>t</mi><mi>j</mi></mrow></msub><mo>+</mo><msub><mi>n</mi><mrow><mi>c</mi><mi>j</mi></mrow></msub></mrow></mfrac></mrow><annotation encoding="application/x-tex">\hat{\pi}_{j} = \frac{n_{tj} \cdot \hat{\pi}_{tj} + n_{cj} \cdot \hat{\pi}_{cj}}{n_{tj} + n_{cj}}</annotation></semantics></math>
is the pooled response rate estimate.</li>
</ul>
<p>In the R script, the <strong>TrueProbabilityControl</strong> and
<strong>TrueProbabilityExperimental</strong> that were generated in the
Response section are loaded from <em>SimData</em> outputs, and returned
at the end function. This is important because these variables will
appear in the Phase 2 results and will be saved to a CSV file. They will
later be reused in Phase 3 by loading the saved values as the input for
the response generation step in the simulations. See Steps 24 and 25 of
the <a href="#step-by-step-instructions">Step-by-Step Instructions</a>
section for more information on the loading process.</p>
</div>
</div>
<div class="section level3">
<h3 id="phase-3-study-1">Phase 3 Study<a class="anchor" aria-label="anchor" href="#phase-3-study-1"></a>
</h3>
<p>For Phase 3, we customize the Response integration point only. The
figure below illustrates where everything fits within the R integration
points of Cytel products, accompanied by flowcharts outlining the
general steps performed by the R code.</p>
<p><img src="ConsecutiveStudiesBinary_files/figure-html/unnamed-chunk-4-1.png" width="700"></p>
<div class="section level4">
<h4 id="response-patient-simulation-integration-point-1">Response (Patient Simulation) Integration Point<a class="anchor" aria-label="anchor" href="#response-patient-simulation-integration-point-1"></a>
</h4>
<div class="alert alert-primary" role="alert">
<p style="margin-bottom:0">
This endpoint is related to this R file:
<a href="https://github.com/Cytel-Inc/CyneRgy/blob/main/inst/Examples/ConsecutiveStudiesBinary/R/SimulatePatientOutcomeBinaryWithAssurancePh3.R" class="external-link alert-link">SimulatePatientOutcomeBinaryWithAssurancePh3.R</a>
</p>
</div>
<p>Using the file above, the Response element of the Phase 3 study is
customized to generate patient outcomes for a binary response trial
while incorporating uncertainty about the true response rates by
<strong>sampling them from the posterior distribution obtained from the
successful Phase 2 simulated trials</strong>. In this case, the
<em>LoadData</em> function reads the Phase 2 results CSV file and
extracts pairs of true control and experimental response probabilities
from trials that achieved efficacy. Each simulated Phase 3 trial then
samples one pair and uses these probabilities to generate patient-level
outcomes with <code><a href="https://rdrr.io/r/stats/Binomial.html" class="external-link">rbinom()</a></code>.</p>
<p>See Steps 24 and 25 of the <a href="#step-by-step-instructions">Step-by-Step Instructions</a> section
for more information about how to load your own results.</p>
<p>This part of the program simulation could also be replaced by
including actual data from a previous Phase 2 trial to inform the Phase
3 simulation. This is, in practice, what one would do when deciding
whether to move forward with the Phase 3 trial once the Phase 2
completes and the data has been collected and analysed.</p>
</div>
</div>
<div class="section level3">
<h3 id="results">Results<a class="anchor" aria-label="anchor" href="#results"></a>
</h3>
<p>By simulating the entire program, this example helps decision-makers
that are investigating whether it will be worth investing in the
program, as a whole, including a smaller Phase 2 trial to precede a
larger Phase 3 trial. This program could be compared to running simply
the Phase 3 trial with a vague prior distribution, like perhaps the one
used in our example for the Phase 2 simulation, or running the Phase 3
trial without prior knowledge and only an assumed value for the response
rates of the control and treatment arm.</p>
<p>When comparing these options through simulating each scenario, we
noticed that the Conditional Probability of Success of the combined
program was about 10% higher than the Probability of Success of only
running a Phase 3 trial with a vague prior distribution. This suggested
that, with the assumptions included in our example, it was indeed worth
investing further resources into a small Phase 2 before running a Phase
3.</p>
<p>To extend this analysis, one could also compute the Probability of
Success of the entire program by combining the Probability of Success of
the Phase 2 with the Probability of Success of the Phase 3, and then
compare this new metric to the original Probability of Success of
running only a Phase 3 trial. This may give clinical teams even more
oversight into the benefits of committing to a more expensive and longer
program for the higher chance of proving their treatment is working as
expected, and that the treatment arm’s patients indeed show health
benefits over the control arm’s patients.</p>
</div>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by J. Kyle Wathen, Valeria A. G. Mazzanti, Gabriel Potvin.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer>
</div>





  </body>
</html>
